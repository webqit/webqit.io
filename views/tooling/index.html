
<!-- Main Home View -->
<div namespace class="snap-mandatory-container">
    
    <script type="subscript">
        $(document.namespace.theme_color).attr('content', 'ghostwhite');
        let app = document.state;
        if (app.page.nav) {
            var nav = app.page.nav;
            if (app.page.project) {
                $(this.namespace.project_npm).html('@webqit/' + app.page.project.name);
                $(this.namespace.project_npm).attr('href', 'https://npmjs.com/package/@webqit/' + app.page.project.name);
                $(this.namespace.project_github).attr('href', 'https://github.com/webqit/' + app.page.project.name);
                nav = app.page.nav.items.filter(n => n.name === 'tooling')[0].subtree;
            }
            $(this.namespace.project_links).class('d-none', !app.page.project);
            $(this.namespace.edit_link).attr('href', 'https://github.com/webqit/webqit.docs/edit/master/' + document.state.location.pathname.replace('/tooling/', '') + '/README.md');
            $(this.namespace.project_outline).itemize(nav.items);
        }
        // ----------
        if (app.page.breadcrumb) {
            var currentPage = app.page.breadcrumb[app.page.breadcrumb.length - 1];
            $(this.namespace.page_outline).itemize(currentPage.outline || {});
            this.namespace.breadcrumb.setState({items: app.page.breadcrumb});
            // ----------
            $(this.namespace.nav).class('d-none', false);
            $(this.namespace.nav_left).attr('href', currentPage.prev ? currentPage.prev.path : '#');
            $(this.namespace.nav_left).attr('title', currentPage.prev ? 'Previous: ' + currentPage.prev.title : '');
            $(this.namespace.nav_left).class('disabled', !currentPage.prev);
            $(this.namespace.nav_right).attr('href', currentPage.next ? currentPage.next.path : '#');
            $(this.namespace.nav_right).attr('title', currentPage.next ? 'Next: ' + currentPage.next.title : '');
            $(this.namespace.nav_right).class('disabled', !currentPage.next);
        }
        // ----------
        $(this.namespace.app_drawer_open).on('click', () => toggleDrawer(this.namespace.app_drawer, this.namespace.main_backdrop, true, 'md'));
        $(this.namespace.main_backdrop).on('click', () => toggleDrawer(this.namespace.app_drawer, this.namespace.main_backdrop, false, 'md'));
        // ----------
        $(this.namespace.page_outline_control).on('click', () => $(this.namespace.page_outline_container).class('sm--d-none', false));
        $(this.namespace.page_readme_container).on('focusin', () => $(this.namespace.page_outline_container).class('sm--d-none', true));
    </script>

    <link rel="stylesheet" type="text/css" href="/css/github-markdown.css" />
    <link rel="stylesheet" type="text/css" href="/css/tooling.css" />
    
    <div class="flex-y-start">
            
        <div class="col-3 md--col-0 pos-sticky offset-top-0" style="z-index: 100;">

            <div data-id="app_drawer" class="flex-y-stretch md--border-rt-solid overflow-hidden" style="height: 100vh; max-width: 70vw; background-color: ghostwhite; border-color: silver;">

                <div class="wt-full pd-10 pd-x2 pd-btm-0 d-flex flex-column">

                    <div class="app-bar pd-10 mg-btm-10 mg-btm-x3 overflow-x-hidden md--d-none">
                        <html-import name="logo_nav" template="brand" class="wt-auto"></html-import>
                    </div>

                    <div class="pd-lft-10 pd-rt-10">
                        <ul class="pd-top-10 pd-btm-10 flex-y-center list-style-none" style="border-bottom: 1px dashed silver">
                            <li>
                                <a href="/tooling" title="Tooling" class="icon-webqit-tooling active pd-10 d-inline-block radius-10">
                                    <play-icon name="code-slash" size="sm" class="pd-6"></play-icon>
                                </a>
                            </li>
                            <li>
                                <a href="/cloud" title="Cloud" class="icon-webqit-cloud pd-10 d-inline-block radius-10">
                                    <play-icon name="cloud" size="sm" class="pd-6"></play-icon>
                                </a>
                            </li>
                            <li>
                                <a href="/community" title="Community" class="icon-webqit-community pd-10 d-inline-block radius-10">
                                    <play-icon name="flag" size="sm" class="pd-6"></play-icon>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="pd-10 col-grows overflow-y-auto">
                        <ul data-id="project_outline" template="page/tooling/#layout/project-outline" class="project-outline list-style-none"></ul>
                    </div>

                    <div data-id="project_links" class="pd-10 b i flex-y-center flex-x-separate d-none">
                        <a data-id="project_npm" href="" target="_blank"></a>
                        <a data-id="project_github" href="" target="_blank">
                            <play-icon name="github" size="xs" play-icon-type=""></play-icon>
                        </a>
                    </div>
                </div>

            </div>

        </div>

        <main class="col-grows md--col-12 flex-y-start flex-wrap">

            <div data-id="main_backdrop" class="pos-abs cover z-index-10 d-none" style="background-color: rgba(255, 255, 255, 0.95);"></div>

            <div class="app-bar-alt col-12 pd-10 pd-x3 flex-y-center flex-x-separate d-none md--d-flex" style="background-color: ghostwhite;">
                <html-import name="logo_nav" template="brand"></html-import>
                <div class="flex-y-center">
                    <div data-id="app_drawer_open" class="wt-40 ht-40 flex-center cursor-pointer">
                        <play-icon name="filter-right"></play-icon>
                    </div>
                </div>
            </div>
        
            <div data-id="page_readme_container" class="readme-container col-9 sm--col-12" tabindex="0">

                <div namespace data-id="breadcrumb" class="col-grows">
                    <ul data-id="main" template="page/tooling/#layout/breadcrumb" class="flex-y-stretch h5 list-style-none" style="width: max-content; white-space: nowrap;">
                        <li namespace class="flex-y-center">
                            <a data-id="link" class="pd-6 pd-lft-0 no-wrap" href="/">
                                <play-icon name="house-door" size="xs"></play-icon>
                            </a>
                        </li>
                        <li data-id="overflow" namespace class="overflow-notch d-none" tabindex="0">
                            <div class="ht-full flex-y-center">
                                <play-icon name="slash" size="xs"></play-icon>
                                <play-icon name="three-dots" size="xs" class="cursor-pointer"></play-icon>
                            </div>
                            <div class="overflow ht-0 flex-x-start">
                                <ul data-id="list" template="page/tooling/#layout/breadcrumb" class="overflow-list pos-abs animation-x-fast anim-fly-top-small list-style-none"></ul>
                            </div>
                        </li>
                        <li data-id="subtree" namespace class="overflow-notch d-none" tabindex="0">
                            <div class="ht-full flex-y-center cursor-pointer">
                                <play-icon name="caret-down" size="xs" class="flex-y-center"></play-icon>
                            </div>
                            <div class="overflow ht-0 flex-x-end">
                                <ul data-id="list" template="page/tooling/#layout/breadcrumb" class="overflow-list pos-abs pd-top-8 pd-btm-8 radius-4 drop-shadow animation-x-fast anim-fly-top-small list-style-none"></ul>
                            </div>
                        </li>
                    </ul>
                    <script type="subscript">
                        var main = this.namespace.main;
                        var overflowNotch = this.namespace.overflow;
                        var overflowList = overflowNotch.namespace.list;
                        var subtreeNotch = this.namespace.subtree;
                        var subtreeList = subtreeNotch.namespace.list;
                        if (this.state.items) {
                            $(subtreeNotch).class('d-none', false);
                            $(main).itemize(this.state.items, (e, el, d, k) => {
                                d.overflowCollapsed = false;
                                el[e](d);
                                if (k === this.state.items.length - 1) {
                                    $(subtreeList).itemize(d.subtree.items, null, null, {itemExportId: 'subtree'});
                                    main.append(subtreeNotch);
                                    $(subtreeNotch).class('disabled', !d.subtree);
                                }
                            }, (el, e, d, k, overflowCount) => {
                                d.overflowCollapsed = e === 'collapse';
                                $(overflowNotch).class('d-none', overflowCount === 0);
                            }, {collapsionPoint: 'start'});
                            $(overflowList).itemize(this.state.items, null, null, {itemExportId: 'overflow'});
                        }
                    </script>
                </div>

                <div class="markdown-body" style="min-height: 75vh;">
                    <html-import name="readme" data-id="main">
                        <div class="flex-center" style="height: 85vh;">DOCS not found!</div>
                    </html-import>
                </div>
                
                <br />
                
                <div class="flex-x-separate">
                    <a data-id="edit_link" href="" target="_blank" class="pd-6 flex-y-center" style="background-color: ghostwhite;">
                        <play-icon name="pencil" size="xs" class="pd-4" style="font-size: smaller;"></play-icon>
                        <span class="pd-4">Edit this page on github</span>
                    </a>
                </div>

                <br />

                <footer class="readme-footer pos-sticky offset-btm-0">
                    <br />
                    <ul data-id="nav" class="footer-nav flex-x-separate flex-y-center d-none">
                        <li><a href="" data-id="nav_left"><play-icon name="arrow-left" size="sm"></play-icon></a></li>
                        <li><a href="" data-id="nav_right"><play-icon name="arrow-right" size="sm"></play-icon></a></li>
                    </ul>
                </footer>
                
            </div>

            <div class="col-3 sm--col-0 sm--flex-x-end pos-sticky offset-top-0 overflow-hidden sm--overflow-visible">
                <div data-id="page_outline_control" class="pos-abs offset-top-10 drop-shadow flex-y-center cursor-pointer d-none sm--d-block" style="background-color: white;">
                    <play-icon name="list-nested" size="sm" class="pd-10 d-none sm--d-block"></play-icon>
                </div>
                <div data-id="page_outline_container" class="pos-rel d-flex flex-column col-none pd-10 pd-x2 pd-btm-0 sm--wt-100 sm--wt-x2 sm--pd-10 sm--pd-btm-0 drop-shadow z-index-10 sm--d-none" style="background-color: white; height: 100vh; max-width: 50vw;">
                    <div class="pd-10">
                        <play-icon name="list-nested" size="xs" class="flex-center radius-4" style="width: 30px; height: 30px; border: 1px dashed black;"></play-icon>
                    </div>
                    <ul data-id="page_outline" template="page/tooling/#layout/page-outline" class="page-outline col-grows pd-4 overflow-y-auto list-style-none"></ul>
                    <div class="pd-6 flex-y-center flex-x-separate">
                        <a href="#"><play-icon name="arrow-up" size="sm"></play-icon></a>
                    </div>
                </div>
            </div>

        </main>

    </div>

    <!-- CODE HIGHLIGHTING -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/github.min.css">

</div>

<!-- TEMPLATES -->

<template name="#layout">

    <template name="projects-listing">
        <ul exportgroup="ul" template="page/tooling/#layout/projects-listing" class="pd-0 list-style-none">
            <script type="subscript">
                let app = document.state;
                if (app.page.nav && !app.page.project) {
                    $(this).itemize(app.page.projects);
                }
            </script>
        </ul>
        <li namespace>
            <h3 data-id="title" class="mg-top-10 mg-btm-10 mg-x2 pd-lft-10 pd-x2 b border-lft-solid border-lft-4 txt-sm"></h3>
            <ul data-id="items" class="pd-0 d-flex flex-wrap list-style-none" template="page/tooling/#layout/projects-listing"></ul>
            <script type="subscript">
                if (this.state.title) {
                    $(this.namespace.title).html(this.state.title);
                    $(this.namespace.items).itemize(this.state.items, null, null, {itemExportId: 'project'});
                }
            </script>
        </li>
        <li exportgroup="project" namespace class="col-6 sm--col-12 pd-6">
            <div class="pd-10 pd-x3 pd-top-x2 pd-btm-x2 radius-10 drop-shadow" style="background-color: ghostwhite;">
                <div>
                    <play-icon data-id="icon" name="square"></play-icon>
                    <h4 data-id="title" style="margin-top: 15px; margin-bottom: 15px;"></h4>
                    <p data-id="desc"></p>
                </div>
                <ul class="pd-0 flex-x-separate flex-y-center wt-full pd-top-10 pd-top-x2 list-style-none">
                    <li><a data-id="page" class="flex-y-center" href="" style="text-decoration: none;">
                        <play-icon name="arrow-return-right" size="sm"></play-icon>
                        <span class="mg-lft-8">Learn more</span>
                    </a></li>
                    <li><a data-id="github" href="" target="_blank">
                        <play-icon name="github" size="sm" play-icon-type=""></play-icon>
                    </a></li>
                </ul>
            </div>
            <script type="subscript">
                if (!this.state.title) return;
                $(this.namespace.icon).attr('name', this.state.icon || 'square');
                $(this.namespace.title).html(this.state.title);
                $(this.namespace.desc).html(this.state.desc);
                $(this.namespace.page).attr('href', this.state.page);
                $(this.namespace.github).attr('href', 'https://github.com/' + this.state.github);
            </script>
        </li>
    </template>

    <template name="project-outline">
        <li namespace class="pd-top-6 pd-btm-6">
            <div class="flex-y-center">
                <span data-id="subtree_notch" class="flex-y-center pd-rt-4">
                    <play-icon data-id="subtree_icon" name="dot" size="xs" style="font-size: x-small;"></play-icon>
                </span>
                <a data-id="link" href="" class="col-grows flex-y-center flex-x-separate">
                    <span data-id="link_text"></span>
                    <play-icon name="chevron-right" size="xs" class="flex-y-center pd-lft-8"></play-icon>
                </a>
            </div>
            <ul data-id="sub_menu" template="page/tooling/#layout/project-outline" class="project-suboutline pd-lft-6 pd-lft-x2 pd-top-4 pd-btm-4 d-none list-style-none"></ul>
            <script type="subscript">
                var activePath = document.state.location.pathname;
                if (this.state.title) {
                    var isActivePath = (activePath + '/').startsWith(this.state.path + '/');
                    $(this.namespace.link).attr('href', this.state.path);
                    $(this.namespace.link_text).html(this.state.title);
                    $(this.namespace.link).class('active', isActivePath);
                    // Auto-active on path match
                    if (isActivePath) {
                        this.state.active = true;
                    }
                    $(this).class('active', this.state.active);
                    if (this.state.subtree) {
                        $(this.namespace.sub_menu).class('d-none', !this.state.active);
                        $(this.namespace.sub_menu).itemize(this.state.subtree.items);
                        $(this.namespace.subtree_notch).class('cursor-pointer', true);
                        $(this.namespace.subtree_icon).attr('name', 'caret-' + (this.state.active ? 'down' : 'right') + '-fill');
                        $(this.namespace.subtree_notch).on('click', e => {
                            this.state.active = !this.state.active;
                            return false;
                        });
                    }
                }
            </script>
        </li>
    </template>

    <template name="page-outline">
        <li namespace class="pd-6">
            <a data-id="link" href=""></a>
            <ul data-id="sub_menu" template="page/tooling/#layout/page-outline" class="page-suboutline pd-4 d-none list-style-none"></ul>
            <script type="subscript">
                var activeHash = document.state.location.hash;
                if (this.state.title) {
                    $(this.namespace.link).html(this.state.title);
                    $(this.namespace.link).attr('href', '#' + this.state.uri);
                    $(this.namespace.link).class('active', activeHash === '#' + this.state.uri);
                    if (this.state.subtree.length) {
                        $(this.namespace.sub_menu).class('d-none', false);
                        $(this.namespace.sub_menu).itemize(this.state.subtree);
                    }
                }
            </script>
        </li>
    </template>

    <template name="breadcrumb">
        <li namespace class="flex-y-center">
            <play-icon name="slash" size="xs"></play-icon>
            <a data-id="link" class="pd-6 no-wrap" href="" style="font-size: smaller;"></a>
            <script type="subscript">
                if (this.state.title) {
                    $(this.namespace.link).html(this.state.title);
                    $(this.namespace.link).attr('href', this.state.path);
                    $(this).class('d-none', this.state.overflowCollapsed);
                }
            </script>
        </li>
        <li exportgroup="overflow" namespace class="d-none">
            <a data-id="link" class="flex-y-center pd-4 pd-lft-10 pd-rt-10" href="">
                <play-icon name="arrow-return-right" size="xs" class="pd-4"></play-icon>
                <span data-id="link_text" class="pd-4" style="word-break: break-word;"></span>
            </a>
            <script type="subscript">
                if (this.state.title) {
                    $(this.namespace.link_text).html(this.state.title);
                    $(this.namespace.link).attr('href', this.state.path);
                    $(this).class('d-none', !this.state.overflowCollapsed);
                }
            </script>
        </li>
        <li exportgroup="subtree" namespace>
            <a data-id="link" class="flex-y-center pd-4 pd-lft-10 pd-rt-10" href="">
                <play-icon name="chevron-right" size="xs" class="pd-4" style="font-size: smaller;"></play-icon>
                <span data-id="link_text" class="pd-4" style="word-break: break-word;"></span>
            </a>
            <script type="subscript">
                if (this.state.title) {
                    $(this.namespace.link_text).html(this.state.title);
                    $(this.namespace.link).attr('href', this.state.path);
                }
            </script>
        </li>
    </template>

</template>