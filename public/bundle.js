/*! For license information please see bundle.js.LICENSE.txt */
import*as e from"https://flackr.github.io/scroll-timeline/dist/scroll-timeline.js";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{Parser:()=>Ie,Runtime:()=>gr,Scope:()=>xt});var s={};t.r(s),t.d(s,{default:()=>Oi,render:()=>xi});var n={};function i(e){return typeof e}function a(e,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new Map);var r,s,n=globalThis.WebQitInternalsRegistry.get(e);if(!n){if(n=new Map,!1===t[0])return n;globalThis.WebQitInternalsRegistry.set(e,n)}for(;r=t.shift();)if((s=n)&&!(n=n.get(r))){if(n=new Map,!1===t[0])return n;s.set(r,n)}return n}function o(e){return Array.isArray(e)}function l(e){return"function"==typeof e}function c(e){return null===e||""===e}function h(e){return arguments.length&&(void 0===e||void 0===e)}function u(e){return Array.isArray(e)||"object"==typeof e&&e||l(e)}function p(e){return c(e)||h(e)||!1===e||0===e||u(e)&&!Object.keys(e).length}function f(e){return l(e)||e&&"[object function]"==={}.toString.call(e)}function d(e){return e instanceof Number||"number"==typeof e}function m(e){return d(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}function g(e){return!Array.isArray(e)&&"object"==typeof e&&e}function y(e){return g(e)&&Object.getPrototypeOf(e)===Object.prototype}function v(e){return e instanceof String||"string"==typeof e&&null!==e}function b(e,t=!0){return o(e)?e:!t&&g(e)?[e]:!1!==e&&0!==e&&p(e)?[]:function(e){return!v(e)&&!h(e.length)}(e)?Array.prototype.slice.call(e):g(e)?Object.values(e):[e]}function w(e,t,r=null){return r||!1!==r&&e.dotSafe&&t.dotSafe?e.join(".")===t.join("."):e.length===t.length&&e.reduce(((e,r,s)=>e&&r===t[s]),!0)}function O(e,t,r=null){return o(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1!==t.indexOf(e))):[]}function x(e){return(j(e)?e:b(e).length?[e]:[]).reduce(((e,t)=>e.concat([b(t)])),[]).map((e=>E.resolve(e)))}t.r(n),t.d(n,{default:()=>ka,render:()=>Sa}),new Map;class E extends Array{static resolve(e){return e.every((e=>!(e+"").includes(".")))?(new E).concat(e):e}get dotSafe(){return!0}}function j(e){return b(e).reduce(((e,t)=>e||o(t)),!1)}function k(e){return e.filter((e=>e||0===e)).length!==e.length}class S{constructor(e){this.target=e,this.fireables=[],this.currentlyFiring=[]}add(e){return this.fireables.push(e),e}remove(e){this.fireables=this.fireables.filter((t=>t!==e))}removeMatches(e){this.match(e).forEach((e=>{this.fireables=this.fireables.filter((t=>t!==e))}))}match(e){return this.fireables.filter((t=>{var r=x(t.filter),s=b((t.params||{}).tags),n=x(e.filter),i=b((e.params||{}).tags);return(!e.originalHandler||t.handler===e.originalHandler)&&(!n.length||w(n,r))&&(!i.length||i.length===s.length&&O(s,i).length===i.length)}))}static _getFirebase(e,t,r=!0,s=this.__namespace){if(!u(t))throw new Error('Subject must be of type object; "'+i(t)+'" given!');var n=this;return s&&globalThis.WebQitObserverNamespaceRegistry.has(e+"-"+s)&&(n=globalThis.WebQitObserverNamespaceRegistry.get(e+"-"+s),e+="-"+s),!a(t,"firebases").has(e)&&r&&a(t,"firebases").set(e,new n(t)),a(t,"firebases").get(e)}static _namespace(e,t,r=null){if(e+="-"+t,2===arguments.length)return globalThis.WebQitObserverNamespaceRegistry.get(e);if(!(r.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${t} must be a subclass of ${this.name}.`);globalThis.WebQitObserverNamespaceRegistry.set(e,r),r.__namespace=t}}globalThis.WebQitObserverNamespaceRegistry||(globalThis.WebQitObserverNamespaceRegistry=new Map);class C{constructor(e,t){this.target=e,this.handler=t.handler,this.filter=t.filter,this.params=t.params}disconnect(){this.disconnected=!0}}class P extends C{fire(e,t,r){return this.disconnected||this.filter&&!O(b(this.filter),[e.type]).length?t(...Array.prototype.slice.call(arguments,2)):this.handler(e,r,t)}}function _(e,t){var r=void 0;return u(e)&&Object.keys(e).forEach(((s,n)=>{!1!==r&&(r=t(m(s)?parseFloat(s):s,e[s],n))})),r}class T{constructor(e,t){if(this.target=e,!t.type)throw new Error("Action type must be given in definition!");_(t,((e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})})),Object.seal(this)}}class A extends S{add(e){return super.add(new P(this.target,e))}fire(e,t=null){if(e instanceof T||(e=new T(this.target,e)),this.currentlyFiring.filter((t=>t.type===e.type&&t.name===e.name)).length)return t?t():void 0;this.currentlyFiring.push(e);const r=(s,...n)=>{var i=this.fireables[s];return i?i.fire(e,((...e)=>r(s+1,...e)),...n):t?t(...n):n[0]};var s=r(0);return this.currentlyFiring.pop(),s}static getFirebase(e,t=!0,r=null){return super._getFirebase("interceptor",...arguments)}static namespace(e,t=null){return super._namespace("interceptor",...arguments)}}function D(e){return a(e,!1).get(e)||e}function M(e,t,r={},s={}){if(!t||!u(t))throw new Error("Target must be of type object!");t=D(t);var n,i=function(s){return arguments.length?s:Reflect[e](t,...Object.values(r))};return(n=A.getFirebase(t,!1,s.namespace))?n.fire({type:e,...r},i):i()}function R(e,t,r,s={}){return M("apply",e,{thisArgument:t,argumentsList:r},s)}function W(e,t,r=null,s={}){return M("construct",e,arguments.length>2?{argumentsList:t,newTarget:r}:{argumentsList:t},s)}function F(e,t=1){var r=0;e.forEach((e=>{r++}));var s=e.slice(e.length-r,t);return arguments.length>1?s:s[0]}function I(e,t=1){return arguments.length>1?F(e.slice().reverse(),t).reverse():F(e.slice().reverse())}function L(e,t){return e.reduce(((e,r,s)=>e||t(r,s)),!1)}function N(e,t,r=null){return r||!1!==r&&e.dotSafe&&t.dotSafe?(e.join(".")+".").startsWith(t.join(".")+"."):t.reduce(((t,r,s)=>t&&r===e[s]),!0)}function q(e,t,r=null,s=!1){var n=function(e,t,r=null,s=!1){return t.length>e.length?-1:("number"==typeof r?s?e.slice(0,r+1+(r<0?e.length:0)):e.slice(r):e).reduce(((e,r,n)=>{var[i,a,o]=e;if(!s&&i>-1)return[i,a,o];var l=o+1,c=r===t[l]?0===l?[n,0]:[a,l]:[-1,-1];return c[1]===t.length-1&&(c[1]=-1,c[0]>-1)?[c[0]].concat(c):[i].concat(c)}),[-1,-1,-1])[0]+(s||"number"!=typeof r?0:r>-1?r:e.length-r)}(e,t,r,s);return-1===n?[]:e.slice(n+t.length)}class B{constructor(e,t=!1){this._={},this._.target=e,this._.cancellable=t,this._.propagationStopped=!1,this._.defaultPrevented=!1,this._.promisesInstance=null,this._.promises=[]}get target(){return this._.target}get cancellable(){return this._.cancellable}stopPropagation(){this._.propagationStopped=!0}get propagationStopped(){return this._.propagationStopped}preventDefault(){this._.defaultPrevented=!0}get defaultPrevented(){return this._.defaultPrevented}waitUntil(e){e instanceof Promise&&(this._.promises.push(e),this._.promisesInstance=null)}get promises(){return!this._.promisesInstance&&this._.promises.length&&(this._.promisesInstance=Promise.all(this._.promises)),this._.promisesInstance}respondWith(e){var t,r=g(e)&&!h(e.propagationStopped)&&!h(e.defaultPrevented);!1===e||r&&e.propagationStopped?this.stopPropagation():!1===e||r&&e.defaultPrevented?this.preventDefault():(e instanceof Promise&&(t=e)||r&&(t=e.promises))&&this.waitUntil(t)}}class Q extends C{constructor(e,t){if(super(e,t),this.filters2D=x(this.filter),this.filtersIsOriginally2D=j(this.filter),this.filtersIsDynamic=this.filters2D.filter((e=>k(b(e)))).length>0,this.filtersIsDynamic&&this.filters2D.length>1)throw new Error('Only one "Dynamic Filter" must be observed at a time! "'+this.filters2D.map((e=>"["+e.join(", ")+"]")).join(", ")+'" have been bound together.')}fire(e){if(this.disconnected||this.params.type&&!L(e,(e=>this.params.type===e.type)))return;const t=e=>!["set","def"].includes(e.type)||!this.params.diff||(f(this.params.diff)?this.params.diff(e.value,e.oldValue):e.value!==e.oldValue);var r=new B(this.target);if(this.filters2D.length){var s=e.filter((e=>this.filters2D.filter(((r,s)=>{var n=r.slice();return this.filtersIsDynamic&&e.path.forEach(((e,t)=>{n[t]=n[t]||0===n[t]?n[t]:e})),(!this.filtersIsDynamic||!k(n))&&t(e)&&(!this.params.subtree&&w(n,e.path)||this.params.suptree&&N(n,e.path)&&(!m(this.params.suptree)||q(n,e.path).length<=this.params.suptree)||this.params.subtree&&e.path.length>=n.length&&N(e.path,n)&&(!m(this.params.subtree)||q(e.path,n).length<=this.params.subtree))})).length));if(s.length)if(this.filtersIsOriginally2D||this.params.subtree){var n=s;g(this.filter)&&(n={...this.filter},s.forEach(((e,t)=>{n[e.name]=e}))),r.respondWith(this.handler(n,r))}else s.forEach(((e,t)=>{r.respondWith(this.handler(e,r))}))}else(this.params.subtree||e.filter((e=>w(e.path,[e.name]))).length===e.length)&&e.filter((e=>t(e))).length&&r.respondWith(this.handler(e,r));return r}}class V{constructor(e,t){if(this.target=e,t.originalSubject||(this.originalSubject=e),!("type"in t))throw new Error("Mutation type must be given in definition!");if(!("name"in t))throw new Error("Property name must be given in definition!");_(t,((e,t)=>{"path"===e&&(t=E.resolve(t)),Object.defineProperty(this,e,{value:t,enumerable:!0})})),this.path||Object.defineProperty(this,"path",{value:E.resolve([t.name]),enumerable:!0}),Object.seal(this)}}class U extends S{constructor(e){super(e),this.buffers=[]}add(e){return super.add(new Q(this.target,e))}fire(e,t){var r=new B(this.target,t);return e=b(e,!1).map((e=>e instanceof V?e:new V(this.target,e))),this.buffers.length?(I(this.buffers)(e),r):(this.currentlyFiring.filter((t=>e.filter((e=>t.type===e.type&&t.name===e.name)).length)).length,this.fireables.forEach((s=>{if(r.propagationStopped&&t)return r;r.respondWith(s.fire(e))})),r)}static getFirebase(e,t=!0,r=null){return super._getFirebase("observer",...arguments)}static namespace(e,t=null){return super._namespace("observer",...arguments)}}function H(e,t,r=null,s={}){if(!(e=r||e)||!u(e))throw new Error("Target must be of type object!");e=D(e);var n=b(t),i=n.map((t=>{var i,o=function(s){return arguments.length?s:a(e,"accessorizedProps").has(t)&&a(e,"accessorizedProps").get(t).touch(!0)?a(e,"accessorizedProps").get(t).get():r?Reflect.get(e,t,r):Reflect.get(e,t)};return(i=A.getFirebase(e,!0,s.namespace))?i.fire({type:"get",name:t,related:n,receiver:r},o):o()}));return o(t)?i:i[0]}function z(e,t,r=!1,s=!1,n=!1){var i=0,a=e.shift();if((m(a)||!0===a||!1===a)&&(i=a,a=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach(((e,l)=>{var c,h,p;(u(e)||f(e))&&(r?(c=e,p=[],function(e,t){t=(t=t||Object.prototype)&&!o(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(c,h).forEach((e=>{!function(e,...t){t.forEach((t=>{e.indexOf(t)<0&&e.push(t)}))}(p,...Object.getOwnPropertyNames(e))})),p):Object.getOwnPropertyNames(e)).forEach((c=>{if(t(c,a,e,l)){var h=a[c],u=e[c];if((o(h)&&o(u)||g(h)&&g(u))&&(!0===i||i>0))a[c]=o(h)&&o(u)?[]:{},z([m(i)?i-1:i,a[c],h,u],t,r,s,n);else if(o(a)&&o(e))s?a[c]=u:a.push(u);else try{n?Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(e,c)):a[c]=e[c]}catch(e){}}}))})),a}function K(...e){return z(e,((e,t,r)=>!0),!1,!1,!1)}function G(e,t,r=null,s={}){if(!(e=D(e))||!u(e))throw new Error('Observable subjects must be of type object; "'+i(e)+'" given!');if(f(t)&&(s=arguments.length>2?r:{},r=t,t=null),!f(r))throw new Error('Handler must be a function; "'+i(r)+'" given!');var n,a=U.getFirebase(e,!0,s.namespace),o={filter:t,handler:r,params:s};if((o.filter||"*"===o.params.subtree||o.params.subtree&&Z(e))&&Y(e,o.filter,o.params.subtree,s.namespace),o.params.unique&&(n=a.match({filter:t,params:s})).length){if("replace"!==o.params.unique)return n[0];a.remove(n[0])}return a.add(o)}function J(e,t,r,s=null,n={}){var i;if(e!==r&&(G(r,((r,s)=>{if(i=U.getFirebase(e,!1,n.namespace)){var a=r.map((r=>{var s=r;do{if(s.target===e)return}while(s=s.src);var n={};return _(r,((e,t)=>{"target"!==e&&"name"!==e&&"path"!==e&&"src"!==e&&(n[e]=t)})),n.name=t,n.path=[t].concat(r.path),n.originalSubject=r.originalSubject,n.src=r,new V(e,n)})).filter((e=>e));if(a.length)return i.fire(a,s.cancellable)}}),{subtree:!0,...n,unique:!0,tags:[X,t,e]}),g(s)&&(i=U.getFirebase(e,!1,n.namespace)))){var a=K({name:t,type:"set",value:r,related:[t]},s);let e=i.fire(a,n.cancellable);if(n.eventTypeReturn)return e}}const X={};function Y(e,t=null,r=!1,s=null){if(!e||!u(e))throw new Error("Target must be of type object!");var n=U.getFirebase(e,!0,s);if(n&&!n.build){n.build=r;var i=x(t),a=!i.length||i.filter((e=>!e[0]&&0!==e[0])).length?Object.keys(e):i.map((e=>e[0])),o=i.length?i.map((e=>e.slice(1))).filter((e=>e.length)):null;n.subBuild=o&&o.length?o:null,a.forEach((t=>{var i=H(e,t,null,{namespace:s});try{u(i)&&(J(e,t,i,null,params),(n.subBuild&&Z(i)||(_isFunction(r)?r(i):r&&Z(i)))&&Y(i,n.subBuild,r,s))}catch(e){}}))}}const Z=e=>(e instanceof Object||e instanceof Array||e instanceof Function)&&("undefined"==typeof window||e!==window);function ee(e,t,r=null,s={}){if(!(e=D(e))||!u(e))throw new Error('Observable subjects must be of type object; "'+i(e)+'" given!');if(f(t)&&(s=arguments.length>2?r:{},r=t,t=null),r&&!f(r))throw new Error('Handler must be a function; "'+i(r)+'" given!');var n;if(n=U.getFirebase(e,!1,s.namespace))return n.removeMatches({filter:t,originalHandler:r,params:s})}function te(e,t,r,s=null,n={}){var i;if(ee(r,null,null,{...n,tags:[X,t,e]}),g(s)&&(i=U.getFirebase(e,!1,n.namespace))){var a=K({name:t,type:"del",oldValue:r,related:[t]},s);i.fire(a,n.cancellable)}}function re(e,t,r={}){return M("has",e,{name:t},r)}function se(e,t,r,s={}){t=r.receiver||t;var n=r.keysOrPayload,i=r.value;if(!t||!u(t))throw new Error("Target must be of type object!");g(n)&&(s=i||{},i=null),t=D(t);var l=A.getFirebase(t,!1,s.namespace),c=U.getFirebase(t,!1,s.namespace);const h=(n,i,o,h)=>{var p,f="set";e&&(f="defineProperty",i=(p=i||{}).value);var d,m=!1;re(t,n,s)&&(m=!0,d=H(t,n,r.receiver,s));var g={name:n,type:f,value:i,receiver:r.receiver,related:o,detail:h,isUpdate:m,oldValue:d},y=function(e){if(arguments.length&&(p?p=e:i=e),p){if(a(t,"accessorizedProps",!1).has(n)&&!a(t,"accessorizedProps").get(n).restore())return!1;Object.defineProperty(t,n,p)}else if(a(t,"accessorizedProps",!1).has(n))return a(t,"accessorizedProps").get(n).set(i);return t[n]=i,!0};if(l){var v=p?{type:"defineProperty",name:n,descriptor:p,receiver:r.receiver,related:o,detail:h,isUpdate:m,oldValue:d}:{type:"set",name:n,value:i,receiver:r.receiver,related:o,detail:h,isUpdate:m,oldValue:d};g.success=l.fire(v,y)}else g.success=y();return g.success&&g.value!==g.oldValue&&(u(g.oldValue)&&te(t,n,g.oldValue,null,s),u(g.value)&&(J(t,n,g.value,null,s),c&&(c.subBuild||c.build&&Z(g.value))&&Y(g.value,c.subBuild,c.build,s.namespace))),g};var p,f=[];o(n)||(v(n)||d(n))&&(p=b(n))?f=p.map((e=>h(e,i,p,s.detail))):g(n)&&(p=Object.keys(n))&&(f=p.map((e=>h(e,n[e],p,s.detail))));var m,y=f.filter((e=>!1!==e.success));return c?(m=c.fire(y,s.cancellable)).successCount=y.length:s.eventTypeReturn&&(m=new B(t)),s.eventTypeReturn?m:y.length>0}function ne(e,t,r=null,s={}){return se(!0,e,{keysOrPayload:t,value:r},s)}function ie(e,t,r={}){if(!e||!u(e))throw new Error("Target must be of type object!");e=D(e);var s,n,i=b(t),o=i.map((t=>{var s;re(e,t,r)&&(s=H(e,t,null,r));var n,o={name:t,type:"deleteProperty",related:i,detail:r.detail,oldValue:s},l=function(r){return arguments.length?r:!(a(e,"accessorizedProps",!1).has(t)&&!a(e,"accessorizedProps").get(t).restore()||(delete e[t],0))};return(n=A.getFirebase(e,!1,r.namespace))?o.success=n.fire({type:"deleteProperty",name:t,oldValue:s,related:i},l):o.success=l(),o.success&&u(o.oldValue)&&te(e,t,o.oldValue,null,r),o})).filter((e=>!1!==e.success));return(s=U.getFirebase(e,!1,r.namespace))?(n=s.fire(o,r.cancellable)).successCount=o.length:r.eventTypeReturn&&(n=new B(e)),r.eventTypeReturn?n:o.length>0}function ae(e,t,r={}){return M("getOwnPropertyDescriptor",e,{name:t},r)}function oe(e,t={}){return M("getPrototypeOf",e,{},t)}function le(e,t={}){return M("isExtensible",e,{},t)}function ce(e,t={}){return M("ownKeys",e,{},t)}function he(e,t={}){return M("preventExtensions",e,{},t)}function ue(e,t,r=null,s=null,n={}){return se(!1,e,arguments.length>3?{keysOrPayload:t,value:r,receiver:s}:{keysOrPayload:t,value:r},n)}function pe(e,t,r={}){return M("setPrototypeOf",e,{prototype:t},r)}function fe(e,t=[],r=!0){var s=0;return m(arguments[0])&&u(arguments[1])&&(s=arguments[0],e=arguments[1],t=arguments[2]||[]),z([s,{},e],((e,r,s)=>f(t)?t(e):!o(t)||!t.length||t.indexOf(e)>-1),!1,!1,r)}function de(e){return e.filter(((e,t,r)=>r.indexOf(e)===t))}const me={apply:R,construct:W,defineProperty:ne,deleteProperty:ie,get:H,getOwnPropertyDescriptor:ae,getPrototypeOf:oe,has:re,isExtensible:le,ownKeys:ce,preventExtensions:he,set:ue,setPrototypeOf:pe,accessorize:function(e,t=[],r={}){r=g(t)?t:r;var s=(1===arguments.length?Object.keys(e):b(t)).map((t=>{if(a(e,"accessorizedProps").has(t)&&a(e,"accessorizedProps").get(t).touch(!0))return!1;const s=()=>{for(var r,s=e;!r&&(s=Object.getPrototypeOf(s));)r=Object.getOwnPropertyDescriptor(s,t);return r};var n,i,o=Object.getOwnPropertyDescriptor(e,t);o||(n={writable:!0,enumerable:!(t in e),configurable:!1!==r.configurable});var l={...o||n};"value"in l&&delete l.value,"writable"in l&&delete l.writable,l.get=()=>{if(c.ongoingGets.length)return c.get();c.ongoingGets.push(1);var s=H(e,t,null,r);return c.ongoingGets.pop(),s},l.set=s=>{if(c.ongoingSets.length)return c.set(s);c.ongoingSets.push(1);var n=ue(e,t,s,null,r);return c.ongoingSets.pop(),n};var c={ongoingGets:[],ongoingSets:[],get:function(){var t=o;return t||(t=i?n:s()||n),t.get?t.get.call(e):t.value},set:function(t){var r=o;return r||(i?r=n:(r=s())?"value"in r&&(r=n,i=!0):(r=n,i=!0)),r.set||r.get?!!r.set&&r.set.call(e,t):(r.value=t,!0)},restore:function(){try{return this.intact()&&(o||i?Object.defineProperty(e,t,o||n):delete e[t],a(e,"accessorizedProps").delete(t)),!0}catch(e){}return!1},intact:function(){return(Object.getOwnPropertyDescriptor(e,t)||{}).get===l.get},touch:function(e=!1){return this.intact()||!!e&&!this.restore()}};try{return Object.defineProperty(e,t,l),a(e,"accessorizedProps").set(t,c),!0}catch(e){}return!1}));return o(t)?s:s[0]},unaccessorize:function(e,t=[],r={}){r=g(t)?t:r;var s=(1===arguments.length?Object.keys(e):b(t)).map((t=>!a(e,"accessorizedProps",!1).has(t)||a(e,"accessorizedProps").get(t).restore()));return o(t)?s:s[0]},proxy:function(e,t={}){if(!u(e))throw new Error('Object must be of type target; "'+i(e)+'" given!');var r=new Proxy(e,{apply:(e,r,s)=>R(e,r,s,t),construct:(e,r,s=null)=>W(e,r,s,t),defineProperty:(e,r,s)=>ne(e,r,s,t),deleteProperty:(e,r)=>ie(e,r,t),get:(e,s,n=null)=>{var i=H(e,s,n,t);return!1!==t.proxyAutoBinding&&f(i)&&!function(e){return l(e)&&/^class\s?/.test(Function.prototype.toString.call(e))}(i)?i.bind(r):i},getOwnPropertyDescriptor:(e,r)=>ae(e,r,t),getPrototypeOf:e=>oe(e,t),has:(e,r)=>re(e,r,t),isExtensible:e=>le(e,t),ownKeys:e=>ce(e,t),preventExtensions:e=>he(e,t),set:(e,r,s,n=null)=>ue(e,r,s,n,t),setPrototypeOf:(e,r)=>pe(e,r,t)});return a(r).set(r,e),r},unproxy:D,observe:G,unobserve:ee,intercept:function(e,t,r={}){if(!u(e=D(e)))throw new Error('Object must be of type target; "'+i(handler)+'" given!');var s={},n=!0;g(t)||(f(t)?t={"":t}:f(r)&&(t={[t]:r},r=arguments.length>3?arguments[3]:{}),n=!1);var a=A.getFirebase(e,!0,r.namespace);return Object.keys(t).forEach((e=>{if(!f(t[e]))throw new Error("Callback"+(null===e?"":" for "+e)+' must be a function; "'+i(t[e])+'" given!');var o,l={filter:e,handler:t[e],params:r};if(l.params.unique&&(o=a.match(l)).length){if("replace"!==l.params.unique)return o[0];a.remove(o[0])}n?s[e]=a.add(l):s=a.add(l)})),s},unintercept:function(e,t=null,r={}){if(!(e=D(e))||!u(e))throw new Error('Object must be of type target; "'+i(e)+'" given!');var s=A.getFirebase(e,!1,r.namespace);_isObject(t)||(f(t)?t={[null]:t}:f(r)&&(t={[t]:r},r=arguments.length>3?arguments[3]:{}),isOriginallyObj=!1),(s=A.getFirebase(e,!1,r.namespace))&&Object.keys(t).forEach((e=>{if(!f(t[e]))throw new Error("Callback"+(null===e?"":" for "+e)+' must be a function; "'+i(t[e])+'" given!');var n={filter:e,originalHandler:t[e],params:r};return s.removeMatches(n)}))},closure:function(e,...t){var r=t.map((e=>{if(!u(e=D(e)))throw new Error("Target must be of type object!");return{target:e,subjectCopy:o(e)?e.slice(0):fe(e)}})),s=e(...t);const n=()=>{r.map((e=>{var t,r=Object.keys(e.subjectCopy),s=Object.keys(e.target),n=[],i=de(r.concat(s)).map((t=>{if(e.subjectCopy[t]!==e.target[t]){n.push(t);var i={name:t,related:n,buffered:!0};return s.includes(t)?(i.type="set",i.value=e.target[t],r.includes(t)&&(i.isUpdate=!0)):i.type="del",r.includes(t)&&(i.oldValue=e.subjectCopy[t]),u(e.subjectCopy[t])&&te(e.target,t,e.subjectCopy[t]),u(e.target[t])&&J(e.target,t,e.target[t]),i}})).filter((e=>e));if(i.length&&(t=U.getFirebase(e.target,!1)))return t.fire(i)}))};return s instanceof Promise?s.then(n):n(),s},build:Y,link:J,unlink:te,Observers:U,Interceptors:A};function ge(e){return Array.isArray(e)}function ye(e){return!Array.isArray(e)&&"object"==typeof e&&e}function ve(e){return e instanceof Number||"number"==typeof e}function be(e){return"function"==typeof e}function we(e){return be(e)||e&&"[object function]"==={}.toString.call(e)}function Oe(e){return ye(e)&&Object.getPrototypeOf(e)===Object.prototype}function xe(e){return Array.isArray(e)||"object"==typeof e&&e||be(e)}function Ee(e){return!0===e||!1===e}function je(e){return ve(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}function ke(e,t){var r=void 0;return xe(e)&&Object.keys(e).forEach(((s,n)=>{!1!==r&&(r=t(je(s)?parseFloat(s):s,e[s],n))})),r}const Se=function(e,t,r=!0,s=1){if(ge(e)&&ge(t)&&e.length!==t.length)return!r;if(ye(e)&&ye(t)){var n=Object.keys(e),i=Object.keys(t);if(!n.length&&!i.length)return Oe(e)&&Oe(t)?r:e===t===r;if(!Se(n,i))return!r}if(s>0&&(ge(e)&&ge(t)||ye(e)&&ye(t))){var a=function(e,t,r=!0,s=!0,n=!1,i=!1){if(ge(e)&&ge(t)){var a=[],o=!0;return e.forEach((e=>{if(o){var l=!1;ke(t,((t,n)=>{(!l||s&&xe(e))&&((ge(l=r(e,n))&&!l.length||ye(l)&&!Object.keys(l).length)&&(l=!1),xe(l)&&s&&(e=l))})),xe(l)?a.push(s?l:e):Ee(l)?n&&!l||!n&&l?a.push(e):i&&(o=!1):a.push(l)}})),a}if(ye(e)&&ye(t))return a={},o=!0,Object.keys(e).forEach((l=>{if(o){var c=r(e[l],t[l]);(ge(c)&&!c.length||ye(c)&&!Object.keys(c).length)&&(c=!1),xe(c)?a[l]=s?c:e[l]:Ee(c)?n&&!c||!n&&c?a[l]=e[l]:i&&(o=!1):a[l]=c}})),a}(e,t,((e,t)=>Se(e,t,r,s-1)),!1,!1,!0);return ge(a)?a.length===e.length&&a.length===t.length:ye(a)&&ye(e)?Object.keys(a).length===Object.keys(e).length&&Object.keys(a).length===Object.keys(t).length:a}return we(r)?r(e,t):ve(e)&&ve(t)&&isNaN(e)&&isNaN(t)?r:e===t===r},Ce=Se,Pe=class{even(e){return!(!ye(e)||e.jsenType!==this.jsenType)&&Ce(e,this)}inherit(e){return this}withComments(e){return this.meta||(this.meta={}),this.meta.comments=e,this}withVars(e){return this.meta||(this.meta={}),this.meta.vars=e,this}},_e=class extends Pe{};Object.defineProperty(_e.prototype,"jsenType",{get:()=>"Reference"});const $e=_e,Te=class extends Pe{};Object.defineProperty(Te.prototype,"jsenType",{get:()=>"CallExpression"});const Ae=Te,De=class extends Pe{},Me=class extends Pe{};Object.defineProperty(Me.prototype,"jsenType",{get:()=>"IfConstruct"});const Re=Me,We=class extends Error{constructor(...e){super(...e),this.name="Syntax Error"}},Fe={};class Ie{static parse(e,t,r={}){if(e.length){var s;if(Fe[e]&&!t&&!1!==r.allowCache&&(s=this.parseOne(e,Fe[e],r)))return s;for(var n=Object.values(t||this.grammar),i=0;i<n.length;i++){var a=this.parseOne(e,n[i],r);if(a)return t||!1===r.allowCache||(Fe[e]=n[i]),a}if(!1===r.assert)return;throw new We(e)}}static parseOne(e,t,r={}){var s={reads:[],writes:[],deletes:[],calls:[],_calls:[],deep:{}},n=t.parse(e,((e,t,n=null)=>{var i=this.parse(e,t,n||r);if(i instanceof $e){for(var a,o=i;o=o.context;)o instanceof Ae&&(a=!0);if(i.role=n.role,!a&&"CONTEXT"!==n.role){var l="ASSIGNMENT_SPECIFIER"===n.role?"writes":"DELETION_SPECIFIER"===n.role?"deletes":"CALL_SPECIFIER"===n.role?"_calls":"reads";s[l].push(i)}}else i instanceof Ae&&s.calls.push(i);return i&&(Object.keys(i.meta).forEach((e=>{"deep"!==e&&i.meta[e].forEach((t=>s[e].push(t)))})),Object.keys(i.meta.deep).forEach((e=>{s.deep[e]||(s.deep[e]=[]),i.meta.deep[e].forEach((t=>s.deep[e].push(t)))}))),i}),r);return n&&(n.meta=n instanceof De?{reads:[],writes:[],deletes:[],calls:[],_calls:[],deep:{}}:s,n instanceof Ae?!n.reference.context||n.reference.context instanceof Ae||n.meta.reads.push(n.reference.context):n instanceof Re&&["onTrue","onFalse"].forEach((e=>{n[e]&&Object.keys({reads:[],writes:[],deletes:[],calls:[],_calls:[],deep:{}}).forEach((e=>{"deep"!==e&&n.onTrue.meta[e].concat(n.onTrue.meta.deep[e]||[]).forEach((t=>{!function(e,t,r=!1){for(var s=e.indexOf(t);s>-1&&(r||!1===r);)e.splice(s,1),r>0&&r--,s=e.indexOf(t)}(n.meta[e],t),n.meta.deep[e]||(n.meta.deep[e]=[]),n.meta.deep[e].push(t)}))}))})),ge(r.explain)&&r.explain.push(e+" >>-------------\x3e> "+n.jsenType)),n}}function Le(e,t,r){return e.startsWith(t)&&e.endsWith(r)}function Ne(e,t,r=!1){if(""==t)return e;var s=r?e.lastIndexOf(t):e.indexOf(t);return-1===s?"":e.substr(s+t.length)}function qe(e,t,r){return function(e,t){return function(e,t,r=!1){if(""==t)return e;var s=r?e.lastIndexOf(t):e.indexOf(t);return-1===s?e:e.substr(0,s)}(e,t,!0)}(Ne(e,t),r)}function Be(e){return e instanceof String||"string"==typeof e&&null!==e}function Qe(e){return arguments.length&&(void 0===e||void 0===e)}function Ve(e){return null===e||""===e}function Ue(e,t=!0){return ge(e)?e:!t&&ye(e)?[e]:!1!==e&&0!==e&&function(e){return Ve(e)||Qe(e)||!1===e||0===e||xe(e)&&!Object.keys(e).length}(e)?[]:function(e){return!Be(e)&&!Qe(e.length)}(e)?Array.prototype.slice.call(e):ye(e)?Object.values(e):[e]}const He=function(e,t=1,r=!0){return!je(t)||t<=0?e:(!ge(e)&&ye(e)&&r&&(e=Object.values(e)),ge(e)?e.reduce(((e,s)=>ge(s)||ye(s)&&r?e.concat(He(ge(s)?s:Object.values(s),t-1,r)):e.concat(s)),[]):e)},ze=He;function Ke(e,t=1){var r=0;e.forEach((e=>{r++}));var s=e.slice(e.length-r,t);return arguments.length>1?s:s[0]}function Ge(e,t=1){return arguments.length>1?Ke(e.slice().reverse(),t).reverse():Ke(e.slice().reverse())}function Je(e,t,r=!1,s=!1,n=!1){var i=0,a=e.shift();if((je(a)||!0===a||!1===a)&&(i=a,a=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach(((e,o)=>{var l,c,h;(xe(e)||we(e))&&(r?(l=e,h=[],function(e,t){t=(t=t||Object.prototype)&&!ge(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(l,c).forEach((e=>{!function(e,...t){t.forEach((t=>{e.indexOf(t)<0&&e.push(t)}))}(h,...Object.getOwnPropertyNames(e))})),h):Object.getOwnPropertyNames(e)).forEach((l=>{if(t(l,a,e,o)){var c=a[l],h=e[l];if((ge(c)&&ge(h)||ye(c)&&ye(h))&&(!0===i||i>0))a[l]=ge(c)&&ge(h)?[]:{},Je([je(i)?i-1:i,a[l],c,h],t,r,s,n);else if(ge(a)&&ge(e))s?a[l]=h:a.push(h);else try{n?Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e,l)):a[l]=e[l]}catch(e){}}}))})),a}function Xe(...e){return Je(e,((e,t,r)=>!0),!1,!1,!1)}function Ye(e,t=[]){return Je([{},e],((e,r,s)=>{if(!we(s[e]))return we(t)?t(e):!ge(t)||!t.length||t.indexOf(e)>-1}),!1,!1,!1)}class Ze{static lex(e,t,r={}){if(!Be(e+=""))throw new Error("Argument1 must be a string!");var s=e=>({delims:e.delims.slice(),options:Ye(e.options),nesting:e.nesting.slice(),maxDepth:e.maxDepth,comments:e.comments.slice(),tokens:e.tokens.slice(),matches:e.matches.slice(),matchesi:Ye(e.matchesi)});if(Ze.$cache[e]&&!1!==r.cache)for(var n=0;n<Ze.$cache[e].length;n++){var i=Ze.$cache[e][n];if(Ce(i.delims,t))return s(i)}var a=new Ze(e,r).lex(t);return!1!==r.cache&&(Ze.$cache[e]=Ze.$cache[e]||[],Ze.$cache[e].push(a)),s(a)}static split(e,t,r){return Ze.lex(e,t,r).tokens}static match(e,t,r){return Ze.lex(e,t,r).matches}constructor(e,t){if(!Be(e))throw new Error("Lexer requires the first argument to be a string.");this.$str=e,this.$options=t||{},this.$options.blocks||(this.$options.blocks=Ze.$blocks),this.$options.quotes||(this.$options.quotes=Ze.$quotes),this.$options.comments||(this.$options.comments=Ze.$comments)}lex(e,t){for(var r={delims:Ue(e),options:Xe(!0,{},this.$options,t||{}),nesting:[],maxDepth:0,comments:[],tokens:[],matches:[],matchesi:{}},s=0;"number"==typeof s;)s=this._evalCharsAt(r,s);if(r.nesting.length)throw new Error("Error parsing the string: "+this.$str+". Unterminated blocks: "+ze(r.nesting).join(", "));return r}_evalCharsAt(e,t){if(!(t>=this.$str.length)){var r=1,s={},n={},i={};if(e.openComment||(n=this._testQuotes(e,t)),e.openQuote||(s=this._testComments(e,t)),e.openComment||s.ending)e.nesting.length||i.ending?this._push(e,this.$str[t]):(r=(o=s.starting||s.ending||this.$str[t]).length,this._push(e,o,"comments",s.starting));else if(e.openQuote||n.ending)this._push(e,this.$str[t]);else{if(e.options.limit&&e.matches.length===e.options.limit)return this._push(e,this.$str[t]),t+1;i=this._testNesting(e,t),i=this._testNesting(e,t);var a=this._testChars(e.options.stopChars||[],e,t);if(!e.nesting.length&&!1!==a)return e.options.stopChar=a,void(e.options.stopCharForward=this.$str.substr(t));if(e.delims.length)if(e.nesting.length||i.ending){var o;r=(o=i.starting||i.ending||this.$str[t]).length,this._push(e,o)}else{this._push(e,"");var l=this._testChars(e.delims,e,t);if(!1!==l&&(e.matches.push(l),e.matchesi[t]=l,r=l.length||1,!e.options.preserveDelims)){var c=t+(l.length||1);return c===this.$str.length&&this._push(e,""),c}this._push(e,l||this.$str[t])}else 2===e.nesting.length&&i.starting?(e.matches.push(null),this._push(e,i.starting),r=i.starting.length):!e.nesting.length&&i.ending?(this._push(e,i.ending),r=i.ending.length,e.matches.push(null)):this._push(e,this.$str[t])}return t+r}}_testQuotes(e,t){var r={};return(e.options.quotes||[]).forEach((s=>{this.$str.substr(t,1)===s&&(e.openQuote?s===e.openQuote&&(e.openQuote=!1,r.ending=s):(e.openQuote=s,r.starting=s))})),r}_testComments(e,t){var r={};return(e.options.comments||[]).forEach((s=>{if(e.openComment){if(Ge(s)===Ge(e.openComment)){var n=Ge(s);this.$str.substr(t).startsWith(n)&&(e.openComment=!1,r.ending=n)}}else{var i=Ke(s);this.$str.substr(t).startsWith(i)&&(e.openComment=s,r.starting=i)}})),r}_testNesting(e,t){var r={};return(e.options.blocks||[]).forEach((s=>{var n=Ke(s);if(this.$str.substr(t).startsWith(n))e.nesting=e.nesting.concat([s]),r.starting=n;else if(e.nesting.length&&Ge(s)===Ge(Ge(e.nesting))){var i=Ge(s);this.$str.substr(t).startsWith(i)&&(e.nesting=e.nesting.slice(0,-1),r.ending=i)}})),e.maxDepth=Math.max(e.maxDepth,e.nesting.length),r}_testChars(e,t,r){for(var s=0;s<e.length;s++){var n=e[s];if(we(n)){var i=n(this.$str.substr(0,r),this.$str.substr(r),t.tokens.slice());if(!1!==i)return i}if(t.options.useRegex){var a=this.$str.substr(r).match(new RegExp("^"+n,!0!==t.options.useRegex?t.options.useRegex:""));if(a)return a[0]}if(!t.options.ci&&this.$str.substr(r,n.length)===n||t.options.ci&&this.$str.substr(r,n.length).toLowerCase()===n.toLowerCase())return n}return!1}_push(e,t,r="tokens",s=!1){var n=e.matches.length;if(Qe(e.tokens[n])&&(e.tokens[n]=""),"comments"===r){e.tokens[n].comments||(e.tokens[n]=new String(e.tokens[n]),e.tokens[n].comments=[]);var i=e.tokens[n].comments.length-(!e.tokens[n].comments.length||s?0:1);e.tokens[n].comments[i]=(e.tokens[n].comments[i]||"")+t}else e.tokens[n].comments,e.tokens[n]=e.tokens[n]+t}split(e,t,r){return this.lex(t,r).tokens}match(e,t,r){return this.lex(t,r).matches}regParse(e,t){return this.lex(e,Xe({useRegex:!0},t||{}))}regSplit(e,t){return this.regParse(e,t).tokens}regMatch(e,t){return this.regParse(e,t).matches}}Ze.$blocks=[["(",")"],["[","]"],["{","}"]],Ze.$quotes=['"',"'","`"],Ze.$comments=[["/*","*/"],["//","\n"]],Ze.$cache=Object.create(null);const et=class extends Pe{};Object.defineProperty(et.prototype,"jsenType",{get:()=>"Abstraction"});const tt=et;function rt(e,t,r=null,s=!1){var n=function(e,t,r=null,s=!1){return t.length>e.length?-1:("number"==typeof r?s?e.slice(0,r+1+(r<0?e.length:0)):e.slice(r):e).reduce(((e,r,n)=>{var[i,a,o]=e;if(!s&&i>-1)return[i,a,o];var l=o+1,c=r===t[l]?0===l?[n,0]:[a,l]:[-1,-1];return c[1]===t.length-1&&(c[1]=-1,c[0]>-1)?[c[0]].concat(c):[i].concat(c)}),[-1,-1,-1])[0]+(s||"number"!=typeof r?0:r>-1?r:e.length-r)}(e,t,r,s);return-1===n?[]:e.slice(n+t.length)}function st(e,t,r=null){return r||!1!==r&&e.dotSafe&&t.dotSafe?(e.join(".")+".").startsWith(t.join(".")+"."):t.reduce(((t,r,s)=>t&&r===e[s]),!0)}const nt=class extends Pe{};Object.defineProperty(nt.prototype,"jsenType",{get:()=>"Block"});const it=nt,at=class extends Pe{};Object.defineProperty(at.prototype,"jsenType",{get:()=>"ReturnDirective"});const ot=at,lt=class extends Pe{};Object.defineProperty(lt.prototype,"jsenType",{get:()=>"AssignmentExpression"});const ct=lt,ht=class extends Pe{};Object.defineProperty(ht.prototype,"jsenType",{get:()=>"DeleteExpression"});const ut=ht,pt=class extends Pe{};Object.defineProperty(pt.prototype,"jsenType",{get:()=>"VariableDeclarations"});const ft=pt,dt=class extends Pe{};Object.defineProperty(dt.prototype,"jsenType",{get:()=>"NumberType"});const mt=dt,gt=class extends Pe{};Object.defineProperty(gt.prototype,"jsenType",{get:()=>"StringType"});const yt=gt;function vt(e){return e.map((e=>{var t=e,r=[];r.dotSafe=!0;do{t instanceof Ae&&(r.splice(0),t=t.reference),Be(t.name)?(r.unshift(t.name),r.dotSafe=r.dotSafe&&!t.name.includes(".")):t.name instanceof mt?(r.unshift(t.name.int),r.dotSafe=r.dotSafe&&!(t.name.int+"").includes(".")):t.name instanceof yt?(r.unshift(t.name.expr),r.dotSafe=r.dotSafe&&!t.name.expr.includes(".")):r.splice(0)}while(t=t.context);return r.dotSafe?(new bt).concat(r):r}))}class bt extends Array{static resolve(e){return e.every((e=>!(e+"").includes(".")))?(new bt).concat(e):e}get dotSafe(){return!0}}function wt(e){return e.filter(((e,t,r)=>r.indexOf(e)===t))}const Ot=class extends Error{constructor(...e){super(...e),this.name="Reference Error"}};class xt{constructor(e,t={}){if(!("main"in e))throw new Error('A "main" context must be provided!');Object.defineProperty(this,"stack",{value:e||{},enumerable:!1}),Object.defineProperty(this,"params",{value:t||{},enumerable:!1}),e.super&&Object.defineProperty(this.stack,"super",{value:xt.create(e.super,{errorLevel:t.errorLevel}),enumerable:!1}),Object.defineProperty(this.stack,"local",{value:e.local||{},enumerable:!1}),Object.defineProperty(this.stack,"$local",{value:e.$local||{},enumerable:!1})}observe(e,t,r={}){this.stack.super&&this.stack.super.observe(e,(r=>{if(r.props.filter((t=>!jt(this.stack.local,t,e)&&!jt(this.stack.main,t,e))).length)return r.scope="super",t(r)}),r);var s={...r};s.subtree=s.subtree||!0,s.tags=(s.tags||[]).slice(0),s.tags.push(this,"jsen-context"),s.diff=!0,e.observe(this.stack,(r=>{var s=[];if(r.forEach((e=>{if("main"===e.name)if(e.path.length>1)s.push(bt.resolve(e.path.slice(1)));else{var t=wt((xe(e.value)?Object.keys(e.value):[]).concat(e.oldValue&&xe(e.oldValue)?Object.keys(e.oldValue):[]));s.push(...t.map((e=>bt.resolve([e]))))}})),(s=s.filter((t=>!jt(this.stack.local,t[0],e)))).length){var n=s.map((e=>e[0]));return t({props:n,references:s,scope:"local"})}}),s)}unobserve(e,t={}){this.stack.super&&this.stack.super.unobserve(e,t);var r={...t};r.tags=(r.tags||[]).slice(0),r.tags.push(this,"jsen-context"),e.unobserve(this.stack,null,null,r)}handle(e,t,r,s=0){var n=()=>t(this.stack.main,null,(()=>this.stack.super?this.stack.super.handle(e,t,r,s+1):r?r():void 0),s);return"toString"===e&&this.stack.local.toString===Object.prototype.toString?n():t(this.stack.local,this.stack.$local,n,s)}get(e,t={},r=!0){return e instanceof String&&(e+=""),this.handle(e,((s,n,i,a)=>{var o=Et(s,e,t);return!Qe(o)||jt(s,e,t)?we(o)&&!function(e){return be(e)&&/^class\s?/.test(Function.prototype.toString.call(e))}(o)&&r?o.bind(s):o:i()}))}set(e,t,r={},s=!1,n=!0){if(2===this.params.scopeType&&"var"===s&&this.stack.super)return this.stack.super.set(e,t,r,s);e instanceof String&&(e+="");const i=(e,t,r,s)=>s.set?s.set(e,t,r):(e[t]=r,!0);return this.handle(!!s||e,((a,o,l,c)=>{if(o&&"const"===o[e])throw new LogicalError("CONST "+e+" cannot be modified!");if(s)return o[e]=s,i(a,e,t,r);if(jt(a,e,r))return i(a,e,t,r);try{return l()}catch(s){if(s instanceof Ot&&a&&(!n||!1===this.params.strictMode)&&!o&&0===c)return i(a,e,t,r);throw s}}),(()=>{throw new Ot('"'+e+'" does not exist in scope!')}))}del(e,t={}){return e instanceof String&&(e+=""),this.handle(e,((r,s,n)=>jt(r,e,t)?(s&&delete s[e],t.deleteProperty||t.del?(t.deleteProperty||t.del)(r,e):(delete r[e],!0)):n()))}has(e,t,r={}){return e instanceof String&&(e+=""),t instanceof String&&(t+=""),this.handle(e,((s,n,i)=>{if(jt(s,e,r)){var a=Et(s,e,r);return jt(a,t,r)}return i()}),(()=>{throw new Ot('"'+e+'" is undefined!')}))}exec(e,t,r={}){return e instanceof String&&(e+=""),this.handle(e,((s,n,i)=>{var a=Et(s,e,r);if(!Qe(a)||jt(s,e,r)){if(!we(a)){if(r.exec)return r.exec(s,e,t);throw new Ot('"'+e+'" is not a function! (Called on type: '+typeof s+".)")}return r.apply?r.apply(a,s,t):a.apply(s,t)}return i()}),(()=>{if(r.execUnknown)return r.execUnknown(this,e,t);throw new Ot('"'+e+'()" is undefined!')}))}static create(e,t={},r={}){if(e instanceof xt)return e;var s=t.scopeObj||{};return r.set?r.set(s,"main",e):s.main=e,new xt(s,t)}static createStack(e,t={},r={}){return e.reverse().reduce(((e,s,n)=>{if(s instanceof xt){if(0===n)return s;throw new Error("Only the top-most context is allowed to be an instance of Scope.")}var i={};return r.set?r.set(i,"main",s):i.main=s,i.super=e,new xt(i,t)}),null)}}const Et=(e,t,r)=>{if(!Ve(e)&&!Qe(e))return r.get&&xe(e)?r.get(e,t):e[t]},jt=(e,t,r)=>!Ve(e)&&!Qe(e)&&(r.has&&xe(e)?r.has(e,t):xe(e)?t in e:!Qe(e[t]));class kt extends it{constructor(e,t){super(),this.stmts=e||[],this.delims=t}eval(e=null,t={}){var r,s=(t={...t}).returnCallback;t.returnCallback=e=>{r=e},e=xt.create(e,t);for(var n=(e,t,r)=>{try{return e.eval(t,r)}catch(e){r.catch&&r.catch(e)}},i=[],a=0;a<this.stmts.length;a++){var o=this.stmts[a],l=St(o),c=St(o,!0),h=(t.references||[]).filter((e=>l.filter((t=>st(t,e))).length)),u=(t.references||[]).filter((e=>c.filter((t=>st(t,e))).length)),p=!t.references||!t.references.length||(h=h.length)||(u=u.length),f=(t.references&&2===e.params.scopeType&&o instanceof ct&&o.initKeyword,[]);if(p){var d=t;if(h&&delete(d={...t}).references,i[a]=n(o,e,d),o instanceof ot||r)return s&&s(!0),i[a];(o instanceof Re&&o.abortive||!1===r)&&s&&s(!1),t.references&&((o instanceof ct||o instanceof ut)&&(f=[o])||o instanceof ft&&(f=o.declarations))&&(t.references=t.references.concat(vt(f.map((e=>e.reference)))))}else t.references&&(o instanceof ct&&(f=[o])||o instanceof ft&&(f=o.declarations))&&f.forEach((e=>{if(e.val instanceof $e){t.references=t.references.slice(0);let r=vt([e.reference])[0],s=vt([e.val])[0];t.references.forEach((e=>{st(e,s)&&t.references.push(r.concat(rt(e,s)))}))}}))}return","===this.delims[this.delims.length-1]?i.pop():i}toString(){return this.stringify()}stringify(e={}){return this.stmts.map(((t,r)=>t.stringify(e)+(this.delims[r]||""))).join(" ")}static parse(e,t,r={}){var s;if(","===r.delim?(delete(r={...r}).delim,s=Ze.lex(e,[","])):s=Ze.lex(e+";",[kt.testBlockEnd]),s.matches.length){var n=[],i=[];return s.tokens.forEach(((e,t)=>{(e=e.trim())&&(n.push(e),i.push(s.matches[t]))})),i.pop(),new this(n.map((e=>t(e,null,r))),i)}}static parseSingleOrMultiple(e,t,r={}){var s=t(e,[this],{...r,delim:",",assert:!1});return s?1===s.stmts.length&&(s=s.stmts[0]):s=t(e,null,r),s}static testBlockEnd(e,t,r){if(e.endsWith("}")&&!t.trim().startsWith("else"))return"";if(t.startsWith("\r\n"))return"\r\n";if(t.startsWith(";"))return";";if(t.startsWith(",")){var s=r.length&&r[r.length-1];return!(s.startsWith("var")||s.startsWith("let")||s.startsWith("const")||s.startsWith("return"))&&","}return!1}}kt.operators=[];const St=(e,t=!1)=>(e.$readPaths||(e.$readPaths=vt(e.meta.reads||[]),e.$deepReadPaths=vt(e.meta.deep.reads||[])),t?e.$deepReadPaths:e.$readPaths),Ct=class extends Pe{};Object.defineProperty(Ct.prototype,"jsenType",{get:()=>"ArrayType"});const Pt=Ct,_t=class extends Pe{};Object.defineProperty(_t.prototype,"jsenType",{get:()=>"AssertionExpression"});const $t=_t,Tt=class extends $t{constructor(e,t){super(),this.exprs=e,this.logic=t}eval(e=null,t={}){var r=this.constructor;if(this.logic.toLowerCase()===r.negation.toLowerCase())return!Ke(this.exprs).eval(e,t);ze(r.operators);for(var s=(this.logic||"").trim().toUpperCase(),n=s===(r.operators.or||"").trim().toUpperCase(),i=s===(r.operators.nor||"").trim().toUpperCase(),a=s===(r.operators.and||"").trim().toUpperCase(),o=s===(r.operators.nand||"").trim().toUpperCase(),l=!0,c=0,h=0;h<this.exprs.length;h++){if(l=this.exprs[h].eval(e,t),a&&!l)return!1;if(o&&!l)return!0;if(n&&l)return l;c+=l?1:0}return n?l:a||o?a:i&&0===c}toString(){return this.stringify()}stringify(e={}){var t=this.constructor;return this.logic.toLowerCase()===t.negation.toLowerCase()?this.logic+Ke(this.exprs).stringify(e):this.exprs.map((t=>t.stringify(e))).join(" "+this.logic.trim()+" ")}static parse(e,t,r={}){if(e.toUpperCase().startsWith(this.negation.toUpperCase()))return new this([t(e.substr(this.negation.length),null,r)],this.negation);var s=Ze.lex(e,ze(this.operators));if(s.tokens.length>1){var n=wt(s.matches);if(n.length>1)throw new Error('"AND" and "OR" logic cannot be asserted in the same expression: '+e+"!");return new this(s.tokens.map((e=>t(e.trim(),null,r))),Ke(n))}}};Tt.negation="!",Tt.operators={and:"&&",or:"||"};const At=Tt,Dt=class extends ct{constructor(e,t,r="=",s=!1){super(),this.reference=e,this.val=t,this.operator=r,this.incrDecrIsPost=s}eval(e=null,t={}){var r,s,n,i=this.reference.getEval(e,t);if(["++","--"].includes(this.operator)){if(!ve(n=this.reference.eval(e,t)))throw new Error(this.reference+" must be a number!");r="++"===this.operator?n+1:n-1}else if(["+=","-=","*=","/="].includes(this.operator)){var a=i.get(),o=this.val.eval(e,t);if(!("+="===this.operator||ve(a)&&ve(o)))throw new Error(this+" - operands must each be a number!");r="*="===this.operator?a*o:"/="===this.operator?a/o:"-="===this.operator?a-o:a+o}else s=t.initKeyword,r=this.val?this.val.eval(e,t):void 0;try{return i.set(r,s),t&&ge(t.references)&&_pushUnique(t.references,this.reference.toString()),this.incrDecrIsPost?n:r}catch(e){throw e instanceof Ot?new Ot("["+this+"]: "+e.message):e}}toString(){return this.stringify()}stringify(e={}){return["++","--"].includes(this.operator)?this.incrDecrIsPost?this.reference.stringify(e)+this.operator:this.operator+this.reference.stringify(e):[this.reference.stringify(e),this.operator.trim(),this.val?this.val.stringify(e):""].filter((e=>e)).join(" ")}static parse(e,t,r={}){e=e.trim();var s,n=Ze.lex(e,this.operators.concat([Mt]));if(r.isDeclaration&&(delete(r={...r}).isDeclaration,s=!0),n.matches.length||s){var i,a,o,l=(n.matches[0]||"").trim(),c=["++","--"].includes(l);if(c?(o=e.trim().endsWith("++")||e.trim().endsWith("--"),i=n.tokens[o?"shift":"pop"]().trim()):(i=n.tokens.shift().trim(),a=(n.tokens.shift()||"").trim()),!((i=t(i,null,{...r,role:"ASSIGNMENT_SPECIFIER"}))instanceof $e)||!c&&a&&!(a=t(a,null,r))&&!s)throw new We(e);return new this(i,a,l,o)}}};Dt.operators=["+=","-=","*=","/=","++","--"];const Mt=(e,t)=>!(e.endsWith("=")||!t.startsWith("=")||t.startsWith("=>")||t.startsWith("==")||t.startsWith("==="))&&"=",Rt=Dt,Wt=class extends Pe{};Object.defineProperty(Wt.prototype,"jsenType",{get:()=>"BooleanType"});const Ft=Wt,It=class extends Pe{};Object.defineProperty(It.prototype,"jsenType",{get:()=>"Arguments"});const Lt=It,Nt=class extends Lt{constructor(e=[]){super(),this.list=e}eval(e=null,t={}){return this.list.map((r=>r.eval(e,t)))}toString(){return this.stringify()}stringify(e={}){return"("+this.list.map((t=>t.stringify(e))).join(", ")+")"}static parse(e,t,r={}){if(Le(e=e.trim(),"(",")")&&!Ze.match(e,[" "]).length)return new this(Ze.split(qe(e,"(",")"),[","]).map((e=>t(e.trim(),null,r))))}},qt=class extends Pe{};Object.defineProperty(qt.prototype,"jsenType",{get:()=>"ComparisonExpression"});const Bt=qt;class Qt extends Bt{constructor(e,t,r){super(),this.operand1=e,this.operand2=t,this.operator=r}eval(e=null,t={}){return this.constructor.compare(this.operand1.eval(e,t),this.operand2.eval(e,t),this.operator)}toString(){return this.stringify()}stringify(e={}){return[this.operand1.stringify(e),this.operator,this.operand2.stringify(e)].join(" ")}static parse(e,t,r={}){var s=ze(this.operators),n=Ze.lex(e,s);if(n.tokens.length>1){if(n.tokens.length>2)throw new Error('Malformed "Comparison" expression: '+e+"!");return new this(t(Ke(n.tokens).trim(),null,r),t(Ge(n.tokens).trim(),null,r),n.matches[0].trim())}}static compare(e,t,r="=="){if(-1===ze(this.operators).indexOf(r))throw new Error('The operator "'+r+'" is not recognized.');switch(r){case"===":return e===t;case"==":case"=":return e==t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t;case"!=":return e!=t;case"<>":case"!==":return e!==t;case"^=":return Be(e)&&e.startsWith(t);case"$=":return Be(e)&&e.endsWith(t);case"*=":return!(!ge(t)&&!Be(t))&&e.indexOf(t)>-1;case"~=":return Be(e)&&Be(t)&&(" "+e+" ").indexOf(" "+t+" ")>-1;case">=<":if(!ge(t)||2!==t.length)throw new Error("A 'Between' comparison requires argument 2 to be an array of exactly 2 values.");return e>=t[0]&&e<=t[1];case"/**/":return t.match(new RegExp(e));default:return!1}}static diff(e,t,r){return!this.compare(e,t,r?"===":"==")}}Qt.operators={exact:{is:"===",isNull:"===",equalsTo:"==",strictlyNotEqualsTo:"!==",notEqualsTo:"!="},relative:{lesserThan:"<",greaterThan:">",lesserThanOrEqualsTo:"<=",greaterThanOrEqualsTo:">=",between:">=<"},partial:{startsWith:"^=",endsWith:"$=",contains:"*=",any:"~=",in:"~=",matches:"/**/"}};const Vt=class extends Pe{};Object.defineProperty(Vt.prototype,"jsenType",{get:()=>"TernaryConditional"});const Ut=Vt;class Ht extends Ut{constructor(e,t,r){super(),this.assertion=e,this.onTrue=t,this.onFalse=r}eval(e=null,t={}){return this.assertion.eval(e,t)?this.onTrue.eval(e,t):this.onFalse.eval(e,t)}toString(){return this.stringify()}stringify(e={}){return[this.assertion.stringify(e),this.constructor.operators[0],this.onTrue.stringify(e),this.constructor.operators[1],this.onFalse.stringify(e)].join(" ")}static parse(e,t,r={}){var s=Ze.split(e,this.operators);if(s.length>1){if(2===s.length)throw new Error("Malformed ternary expression: "+e+"!");return new this(t(s[0].trim(),null,r),t(s[1].trim(),null,r),t(s[2].trim(),null,r))}}}Ht.operators=["?",":"];const zt=class extends ut{constructor(e,t="delete"){super(),this.reference=e,this.operator=t}eval(e=null,t={}){try{return this.reference.getEval(e,t).del()}catch(e){throw e instanceof Ot?new Ot("["+this+"]: "+e.message):e}}toString(){return this.stringify()}stringify(e={}){return this.operator+" "+this.reference.stringify(e)}static parse(e,t,r={}){var s=Ze.lex(e,Object.values(this.operators));if(1===s.matches.length&&e.startsWith(s.matches[0]+" ")){var n;if(!((n=t(s.tokens.pop().trim(),null,{...r,role:"DELETION_SPECIFIER"}))instanceof $e))throw new We(e);return new this(n,s.matches[0].trim())}}};zt.operators={red:"reduce",del:"delete"};const Kt=zt,Gt=class extends De{};Object.defineProperty(Gt.prototype,"jsenType",{get:()=>"FunctionType"});const Jt=Gt,Xt=class extends Jt{constructor(e,t,r={}){super(),this.paramters=e||{},this.statements=t,this.statements.isIndependent=!0,this.arrowFunctionFormatting=r}inherit(e){if(e instanceof Jt){for(var t=Object.keys(e.paramters),r=Object.keys(this.paramters),s=0;s<Math.max(r.length,t.length);s++){var n=t[s],i=r[s];if(!i&&n)throw new Error("Parameter #"+s+" ("+n+") in parent function must be implemented.");if(i&&n){var a=e.paramters[n],o=this.paramters[i];if(o&&!a)throw new Error("Parameter #"+s+" ("+i+") must not have a default value as established in parent function.");if(o&&a&&o.jsenType!==a.jsenType)throw new Error("Default value for parameter #"+s+" ("+i+") must be of type "+a.jsenType+" as established in parent function.")}}this.sup=e}return this}eval(e=null,t={}){var r=this;return delete(t={...t}).returnCallback,function(...s){var n={};ke(Object.keys(r.paramters),((i,a)=>{var o=r.paramters[a];if(s.length-1<i&&!o)throw new Error('The parameter "'+a+'" is required.');n[a]=s.length>i?s[i]:r.paramters[a]?r.paramters[a].eval(e,t):null})),r.arrowFunctionFormatting||(n.this=this);var i=e instanceof xt?e.params.errorLevel:void 0,a={main:n,super:e,local:{},$local:{}};t.scopeObj&&(t.scopeObj.subscopes||(t.scopeObj.subscopes=[]),t.scopeObj.subscopes.push(a));var o=new xt(a,{errorLevel:i}),l=r.statements.eval(o,t);return!1===r.arrowFunctionFormatting.body?l[0]:l}}toString(){return this.stringify()}stringify(e={}){var t=[];if(ke(this.paramters,((r,s)=>{t.push(r+(s?"="+s.stringify(e):""))})),this.arrowFunctionFormatting){var r=!1===this.arrowFunctionFormatting.head||1===t.length&&-1===t[0].indexOf("="),s=!1===this.arrowFunctionFormatting.body;return(r?t[0]:"("+t.join(", ")+")")+" => "+(s?this.statements.stringify(e):"{"+this.statements.stringify(e)+"}")}return"function ("+t.join(", ")+") {"+this.statements.stringify(e)+"}"}static parse(e,t,r={}){var s;if((e=e.trim()).startsWith("function")&&(s=Ze.split(e,[]).slice(1).filter((e=>e.trim())))&&2===s.length)var n=!1,i=qe(s.shift().trim(),"(",")"),a=qe(s.shift().trim(),"{","}");else{if(e.startsWith("function")||!(s=Ze.split(e,["=>"]))||2!==s.length)return;i=s.shift().trim(),a=s.shift().trim(),n={},Le(i,"(",")")?i=qe(i,"(",")"):n.head=!1,Le(a,"{","}")?a=qe(a,"{","}"):n.body=!1}var o={};Ze.split(i,[","]).forEach((e=>{var s=e.split("=");s[1]?o[s[0].trim()]=t(s[1].trim(),null,{...r,meta:null}):o[e.trim()]=null}));var l=t(a,[kt],{assert:!1})||t(a,null,{...r,meta:null});return new this(o,"Block"===l.jsenType?l:new kt([l]),n)}};Xt.operators=["=>"];const Yt=Xt;function Zt(e,t,r=null){return ge(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1!==t.indexOf(e))):[]}const er=class extends Pe{};Object.defineProperty(er.prototype,"jsenType",{get:()=>"MathExpression"});const tr=er,rr=class extends tr{constructor(e,t){super(),this.val=e,this.exprs=t}eval(e=null,t={}){return this.exprs.reduce(((r,s)=>{var n=s.val.eval(e,t),i=s.operator.trim();if(!(je(r)&&je(n)||"+"===i))throw new Error("Invalid Math expression: "+this.toString()+"!");switch(i){case"+":return r+n;case"-":return r-n;case"*":return r*n;case"/":return r/n}}),this.val.eval(e,t))}toString(){return this.stringify()}stringify(e={}){return[this.val.stringify(e)].concat(this.exprs.map((t=>t.operator+" "+t.val.stringify(e)))).join(" ")}static parse(e,t,r={}){var s=Ze.lex(e,ze(this.operators));if(s.tokens.filter((e=>e)).length>1&&s.matches.length===s.tokens.length-1){var n=wt(s.matches);if(Zt(n,this.operators.sup).length&&Zt(n,this.operators.sub).length)throw new Error('"Addition/subtraction" and "multiplication/division" operators cannot be used in the same expression: '+e+"!");return new this(t(s.tokens.shift().trim(),null,r),s.tokens.map(((e,n)=>({operator:s.matches[n],val:t(e.trim(),null,r)}))))}}};rr.operators={sup:["*","/"],sub:["+","-"]};const sr=rr;new Map;const nr=class extends Pe{};Object.defineProperty(nr.prototype,"jsenType",{get:()=>"ObjectType"});const ir=nr,ar=class extends ir{constructor(e){super(),this.entries=e||new Map}inherit(e){return e instanceof ir&&Array.from(e.entries.keys()).forEach((t=>{this.entries.has(t)||this.entries.set(t,e.entries.get(t))})),this}eval(e=null,t={}){var r={};return Array.from(this.entries.keys()).forEach((s=>{var n=Be(s)?s:s.eval(e,t),i=this.entries.get(s);i=i?i.eval(e,t):n,r[n]=i})),r}toString(){return this.stringify()}stringify(e={}){var t=[];return Array.from(this.entries.keys()).forEach((r=>{var s=r,n=this.entries.get(r);Be(s)||(s=r.stringify(e),r instanceof yt||(s=`[${s}]`)),n&&!n.byShorthand?t.push(s+ar.operators.sub+" "+n.stringify(e)):t.push(s)})),"{ "+t.join(ar.operators.sup+" ")+" }"}static parse(e,t,r={}){if(Le(e,"{","}")&&!Ze.match(e.trim(),[" "]).length){var s=new Map;return ke(Ze.split(qe(e,"{","}"),[ar.operators.sup]).map((e=>e.trim())).filter((e=>e)),((e,n)=>{var i,a=Ze.split(n,[ar.operators.sub],{limit:1}),o=a.shift().trim();if(Le(o,'"','"')||Le(o,"'","'")||Le(o,"[","]")){if(Le(o,"[","]"))o=o.slice(1,-1);else if(!a.length)return;o=t(o,null,r)}if(a.length){if(!a[0])return;i=t(a[0].trim(),null,r)}else Be(o)&&((i=t(o,null,r)).byShorthand=!0);s.set(o,i)})),new this(s)}}};ar.operators={sup:",",sub:":"};const or=ar,lr=class extends Pe{};Object.defineProperty(lr.prototype,"jsenType",{get:()=>"PresenceOperator"});const cr=lr,hr=class extends cr{constructor(e,t,r="in"){super(),this.prop=e,this.reference=t,this.operator=r}eval(e=null,t={}){var r=this.prop.eval(e,t);try{return this.reference.getEval(e,t).has(r)}catch(e){throw e instanceof Ot?new Ot("["+this+"]: "+e.message):e}}toString(){return this.stringify()}stringify(e={}){return[this.prop.stringify(e),this.operator,this.reference.stringify(e)].join(" ")}static parse(e,t,r={}){var s=Ze.lex(e,this.operators);if(2===s.tokens.length){var n,i;if(!((n=t(s.tokens.shift().trim(),null,r))&&(i=t(s.tokens.shift().trim(),null,r))instanceof $e))throw new We(e);return new this(n,i,s.matches[0].trim())}}};hr.operators=[" in "];const ur=hr;class pr extends $e{constructor(e,t,r=!1){super(),this.context=e,this.name=t,this.backticks=r}getEval(e=null,t={}){var r=e,s=this.name;this.context&&(s instanceof Pe&&(s=s.eval(e,t)),r=this.context.eval(e,t));var n=!this.context;return{get:()=>xt.create(r,t).get(s,t.trap),del:()=>xt.create(r,t).del(s,t.trap),has:e=>xt.create(r,t).has(s,e,t.trap),set:(e,i=null)=>xt.create(r,t).set(s,e,t.trap,i,n),exec:e=>xt.create(r,t).exec(s,e,t.trap)}}eval(e=null,t={}){try{return this.getEval(e,t).get()}catch(e){throw e instanceof Ot?new Ot("["+this+"]: "+e.message):e}}toString(){return this.stringify()}stringify(e={}){var t=this.name;if(this.context){var r=this.context.stringify(e);t instanceof Pe?t="["+t.stringify(e)+"]":this.backticks&&(t="`"+t+"`")}else r=e.context,this.backticks&&(t="`"+t+"`");return(r||"")+(r&&!t.startsWith("[")?pr.separator:"")+t}static parse(e,t,r={}){if(!Ze.match(e.trim(),[" "]).length){var s,n,i=Ze.split(e,[]),a=i.pop(),o=Ze.split(a.trim(),[this.separator],{preserveDelims:!0});if(o.length>1&&(a=o.pop().substr(1),i=i.concat(o)),Le(a,"`","`")&&(a=qe(a,"`","`"),n=!0),i.length&&(s=t(i.join(""),null,{...r,role:"CONTEXT"})),Le(a,"[","]")){if(!s)throw new We(e);a=t(qe(a,"[","]"),null,r)}return new this(s,a,n)}}}pr.separator=".";const fr=class extends Pe{};Object.defineProperty(fr.prototype,"jsenType",{get:()=>"Void"});const dr=fr,mr={If:class extends Re{constructor(e,t,r,s={}){super(),this.assertion=e,this.onTrue=t,this.onFalse=r,this.params=s}eval(e=null,t={}){var r=e instanceof xt?e.params.errorLevel:void 0,s={main:{},super:e,local:{},$local:{}};t.scopeObj&&(t.scopeObj.subscopes||(t.scopeObj.subscopes=[]),t.scopeObj.subscopes.push(s));var n=new xt(s,{scopeType:2,errorLevel:r});return this.assertion.eval(e,t)?this.onTrue?this.onTrue.eval(n,t):void 0:this.onFalse?this.onFalse.eval(n,t):void 0}toString(){return this.stringify()}stringify(e={}){var t=this.onTrue&&this.params.onTrueIsBlock?"{"+this.onTrue.stringify(e)+"}":this.onTrue?this.onTrue.stringify(e):"",r=this.onFalse&&this.params.onFalseIsBlock?"{"+this.onFalse.stringify(e)+"}":this.onFalse?this.onFalse.stringify(e):"";return"if ("+this.assertion.stringify(e)+")"+t+(r?" else "+r:"")}static parse(e,t,r={}){var s;if((e=e.trim()).startsWith("if")&&(s=Ze.split(e,[],{limit:2}).slice(1).filter((e=>e.trim())))&&2===s.length){var n,i,a,o=t(qe(s.shift().trim(),"(",")").trim(),null,r),l=Ze.split(s.shift().trim(),["else"],{limit:1}),c=l.shift().trim(),h=(l.shift()||"").trim();Le(c,"{","}")&&(i=!0,c=qe(c,"{","}").trim()),c=t(c,[kt],{...r,assert:!1,meta:null})||t(c,null,{...r,meta:null}),h?(Le(h,"{","}")&&(a=!0,h=qe(h,"{","}").trim()),h=t(h,[kt],{...r,assert:!1,meta:null})||t(h,null,{...r,meta:null})):c&&(n=c.stmts.filter((e=>e instanceof ot)).length);const e=new this(o,c,h,{onTrueIsBlock:i,onFalseIsBlock:a});return e.abortive=n,e}}},Return:class extends ot{constructor(e){super(),this.expr=e}eval(e=null,t={}){return this.expr?this.expr.eval(e,t):void 0}toString(){return this.stringify()}stringify(e={}){return this.expr?"return "+this.expr.stringify(e):"return"}static parse(e,t,r={}){var s=e.toLowerCase();if(s.startsWith("return ")||"return"===s)return new this(kt.parseSingleOrMultiple(e.substr(6).trim(),t,r))}},Deletion:Kt,VariableDec:class extends ft{constructor(e,t){super(),this.initKeyword=e,this.declarations=t}eval(e=null,t={}){this.declarations.map((r=>r.eval(e,{...t,initKeyword:this.initKeyword})))}toString(){return this.stringify()}stringify(e={}){return this.initKeyword+" "+this.declarations.join(", ")}static parse(e,t,r={}){var s=(e=e.trim()).match(/^(var|let|const)/);if(s&&(s=s[0])){for(var n=[],i=Ze.split(Ne(e,s),[","]).map((e=>e.trim())),a=0;a<i.length;a++){var o=t(i[a],[Rt],{...r,isDeclaration:!0});if(o.operator&&"="!==o.operator||o.reference.context)return;n.push(o)}return new this(s,n)}}},Assignment:Rt,Presence:ur,Func:Yt,Abstraction:class extends tt{constructor(e){super(),this.expr=e}eval(e=null,t={}){return this.expr.eval(e,t)}toString(){return this.stringify()}stringify(e={}){return"("+this.expr.stringify(e)+")"}static parse(e,t,r={}){if(Le(e,"(",")")&&!Ze.match(e,[" "]).length&&2===Ze.split(e,[]).length)return new this(kt.parseSingleOrMultiple(qe(e,"(",")"),t,r))}},Condition:Ht,Assertion:At,Comparison:Qt,Math:sr,Arr:class extends Pt{constructor(e){super(),this.exprs=e||[]}inherit(e){if(e instanceof Pt){var t=e.exprs.filter((e=>this.exprs.reduce(((t,r)=>t&&!e.even(r)),!0)));this.exprs=t.concat(this.exprs)}return this}eval(e=null,t={}){return this.exprs.map((r=>r.eval(e,t)))}toString(){return this.stringify()}stringify(e={}){return"["+this.exprs.map((t=>t.stringify(e))).join(", ")+"]"}static parse(e,t,r={}){if(Le(e,"[","]")&&!Ze.match(e.trim(),[" "]).length)return new this(Ze.split(qe(e,"[","]"),[","]).map((e=>e.trim())).filter((e=>e)).map((e=>t(e,null,r))))}},Obj:or,Num:class extends mt{constructor(e,t=0){super(),this.int=e,this.dec=t}eval(){return parseFloat(this.int+(this.dec?"."+this.dec:null))}toString(){return this.stringify()}stringify(e={}){return this.int+(this.dec?"."+this.dec:null)}static parse(e,t,r={}){if(je(e))return e=e.split("."),new this(parseInt(e.shift()),parseInt(e.shift()))}},Str:class extends yt{constructor(e,t){super(),this.expr=e,this.quote=t}eval(){return this.expr}toString(){return this.stringify()}stringify(e={}){return this.quote+this.expr+this.quote}static parse(e,t,r={}){if((Le(e=e.trim(),'"','"')||Le(e,"'","'"))&&!Ze.match(e,[" "]).length){var s=Le(e,'"','"')?'"':"'";return new this(qe(e,s,s),s)}}},Bool:class extends Ft{constructor(e){super(),this.state=e}eval(){return"true"===this.state.toLowerCase().trim()}toString(){return this.stringify()}stringify(e={}){return this.state}static parse(e,t,r={}){if("true"===(e=e.toLowerCase().trim())||"false"===e)return new this(e)}},Void:class extends dr{constructor(e){super(),this.val=e}eval(){return"null"===this.val.toLowerCase().trim()?null:void 0}toString(){return this.stringify()}stringify(e={}){return this.val}static parse(e,t,r={}){if("null"===(e=e.toLowerCase().trim())||"undefined"===e)return new this(e)}},Call:class extends Ae{constructor(e,t){super(),this.reference=e,this.args=t}eval(e=null,t={}){try{var r=this.args.eval(e,t);return this.reference.getEval(e,t).exec(r)}catch(e){throw e instanceof Ot?new Ot("["+this+"]: "+e.message):e}}toString(){return this.stringify()}stringify(e={}){return this.reference.stringify(e)+this.args.stringify(e)}static parse(e,t,r={}){if(e.endsWith(")")&&!Ze.match(e,[" "]).length){var s,n=Ze.split(e,[]),i=n.pop();if(!((s=t(n.join(""),null,{...r,role:"CALL_SPECIFIER"}))instanceof $e&&(i=t(i,[Nt],r))))throw new We(e);return new this(s,i)}}},Reference:pr};class gr{static eval(e,...t){return e.eval(...t)}}function yr(e){return!Array.isArray(e)&&"object"==typeof e&&e}function vr(){if(!(yr(this)&&this.window||"undefined"!=typeof window))throw new Error("A window context is required.");const e=yr(this)&&this.window?this.window:window;if(e.WebQit||(e.WebQit={}),!e.WebQit.window){let t,r;Object.defineProperty(e.WebQit,"window",{get:()=>e}),Object.defineProperty(e.WebQit,"vendor",{value:{getName:()=>(t||(t=function(e){if(void 0!==e.InstallTrigger)return"firefox";if(/constructor/i.test(e.HTMLElement)||"[object SafariRemoteNotification]"===(!e.safari||void 0!==e.safari&&e.safari.pushNotification).toString())return"safari";var t=!(!e.chrome||!e.chrome.webstore&&!e.chrome.runtime),r=t&&-1!=e.navigator.userAgent.indexOf("Edg"),s=!!e.opr&&!!e.opr.addons||!!e.opera||e.navigator.userAgent.indexOf(" OPR/")>=0,n=!!e.document.documentMode,i=!n&&!!e.StyleMedia;return(t||s)&&e.CSS,i?"edge":n?"ie":s?"opera":r?"ie-chromium":t?"chrome":"unknown"}(e)),t),getPrefix:()=>(r||(r=function(e){var t=e.getComputedStyle(e.document.documentElement,""),r=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.Olink&&["","o"])[1];return{api:("WebKit|Moz|Ms|O".match(new RegExp("("+r+")","i"))||[])[1],prefix:r,css:"-"+r+"-"}}(e)),r)}})}return e.WebQit}Ie.grammar=mr;class br{constructor(e,t=!0){this.window=e,this.async=t,this.readCallbacks=[],this.writeCallbacks=[],this._run()}_run(){this.window.requestAnimationFrame((()=>{this.readCallbacks.forEach(((e,t)=>{e&&!e()&&(this.readCallbacks[t]=null)})),this.writeCallbacks.forEach(((e,t)=>{e&&!e()&&(this.writeCallbacks[t]=null)})),this._run()}))}onread(e,t=!1){if(t)return new Promise(((t,r)=>{!1===this.async?e(t,r):this.readCallbacks.push((()=>{e(t,r)}))}));!1===this.async?e():this.readCallbacks.push(e)}onwrite(e,t=!1){if(t)return new Promise(((t,r)=>{!1===this.async?e(t,r):this.writeCallbacks.push((()=>{e(t,r)}))}));!1===this.async?e():this.writeCallbacks.push(e)}cycle(e,t,r){this.onread((()=>{var s=e(r);if(s){var n=s=>{this.onwrite((()=>{var n=t(s,r);if(n){var i=r=>{this.cycle(e,t,r)};n instanceof Promise?n.then(i):i()}}))};s instanceof Promise?s.then(n):n()}}))}}function wr(e){return e instanceof String||"string"==typeof e&&null!==e}function Or(e){return Array.isArray(e)}function xr(e){return arguments.length&&(void 0===e||void 0===e)}function Er(e){return null===e||""===e}function jr(e){return"function"==typeof e}function kr(e){return Array.isArray(e)||"object"==typeof e&&e||jr(e)}function Sr(e,t=!0){return Or(e)?e:!t&&yr(e)?[e]:!1!==e&&0!==e&&function(e){return Er(e)||xr(e)||!1===e||0===e||kr(e)&&!Object.keys(e).length}(e)?[]:function(e){return!wr(e)&&!xr(e.length)}(e)?Array.prototype.slice.call(e):yr(e)?Object.values(e):[e]}function Cr(e){const t=vr.call(this);t.DOM.isDOMReady||"complete"===t.window.document.readyState?e(t.window):(t.window.domReadyCallbacks||(t.window.domReadyCallbacks=[],t.window.document.addEventListener("DOMContentLoaded",(()=>{t.DOM.isDOMReady=!0,t.window.domReadyCallbacks.splice(0).forEach((e=>e(t.window)))}),!1)),t.window.domReadyCallbacks.push(e))}class Pr{constructor(e){this.window=e}onAdded(e,t,r={}){return r.on="added",this.onPresenceChange(e,((e,r,s,n,i)=>{t(e,r,s,n,i)}),r)}onRemoved(e,t,r={}){return r.on="removed",this.onPresenceChange(e,((e,r,s,n,i)=>{t(e,r,s,n,i)}),r)}onPresent(e,t,r={}){Cr.call(this.window,(()=>{this.window.MutationObserver&&this.onAdded(e,((e,r)=>{e.forEach((e=>t(e,r)))}),r),wr(e)?Sr(this.window.document.querySelectorAll(e)).forEach((e=>t(e,1))):e.parentNode&&t(e,1)}))}onAbsent(e,t,r={}){Cr.call(this.window,(()=>{this.window.MutationObserver&&onRemoved(e,((e,r)=>{e.forEach((e=>t(e,r)))}),r),wr(e)?0===Sr(this.window.document.querySelectorAll(e)).length&&t(null,0):e.parentNode||t(e,0)}))}onPresenceChange(e,t,r={}){e=Sr(e,!1);var s=new Set,n=new Set,i=(i,a,o)=>{a&&"removed"===r.on||!a&&"added"===r.on||(i=((e,t)=>(t.$$searchCache||(t.$$searchCache=new Map),e.reduce(((e,s)=>{var n;return t.$$searchCache.has(s)?n=t.$$searchCache.get(s):(n=((e,t)=>{if(t=t.filter((e=>e.matches)),wr(e)){var s=t.filter((t=>t.matches(e)));if(!1!==r.observeIndirectMutation&&(s=t.reduce(((t,r)=>t.concat(Sr(r.querySelectorAll(e)))),s)).length)return s}else{if(t.includes(e))return[e];if(!1!==r.observeIndirectMutation&&t.length)for(var n=e;n=n.parentNode;)if(t.includes(n))return[e]}})(s,t,wr(s))||[],t.$$searchCache.set(s,n)),e.concat(n)}),[])))(e,i)).length&&(r.maintainCallState?(i.forEach((e=>{a?(s.add(e),n.delete(e)):(s.delete(e),n.add(e))})),t(i,a,o,s,n)):t(i,a,o))},a=r.context||this.window.document.documentElement;return this._observe(a,((e,t,s,n)=>{r.ignoreTransients||(i(e,0,!0),i(e.concat(t),1,!0),i(t,0,!0)),i(n,0),i(s,1)}))}onAttrChange(e,t,r=[]){var s=new this.window.MutationObserver(t),n={attributes:!0,attributeOldValue:!0};return r&&(n.attributeFilter=r),s.observe(e,n),s}onTreeChange(e,t,r=!1){var s=new this.window.MutationObserver(t),n={childList:!0,subtree:r};return s.observe(e,n),s}onMutation(e,t,r){var s=new this.window.MutationObserver(t);return s.observe(e,r),s}_observe(e,t){if(!_r.has(e)){const t=new Set,r=new this.window.MutationObserver((e=>{if(t.size){var r=e.reduce(((e,t)=>e.concat(Sr(t.addedNodes))),[]),s=e.reduce(((e,t)=>e.concat(Sr(t.removedNodes))),[]),n=[],i=[];r=new Set(r),s=new Set(s),r.forEach((e=>{s.has(e)&&(s.delete(e),r.delete(e),e.isConnected?n.push(e):i.push(e))})),r=[...r],s=[...s],t.forEach((e=>e(n,i,r,s)))}}));r.observe(e,{childList:!0,subtree:!0}),_r.set(e,{callbacks:t,observer:r})}const r=_r.get(e);return r.callbacks.add(t),{disconnect(){r.callbacks.delete(t)},reconnect(){r.callbacks.add(t)}}}}const _r=new Map;function $r(e,t=null,r=!1){const s=vr.call(this);if(wr(e)){var n;if(e.trim().startsWith("<")){var i=s.window.document.createElement("div");i.innerHTML=e,n=r?Sr(i.children):i.firstChild}else n=r?Sr(Dr.call(this,e,t)):Ar.call(this,e,t);return n}return e instanceof s.window.Element?r?[e]:e:r?Sr(e):e}function Tr(e,t=null){return $r.call(this,e,t,!0)}function Ar(e,t=null,r=!1){const s=vr.call(this);t=t||s.window.document;var n,i=r?"querySelectorAll":"querySelector";try{n=t[i](e)}catch(r){try{n=t[i](e.replace(/\:is\(/g,":matches("))}catch(r){try{n=t[i](e.replace(/\:is\(/g,":-webkit-any("))}catch(r){try{n=t[i](e.replace(/\:is\(/g,":-moz-any("))}catch(e){throw e}}}}return n}function Dr(e,t=null){return Ar.call(this,e,t,!0)}function Mr(e){return function(e){return e instanceof Number||"number"==typeof e}(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}function Rr(e){return jr(e)||e&&"[object function]"==={}.toString.call(e)}function Wr(e,t,r={},s={}){t=Sr(t).slice();for(var n=e;!xr(n)&&!Er(n)&&t.length;){var i=t.shift();if(!(r.get?r.get(n,i):kr(n)?i in n:n[i]))return void(s.exists=!1);n=r.get?r.get(n,i):n[i]}return s.exists=!0,n}function Fr(e,t,r,s={},n={}){const i=(e,r,s)=>n.set?n.set(e,r,s):(Mr(t[o])&&Or(e)?e.push(s):e[r]=s,!0);t=Sr(t);for(var a=e,o=0;o<t.length;o++){if(!(o<t.length-1))return i(a,t[o],r);if(!a||!kr(a)&&!Rr(a))return!1;var l=Wr(a,t[o],n);if(!kr(l)){if(!1===n.buildTree)return!1;if(l=Rr(n.buildTree)?n.buildTree(o):Mr(t[o+1])?[]:{},!i(a,t[o],l))return!1}a=l}}function Ir(e,t,r=!1,s={}){t=Sr(t);var n=!1;do{var i=""===(i=t.pop())?0:i,a=e;t.length&&(a=Wr(e,t,{},s)),(kr(a)||Rr(a))&&(s.has?s.has(a,i):i in a)&&(s.deleteProperty?n=s.deleteProperty(a,i):s.del?n=s.del(a,i):(delete a[i],n=!0))}while(n&&r&&t.length&&(kr(a)||Rr(a))&&!(s.keys?s.keys(a):Object.keys(a)).length);return n}function Lr(e,t,r={}){var s={};return Wr(e,t,r,s),s.exists}function Nr(e,t=!1){const r=vr.call(this);var s={};return!(s.el=r.window.document.head.querySelector('meta[name="oohtml"]'))&&t&&(s.el=r.window.document.createElement("meta"),s.el.setAttribute("name",e),r.window.document.head.append(s.el)),s.el&&(s.vars=(s.el.getAttribute("content")||"").split(";").filter((e=>e)).reduce(((e,t)=>{var r=t.split("=").map((e=>e.trim()));return Fr(e,r[0].split("."),"true"===r[1]||"false"!==r[1]&&(Mr(r[1])?parseInt(r[1]):r[1])),e}),{})),s.get=function(e){return Wr(this.vars,e.split("."))},s.set=function(e,r=null,s=!1){var n=yr(e)?e:{[e]:!0===r?"true":r};if(s=arguments.length<3?r:s,Object.keys(n).forEach((e=>{if(!1===n[e])Ir(this.vars,e.split("."));else if(yr(n[e]))Object.keys(n[e]).forEach((t=>{var r=(e+"."+t).split(".");s&&Lr(this.vars,r)||Fr(this.vars,r,n[e][t])}));else{var t=e.split(".");s&&Lr(this.vars,t)||Fr(this.vars,t,n[e])}})),t){const e=(t,r)=>Object.keys(r).reduce(((s,n)=>{var i=(t?t+".":"")+n;return yr(r[n])?s.push(...e(i,r[n])):s.push(i+"="+r[n]),s}),[]);this.el.setAttribute("content",e("",this.vars).join(";"))}return!0},s.defaults=function(e,t=null){return this.set(e,t,!0)},s}function qr(){const e=vr.call(this);return e.DOM||(e.DOM={},function(e){!function(e){e.CSS||(e.CSS={}),e.CSS.escape||(e.CSS.escape=e=>e.replace(/([\:@\~\$\&])/g,"\\$1"))}(e),function(e){"isConnected"in e.Node.prototype||Object.defineProperty(e.Node.prototype,"isConnected",{get:function(){return!(this.ownerDocument&&this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}(e),function(e){e.Element.prototype.matches||(e.Element.prototype.matches=e.Element.prototype.matchesSelector||e.Element.prototype.mozMatchesSelector||e.Element.prototype.msMatchesSelector||e.Element.prototype.oMatchesSelector||e.Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),r=t.length;--r>=0&&t.item(r)!==this;);return r>-1})}(e)}(e.window),e.DOM.reflow=new br(e.window),e.DOM.mutations=new Pr(e.window),e.DOM.meta=Nr.bind(e.window),e.DOM.query=$r.bind(e.window),e.DOM.queryAll=Tr.bind(e.window),e.DOM.ready=Cr.bind(e.window)),e}function Br(e,t,r=!1){for(var s=e.indexOf(t);s>-1&&(r||!1===r);)e.splice(s,1),r>0&&r--,s=e.indexOf(t);return e}function Qr(e,t,r=!1){if(""==t)return e;var s=r?e.lastIndexOf(t):e.indexOf(t);return-1===s?"":e.substr(s+t.length)}function Vr(e,t,r=!1){if(""==t)return e;var s=r?e.lastIndexOf(t):e.indexOf(t);return-1===s?e:e.substr(0,s)}function Ur(e,t){return Vr(e,t,!0)}function Hr(e,t,r){return Ur(Qr(e,t),r)}const zr=function(e,t=1,r=!0){return!m(t)||t<=0?e:(!o(e)&&g(e)&&r&&(e=Object.values(e)),o(e)?e.reduce(((e,s)=>o(s)||g(s)&&r?e.concat(zr(o(s)?s:Object.values(s),t-1,r)):e.concat(s)),[]):e)},Kr=zr;function Gr(e){return!0===e||!1===e}const Jr=function(e,t,r=!0,s=1){if(o(e)&&o(t)&&e.length!==t.length)return!r;if(g(e)&&g(t)){var n=Object.keys(e),i=Object.keys(t);if(!n.length&&!i.length)return y(e)&&y(t)?r:e===t===r;if(!Jr(n,i))return!r}if(s>0&&(o(e)&&o(t)||g(e)&&g(t))){var a=function(e,t,r=!0,s=!0,n=!1,i=!1){if(o(e)&&o(t)){var a=[],l=!0;return e.forEach((e=>{if(l){var c=!1;_(t,((t,n)=>{(!c||s&&u(e))&&((o(c=r(e,n))&&!c.length||g(c)&&!Object.keys(c).length)&&(c=!1),u(c)&&s&&(e=c))})),u(c)?a.push(s?c:e):Gr(c)?n&&!c||!n&&c?a.push(e):i&&(l=!1):a.push(c)}})),a}if(g(e)&&g(t))return a={},l=!0,Object.keys(e).forEach((c=>{if(l){var h=r(e[c],t[c]);(o(h)&&!h.length||g(h)&&!Object.keys(h).length)&&(h=!1),u(h)?a[c]=s?h:e[c]:Gr(h)?n&&!h||!n&&h?a[c]=e[c]:i&&(l=!1):a[c]=h}})),a}(e,t,((e,t)=>Jr(e,t,r,s-1)),!1,!1,!0);return o(a)?a.length===e.length&&a.length===t.length:g(a)&&g(e)?Object.keys(a).length===Object.keys(e).length&&Object.keys(a).length===Object.keys(t).length:a}return f(r)?r(e,t):d(e)&&d(t)&&isNaN(e)&&isNaN(t)?r:e===t===r},Xr=Jr;function Yr(e,t=[]){return z([{},e],((e,r,s)=>{if(!f(s[e]))return f(t)?t(e):!o(t)||!t.length||t.indexOf(e)>-1}),!1,!1,!1)}class Zr{static lex(e,t,r={}){if(!v(e+=""))throw new Error("Argument1 must be a string!");var s=e=>({delims:e.delims.slice(),options:Yr(e.options),nesting:e.nesting.slice(),maxDepth:e.maxDepth,comments:e.comments.slice(),tokens:e.tokens.slice(),matches:e.matches.slice(),matchesi:Yr(e.matchesi)});if(Zr.$cache[e]&&!1!==r.cache)for(var n=0;n<Zr.$cache[e].length;n++){var i=Zr.$cache[e][n];if(Xr(i.delims,t))return s(i)}var a=new Zr(e,r).lex(t);return!1!==r.cache&&(Zr.$cache[e]=Zr.$cache[e]||[],Zr.$cache[e].push(a)),s(a)}static split(e,t,r){return Zr.lex(e,t,r).tokens}static match(e,t,r){return Zr.lex(e,t,r).matches}constructor(e,t){if(!v(e))throw new Error("Lexer requires the first argument to be a string.");this.$str=e,this.$options=t||{},this.$options.blocks||(this.$options.blocks=Zr.$blocks),this.$options.quotes||(this.$options.quotes=Zr.$quotes),this.$options.comments||(this.$options.comments=Zr.$comments)}lex(e,t){for(var r={delims:b(e),options:K(!0,{},this.$options,t||{}),nesting:[],maxDepth:0,comments:[],tokens:[],matches:[],matchesi:{}},s=0;"number"==typeof s;)s=this._evalCharsAt(r,s);if(r.nesting.length)throw new Error("Error parsing the string: "+this.$str+". Unterminated blocks: "+Kr(r.nesting).join(", "));return r}_evalCharsAt(e,t){if(!(t>=this.$str.length)){var r=1,s={},n={},i={};if(e.openComment||(n=this._testQuotes(e,t)),e.openQuote||(s=this._testComments(e,t)),e.openComment||s.ending)e.nesting.length||i.ending?this._push(e,this.$str[t]):(r=(o=s.starting||s.ending||this.$str[t]).length,this._push(e,o,"comments",s.starting));else if(e.openQuote||n.ending)this._push(e,this.$str[t]);else{if(e.options.limit&&e.matches.length===e.options.limit)return this._push(e,this.$str[t]),t+1;i=this._testNesting(e,t),i=this._testNesting(e,t);var a=this._testChars(e.options.stopChars||[],e,t);if(!e.nesting.length&&!1!==a)return e.options.stopChar=a,void(e.options.stopCharForward=this.$str.substr(t));if(e.delims.length)if(e.nesting.length||i.ending){var o;r=(o=i.starting||i.ending||this.$str[t]).length,this._push(e,o)}else{this._push(e,"");var l=this._testChars(e.delims,e,t);if(!1!==l&&(e.matches.push(l),e.matchesi[t]=l,r=l.length||1,!e.options.preserveDelims)){var c=t+(l.length||1);return c===this.$str.length&&this._push(e,""),c}this._push(e,l||this.$str[t])}else 2===e.nesting.length&&i.starting?(e.matches.push(null),this._push(e,i.starting),r=i.starting.length):!e.nesting.length&&i.ending?(this._push(e,i.ending),r=i.ending.length,e.matches.push(null)):this._push(e,this.$str[t])}return t+r}}_testQuotes(e,t){var r={};return(e.options.quotes||[]).forEach((s=>{this.$str.substr(t,1)===s&&(e.openQuote?s===e.openQuote&&(e.openQuote=!1,r.ending=s):(e.openQuote=s,r.starting=s))})),r}_testComments(e,t){var r={};return(e.options.comments||[]).forEach((s=>{if(e.openComment){if(I(s)===I(e.openComment)){var n=I(s);this.$str.substr(t).startsWith(n)&&(e.openComment=!1,r.ending=n)}}else{var i=F(s);this.$str.substr(t).startsWith(i)&&(e.openComment=s,r.starting=i)}})),r}_testNesting(e,t){var r={};return(e.options.blocks||[]).forEach((s=>{var n=F(s);if(this.$str.substr(t).startsWith(n))e.nesting=e.nesting.concat([s]),r.starting=n;else if(e.nesting.length&&I(s)===I(I(e.nesting))){var i=I(s);this.$str.substr(t).startsWith(i)&&(e.nesting=e.nesting.slice(0,-1),r.ending=i)}})),e.maxDepth=Math.max(e.maxDepth,e.nesting.length),r}_testChars(e,t,r){for(var s=0;s<e.length;s++){var n=e[s];if(f(n)){var i=n(this.$str.substr(0,r),this.$str.substr(r));if(!1!==i)return i}if(t.options.useRegex){var a=this.$str.substr(r).match(new RegExp("^"+n,!0!==t.options.useRegex?t.options.useRegex:""));if(a)return a[0]}if(!t.options.ci&&this.$str.substr(r,n.length)===n||t.options.ci&&this.$str.substr(r,n.length).toLowerCase()===n.toLowerCase())return n}return!1}_push(e,t,r="tokens",s=!1){var n=e.matches.length;if(h(e.tokens[n])&&(e.tokens[n]=""),"comments"===r){e.tokens[n].comments||(e.tokens[n]=new String(e.tokens[n]),e.tokens[n].comments=[]);var i=e.tokens[n].comments.length-(!e.tokens[n].comments.length||s?0:1);e.tokens[n].comments[i]=(e.tokens[n].comments[i]||"")+t}else e.tokens[n].comments,e.tokens[n]=e.tokens[n]+t}split(e,t,r){return this.lex(t,r).tokens}match(e,t,r){return this.lex(t,r).matches}regParse(e,t){return this.lex(e,K({useRegex:!0},t||{}))}regSplit(e,t){return this.regParse(e,t).tokens}regMatch(e,t){return this.regParse(e,t).matches}}function es(e,t={}){const r=qr.call(this);return r.OOHTML||(r.OOHTML={}),r.OOHTML.meta||(r.OOHTML.meta=r.DOM.meta("oohtml",!0)),r.OOHTML.meta.defaults(K(3,e,t)),r.OOHTML.meta}function ts(e,t,r,s=null){var n=t.split("#")[0].split("/").map((e=>e.trim())).filter((e=>e));return is(e,n,r,s)}function rs(e){var t=Zr.split(e.trim(),[":"]);return[e=t.shift(),t.reduce(((e,t)=>{var[r,s]=Zr.split(t.trim(),[]);return e[r]=Hr(s,"(",")"),e}),{})]}Zr.$blocks=[["(",")"],["[","]"],["{","}"]],Zr.$quotes=['"',"'","`"],Zr.$comments=[["/*","*/"],["//","\n"]],Zr.$cache=Object.create(null);const ss=(e,t)=>Zr.split(e.trim(),["|","+"],{preserveDelims:!0}).reduce(((e,r)=>{var s;return(r.startsWith("|")||r.startsWith("+"))&&(s=r.substr(0,1),r=r.substr(1).trim()),e.theEnd||"|"===s&&e.length?(e.theEnd=!0,e):e.concat(t(r.trim()))}),[]).filter((e=>e)),ns=(e,t,r)=>{const s=e=>e.reduce(((e,t)=>e.concat(...r(t).values())),[]);return ss(t,(t=>{var[t,n]=rs(t);return e.reduce(((e,i)=>{var a=r(i);"*"===t&&(t="("+a.keys().join("+")+")");var o,l=("(",")",(o=t).startsWith("(")&&o.endsWith(")")?ns([i],Hr(t,"(",")"),r):b(a.get(t),!1)),c=[];return Object.keys(n).forEach((e=>{if("deep"===e||"deepest"===e)for(var a=[i];("deepest"===e||!l.length)&&(a=s(a)).length;){var o=ns(a,`${t}${c.map((e=>`:${e}(${n[e]})`)).join("")}`,r);o.length&&(l=o)}else"having"!==e&&"not-having"!==e||(l=l.filter((t=>{var s=ss(n[e],(e=>r(t,e)));return"not-having"===e?!s.length:s.length}))),c.push(e)})),e.concat(l)}),[])}))},is=function(e,t,r,s=null,n=0){if(!t.length)return[];var i,a=t.shift();a.endsWith(".")&&(i=!0,a=a.substr(0,a.length-1).trim());var o=ns(e,a,r);if(o.length&&i)return o;if(t.length){var l=is(o,t.slice(),r,s,n+1);return-1===l?s(o,n,!0):l}return s?s(o,n):o};function as(e=null,t=!1){const r=qr.call(this);if(t)return void r.DOM.ready((()=>{as.call(this,e,!1)}));const s=r.window,n=r.window.document,i=r.DOM.mutations,o=es.call(this,{element:{template:"",export:"export",import:"import"},attr:{moduleid:"name",moduleref:"template",exportid:"name",exportgroup:"exportgroup"},api:{templateClass:"",templates:"templates",exports:"exports",moduleref:"template"}},e),l="template"+(o.get("element.template")?'[is="'+o.get("element.template")+'"]':"")+"["+s.CSS.escape(o.get("attr.moduleid"))+"]";var c=s.HTMLTemplateElement;if(o.get("api.templateClass")){if(!s[o.get("api.templateClass")])throw new Error('The custom element class "'+o.get("api.templateClass")+'" is not defined!');c=s[o.get("api.templateClass")]}const h=(e,t,r)=>{"templatemutation"===e&&(["addedExports","removedExports"].forEach((e=>{Object.defineProperty(t,e,{value:Object.keys(t[e]).map((r=>({name:r,items:t[e][r]})))})})),["addedTemplates","removedTemplates"].forEach((e=>{Object.defineProperty(t,e,{value:Object.keys(t[e]).map((r=>({name:r,item:t[e][r]})))})}))),Object.defineProperty(t,"path",{value:r}),n.dispatchEvent(new s.CustomEvent(e,{detail:t}))},u=(e,t)=>{const r=r=>{e.dispatchEvent(new s.CustomEvent(r,{detail:{path:t}}))};var n=e.getAttribute("src");return new Promise(((i,a)=>{s.fetch?s.fetch(n).then((e=>e.ok?e.text():Promise.reject(e.statusText))).then((s=>{e.innerHTML=s,r("load"),h("templatecontentloaded",{template:e},t),i(e)})).catch((s=>{console.error("Error fetching the bundle at "+n+". ("+s+")"),e.innerHTML="",r("loaderror"),h("templatecontentloaderror",{template:e},t),i(e)})):(i(),console.error("Error fetching the bundle at "+n+". (window.fetch() not supported by browser.)"))}))},p=(e,t,r,n=null,c=!0)=>{const d=(e,s,n,i)=>{var c;if(e.matches)if(e.matches(l)&&(c=e.getAttribute(o.get("attr.moduleid")))&&m(c)){var h=(r?r+"/":"")+c;"removed"===n?(a(t,"oohtml","templates").delete(c),a(t,"oohtml").get("parentTemplate")===t&&a(t,"oohtml").delete("parentTemplate"),s&&(s.removedTemplates[c]=e)):"added"===n&&(a(t,"oohtml","templates").set(c,e),a(e,"oohtml").set("parentTemplate",t),s&&(s.addedTemplates[c]=e)),p(e.content,e,h,n,i)}else{const r=e=>{var r=e.getAttribute(o.get("attr.exportgroup"))||"default";"removed"===n?a(t,"oohtml","exports").has(r)&&(Br(a(t,"oohtml","exports").get(r),e),a(t,"oohtml","exports").has(r).length||a(t,"oohtml","exports").delete(r),s&&(s.removedExports[r]||(s.removedExports[r]=[]),s.removedExports[r].push(e))):"added"===n&&(a(t,"oohtml","exports").has(r)||a(t,"oohtml","exports").set(r,[]),a(t,"oohtml","exports").get(r).push(e),s&&(s.addedExports[r]||(s.addedExports[r]=[]),s.addedExports[r].push(e)))};if(e.matches(o.get("element.export"))){var u=e.getAttribute(o.get("attr.exportid"))||"default";b(e.children).forEach((e=>{e.setAttribute(o.get("attr.exportgroup"),u),r(e)}))}else r(e)}};t.modulemutationsType=n;const g={addedTemplates:Object.create(null),removedTemplates:Object.create(null),addedExports:Object.create(null),removedExports:Object.create(null)};b(e.children).forEach((e=>d(e,g,n,c))),c&&h("templatemutation",g,r),"added"!==n||a(t,"oohtml").get("onLiveMode")||(a(t,"oohtml").set("onLiveMode",!0),t.getAttribute("src")&&!t.content.children.length&&f.push(u(t,r)),i.onAttrChange(t,(e=>{e[0].target.getAttribute(e[0].attributeName)!==e[0].oldValue&&u(t,r)}),["src"]),new s.MutationObserver((e=>{const t={addedTemplates:Object.create(null),removedTemplates:Object.create(null),addedExports:Object.create(null),removedExports:Object.create(null)};e.forEach((e=>{e.addedNodes.forEach((e=>d(e,t,"added",!0))),e.removedNodes.forEach((e=>d(e,t,"removed",!0)))})),h("templatemutation",t,r)})).observe(e,{childList:!0}))};if(o.get("api.templates")in n)throw new Error('document already has a "'+o.get("api.templates")+'" property!');const f=[];if(Object.defineProperty(n,o.get("api.templates"),{get:function(){return d(a(n,"oohtml","templates"))}}),o.get("api.templates")in c.prototype)throw new Error('The "HTMLTemplateElement" class already has a "'+o.get("api.templates")+'" property!');if(Object.defineProperty(c.prototype,o.get("api.templates"),{get:function(){return d(a(this,"oohtml","templates"))}}),o.get("api.exports")in c.prototype)throw new Error('The "HTMLTemplateElement" class already has a "'+o.get("api.exports")+'" property!');Object.defineProperty(c.prototype,o.get("api.exports"),{get:function(){return d(a(this,"oohtml","exports"))}});const d=e=>Object.defineProperties({},Array.from(e.keys()).reduce(((t,r)=>(t[r]={get:()=>e.get(r)},t)),{})),m=e=>{var t;return!(t=e.match(/([^a-zA-Z0-9\_\-\@])/))||(console.error(`Invalid character "${t}" in the module name: ${e}.`),!1)};if(b(n.querySelectorAll(l)).forEach((async e=>{var t=e.getAttribute(o.get("attr.moduleid"));!e.closest(o.get("element.import"))&&m(t)&&(a(n,"oohtml","templates").set(t,e),p(e.content,e,t,"added",!1))})),i.onPresenceChange(l,(async(e,t)=>{const r={addedTemplates:Object.create(null),removedTemplates:Object.create(null),addedExports:Object.create(null),removedExports:Object.create(null)};e.forEach((e=>{var s=e.getAttribute(o.get("attr.moduleid"));!e.closest(o.get("element.import"))&&m(s)&&(t?(a(n,"oohtml","templates").set(s,e),p(e.content,e,s,"added"),r.addedTemplates[s]=e):(a(n,"oohtml","templates").get(s)===e&&a(n,"oohtml","templates").delete(s),p(e.content,e,s,"removed"),r.removedTemplates[s]=e))})),h("templatemutation",r,"")})),i.onPresent(o.get("element.import"),(e=>{p(e,e,"","added",!1)})),o.get("api.moduleref")in s.Element.prototype)throw new Error('The "Element" class already has a "'+o.get("api.moduleref")+'" property!');Object.defineProperty(s.Element.prototype,o.get("api.moduleref"),{get:function(){var e;if(!a(this,"oohtml").has("module")&&(e=this.getAttribute(o.get("attr.moduleref")))){var t=(e=>{var t=n.createElement("template");return ts([n],e,(function(e,t){var r=a(e,"oohtml","templates");return 1===arguments.length?r:t.startsWith(":")?a(e,"oohtml","exports").get(t.substr(1)):r.get(t)})).forEach((e=>{a(e,"oohtml","templates").forEach(((e,r)=>{a(t,"oohtml","templates").set(r,e)})),a(e,"oohtml","exports").forEach(((e,r)=>{a(t,"oohtml","exports").has(r)||a(t,"oohtml","exports").set(r,[]),a(t,"oohtml","exports").get(r).push(...e)}))})),t})(e);a(this,"oohtml").set("module",t)}return a(this,"oohtml").get("module")}});var g=f.length?"loading":"indeterminate";Object.defineProperty(n,"templatesReadyState",{get:()=>g}),r.DOM.ready.call(r,(()=>(f.forEach((e=>{e.catch((e=>{console.warn(e)}))})),Promise.all(f).then((()=>{g="complete",n.dispatchEvent(new s.Event("templatesreadystatechange"))})))))}function os(e,t,r=null){return o(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1===t.indexOf(e))):[]}function ls(e=null,t=!1){const r=qr.call(this);if(t)return void r.DOM.ready((()=>{ls.call(this,e,!1)}));const s=r.window,n=r.window.document,i=r.DOM.mutations,o=[],l=es.call(this,{element:{import:"import"},attr:{importid:"name",exportsearch:"exportsearch"}},e);cs.push(l.get("attr.importid"),l.get("attr.moduleref"));const c="["+s.CSS.escape(l.get("attr.moduleref"))+"]",h="["+s.CSS.escape(l.get("attr.exportgroup"))+"]",u=class{static create(e){return new u(e)}constructor(e){this.el=e;const[t,r]=rs(e.getAttribute(l.get("attr.importid"))||"default");a(this.el,"oohtml").set("importID",t),a(this.el,"oohtml").set("importModifiers",r)}hydrate(e,t,r){a(this.el,"oohtml").set("anchorNode",e),a(this.el,"oohtml").set("slottedElements",t),a(this.el,"oohtml").set("compositionBlock",r),this._bindSlotted(t),this._connectToCompositionBlock()}connectedCallback(){a(this.el,"oohtml").has("anchorNode")||(a(this.el,"oohtml").set("anchorNode",l.get("isomorphic")?n.createComment(this.el.outerHTML):n.createTextNode("")),a(this.el,"oohtml").set("compositionBlock",this.el.hasAttribute(l.get("attr.moduleref"))?this.el.getAttribute(l.get("attr.moduleref")).trim().startsWith("~")?this.el.parentNode.closest(h):null:this.el.parentNode.closest(c)),this._connectToCompositionBlock()),r.DOM.ready.call(r,(()=>{this.resolve()}))}_connectToCompositionBlock(){this.compositionBlock&&a(this.compositionBlock,"oohtml","imports").set(this.importID,this.el)}_bindSlotted(e){e.forEach((e=>{e.importReference=this.el})),a(this.el,"oohtml").set("slottedObserver",i.onRemoved(e,((t,r,s,n,i)=>{i&&i.size===e.length&&a(this.el,"oohtml").get("slottedObserver").disconnect(),t.forEach((e=>{e.parentNode||Br(this.slottedElements,e),e.importReference===this.el&&delete e.importReference})),this.slottedElements.length||this.anchorNode.isConnected&&this.anchorNode.replaceWith(this.el)}),{maintainCallState:!0,ignoreTransients:!0}))}resolve(){if(!L(o,(e=>this.el.closest(e)))){var e,t;if(this.el.hasAttribute(l.get("attr.moduleref")))this.compositionBlock&&a(this.compositionBlock,"oohtml","imports").get(this.importID)===this.el&&a(this.compositionBlock,"oohtml","imports").delete(this.importID),e=this.el;else{if(!this.compositionBlock)return void console.warn("Scoped slots must be found within template contexts. ["+this.importID+"]",this.el);e=this.compositionBlock}var r=e.getAttribute(l.get("attr.moduleref")).trim(),s=this.el.getAttribute(l.get("attr.exportsearch"));e&&(t=((e,t,r)=>{var s=this.importID,n=this.importModifiers,[i,o]="search"in n||null!==r?("search"in n?n.search:r).split("-").filter((e=>e)).map((e=>parseInt(e||0))).concat([0,1e3]):[0,0];return ts(e,t,(function(e,t){var r=a(e,"oohtml","templates");return 1===arguments.length?r:t.startsWith(":")?a(e,"oohtml","exports").get(t.substr(1)):r.get(t)}),(function(e,t,r){var n=e.reduce(((e,t)=>e.concat(a(t,"oohtml","exports").get(s)||[])),[]);return!n.length&&t>i&&o?(o--,-1):n}))})([r.startsWith("~")?this.compositionBlock:n],r,s)).length?os(t,a(this.el,"oohtml").get("originalSlottedElements")||[]).length&&(a(this.el,"oohtml").set("originalSlottedElements",t),this.fill(t)):(a(this.el,"oohtml").set("originalSlottedElements",null),this.empty())}}fill(e){e=b(e,!1).map((e=>e.cloneNode(!0))),this.empty(!0),this.el.isConnected&&this.el.replaceWith(this.anchorNode),e.forEach((e=>{a(e,"oohtml","templates").set("~",this.el),function(e,t,r=[],s=!0){if(r=r.concat(cs),e.hasAttribute("noinherit")&&(r=r.concat((e.getAttribute("noinherit")||"*").split(" ").map((e=>e.trim())))),de(us.concat(["role","class"])).forEach((n=>{var i,a;if(!r.includes(n)&&!r.includes("*")&&(i=t.getAttribute(n))){if(a=e.getAttribute(n))var o=s?[a,i]:[i,a];else o=[i];e.setAttribute(n,de(o.join(" ").split(" ").map((e=>e.trim()))).join(" ")),r.push(n)}})),de(hs.concat("style")).forEach((n=>{var i,a;if(!r.includes(n)&&!r.includes("*")&&(i=t.getAttribute(n))){if(a=e.getAttribute(n))(o=s?[a,i]:[i,a])[0].trim().endsWith(";")||(o[0]=o[0]+";");else var o=[i];e.setAttribute(n,o.join(" ")),r.push(n)}})),!r.includes("*"))for(var n=0;n<t.attributes.length;n++){var i=t.attributes[n];r.includes(i.name)||e.hasAttribute(i.name)&&!s||e.setAttribute(i.name,i.value)}}(e,this.el),e.getAttribute(l.get("attr.exportgroup"))||e.setAttribute(l.get("attr.exportgroup"),this.importID),this.anchorNode.before(e)})),this._bindSlotted(e),this.slottedElements.push(...e)}empty(e=!1){if(this.slottedElements){var t=this.slottedElements;e&&a(this.el,"oohtml").has("slottedObserver")&&(a(this.el,"oohtml").get("slottedObserver").disconnect(),t=this.slottedElements.splice(0)),t.forEach((e=>e.remove()))}}get importID(){return a(this.el,"oohtml").get("importID")}get importModifiers(){return a(this.el,"oohtml").get("importModifiers")}get anchorNode(){return a(this.el,"oohtml").get("anchorNode")}get compositionBlock(){return a(this.el,"oohtml").get("compositionBlock")}get slottedElements(){return a(this.el,"oohtml").has("slottedElements")||a(this.el,"oohtml").set("slottedElements",[]),a(this.el,"oohtml").get("slottedElements")}get exports(){return a(this.el,"oohtml").get("exports")}static get observedAttributes(){return[l.get("attr.importid")]}};i.onPresent(l.get("element.import"),(e=>{u.create(e).connectedCallback()}));const p=(e,t)=>{const r=(e,r)=>!t||r===t||!0===t&&(this.importModifiers&&"search"in this.importModifiers||e.getAttribute(l.get("attr.exportsearch")));if(e.matches(l.get("element.import"))){var s=u.create(e);s.connectedCallback(),r(e,s.importID)&&s.resolve()}else a(e,"oohtml","imports").forEach(((e,t)=>{r(e,t)&&u.create(e).resolve()}))};i.onPresent(c,(e=>{L(o,(t=>e.closest(t)))||i.onAttrChange(e,(t=>{t[0].target.getAttribute(t[0].attributeName)!==t[0].oldValue&&p(e)}),[l.get("attr.moduleref"),l.get("attr.importid")])})),n.addEventListener("templatemutation",(e=>{e.detail.path&&b(n.querySelectorAll("["+s.CSS.escape(l.get("attr.moduleref"))+"]")).forEach((t=>{(function(e,t){return t=t.split("#")[0].split("/").map((e=>e.trim())).filter((e=>e)),!!(e=e.split("#")[0].split("/").map((e=>e.trim())).filter((e=>e))).length&&e.reduce(((e,r,s)=>!!e&&Zr.split(r.trim(),["|","+"]).reduce(((e,r)=>{var[r,n]=rs(r),i=(r=r.trim())===t[s];if(!i&&("deep"in n||"deepest"in n)){var a=t.slice(s+1).reduce(((e,t,s)=>e>-1&&"deep"in n?e:t===r?s:e),-1);a>-1&&(t.splice(s,a+1),i=!0)}return e||i}),!1)),!0)})(t.getAttribute(l.get("attr.moduleref")),e.detail.path)&&(p(t,!0),e.detail.addedExports.concat(e.detail.removedExports).forEach((e=>{p(t,e.name)})))}))})),r.DOM.ready.call(r,(()=>{l.get("isomorphic")&&b(n.querySelectorAll(h)).forEach((e=>{if(!a(e.parentNode,"oohtml").get("importsCan")){var t=[];e.parentNode.childNodes.forEach((e=>{var r;if(1===e.nodeType&&e.matches(h))t.push(e);else if(8===e.nodeType&&(r=e.nodeValue.trim())&&r.startsWith("<"+l.get("element.import"))&&r.endsWith("</"+l.get("element.import")+">")){var s,i=n.createElement("div");if(i.innerHTML=r,(s=i.firstChild).matches(l.get("element.import"))){var a=s.hasAttribute(l.get("attr.moduleref"))?s.getAttribute(l.get("attr.moduleref")).trim().startsWith("~")?e.parentNode.closest(h):null:e.parentNode.closest(c);u.create(s).hydrate(e,t,a),t=[]}}})),a(e.parentNode,"oohtml").set("importsCan",!0)}}))}))}const cs=["nocompose"],hs=[],us=[];function ps(e=null,t=!1){const r=qr.call(this);if(t)return void r.DOM.ready((()=>{ps.call(this,e,!1)}));const s=r.window,n=r.window.document,i=r.DOM.mutations,o=[],l=es.call(this,{attr:{namespace:"namespace",id:"id"},api:{namespace:"namespace"},eagermode:!0},e),c=function(e){if(!a(e,"oohtml").has("namespace")){const t=Object.create(null);a(e,"oohtml").set("namespace",t),me.link&&me.link(e,l.get("api.namespace"),t)}return a(e,"oohtml").get("namespace")},h=function(e){if(!a(e,"oohtml").has("publicNamespace")){const t=c(e);a(e,"oohtml").set("publicNamespace",l.get("eagermode")?new Proxy(t,{get(r,i){if(v(i)&&!t[i]){var a=b(e.querySelectorAll("["+s.CSS.escape(l.get("attr.id"))+'="'+i+'"]')).filter((t=>{var r=t.parentNode.closest("["+s.CSS.escape(l.get("attr.namespace"))+"]");return e===n?!r:r===e}))[0];a&&me.set(t,i,a)}return t[i]}}):t)}return a(e,"oohtml").get("publicNamespace")};if(l.get("api.namespace")in s.Element.prototype)throw new Error('The "Element" class already has a "'+l.get("api.namespace")+'" property!');if(Object.defineProperty(s.Element.prototype,l.get("api.namespace"),{get:function(){return h(this)}}),l.get("api.namespace")in n)throw new Error('The "document" object already has a "'+l.get("api.namespace")+'" property!');Object.defineProperty(n,l.get("api.namespace"),{get:function(){return h(n)}}),i.onPresent("["+s.CSS.escape(l.get("attr.id"))+"]",(e=>{var t=a(e,"oohtml");if(!t.get("idAlreadyBeingWatched")&&!L(o,(t=>e.closest(t)))){var r=e.getAttribute(l.get("attr.id")),h=e.parentNode.closest("["+s.CSS.escape(l.get("attr.namespace"))+"]");h||(h=n);var u=c(h);u[r]!==e&&me.set(u,r,e),t.set("idAlreadyBeingWatched",!0),i.onPresenceChange(e,((t,s)=>{s?u[r]!==e&&me.set(u,r,e):u[r]===e&&me.deleteProperty(u,r)}))}}))}function fs(e=null,t=!1){const r=qr.call(this);if(t)return void r.DOM.ready((()=>{fs.call(this,e,!1)}));const s=r.window,n=r.window.document,i=es.call(this,{api:{state:"state",setState:"setState",clearState:"clearState"}},e),o=function(e,t=null){if(!a(e,"oohtml").has("state")||t){const r=t||Object.create(null),s=a(e,"oohtml").get("state");if(a(e,"oohtml").set("state",r),s&&me.unlink&&me.unlink(e,i.get("api.state"),s),me.link){let n=t?{isUpdate:!!s,oldValue:s}:null;me.link(e,i.get("api.state"),r,n)}}return a(e,"oohtml").get("state")};if(i.get("api.state")in s.Element.prototype)throw new Error('The "Element" class already has a "'+i.get("api.state")+'" property!');if(Object.defineProperty(s.Element.prototype,i.get("api.state"),{get:function(){return me.proxy(o(this))}}),i.get("api.setState")in s.Element.prototype)throw new Error('The "Element" class already has a "'+i.get("api.setState")+'" property!');if(Object.defineProperty(s.Element.prototype,i.get("api.setState"),{value:function(e,t={}){if(t.update){var r=o(this);if("merge"!==t.update){var s=os(Object.keys(r),Object.keys(e));me.deleteProperty(r,s)}me.set(r,e)}else o(this,e)}}),i.get("api.clearState")in s.Element.prototype)throw new Error('The "Element" class already has a "'+i.get("api.clearState")+'" property!');if(Object.defineProperty(s.Element.prototype,i.get("api.clearState"),{value:function(){o(this,{})}}),i.get("api.state")in n)throw new Error('The "document" object already has a "'+i.get("api.state")+'" property!');if(Object.defineProperty(n,i.get("api.state"),{get:function(){return me.proxy(o(n))}}),i.get("api.setState")in n)throw new Error('The "document" object already has a "'+i.get("api.setState")+'" property!');if(Object.defineProperty(n,i.get("api.setState"),{value:function(e,t={}){if(t.update){var r=o(n);if("merge"!==t.update){var s=os(Object.keys(r),Object.keys(e));me.deleteProperty(r,s)}me.set(r,e)}else o(n,e)}}),i.get("api.clearState")in n)throw new Error('The "document" object already has a "'+i.get("api.clearState")+'" property!');Object.defineProperty(n,i.get("api.clearState"),{value:function(){o(n,{})}})}function ds(e=null,t=!1){const r=qr.call(this);if(t)return void r.DOM.ready((()=>{ds.call(this,e,!1)}));const s=r.window,n=r.window.document,i=r.DOM.mutations,o=[],l=es.call(this,{selectors:{script:'script[type="subscript"]'},api:{bind:"bind",unbind:"unbind"},script:{}},e);var p=!1!==l.get("script.autorun");const d={errorLevel:l.get("script.errlevel")},m={};me.set(m,"document",n);const g=xt.createStack([m,xt.create(s)],d,{set:me.set}),y=function(e){var t=a(e,"oohtml");if(!t.has("subscript")){const r={},s={scope:xt.createStack([{},r,g],d,{set:me.set})};me.set(r,"this",e),t.set("subscript",s),s.console={errors:[],infos:[],warnings:[],logs:[],exceptions:[]}}return t.get("subscript")},v=function(e){var t=y(e);if(t.handler||(t.handler=r=>{t.inWaitlist||w(t.srcCodes1,e,r)},t.connected=e=>{t.isConnected=e,e?t.scope.observe(me,t.handler,{tags:[t.handler]}):t.scope.unobserve(me,{tags:[t.handler]})}),!t.isConnected){var r=i.onRemoved(e,(()=>{t.connected(!1),r.disconnect()}),{ignoreTransients:!0});t.connected(!0)}return t},w=function(e,t,r){var s=y(t);s.inWaitlist=!1;var n={references:(r||{}).references,catch:s.catch?s.catch:e=>{2===s.errorLevel?(console.error(t,e),s.console.errors.push(e)):0!==s.errorLevel&&(console.warn(t,e.message),s.console.warnings.push(e.message))},trap:me};e.forEach((e=>{gr.eval(e,s.scope,n)}))};if(i.onPresent(l.get("selectors.script"),((e,t)=>{if(e.parentNode){var r=e.parentNode,s=v(r);if(l.get("isomorphic")||e.remove(),s.scriptElements=s.scriptElements||[],s.srcCodes1=s.srcCodes1||[],!s.scriptElements.includes(e)){s.scriptElements.push(e);var n=(e.textContent||"").trim();if(n){var i=[],a=e.hasAttribute("explain")||l.get("script.explain"),c=gs(n,{explain:a?i:null});s.srcCodes1.push(c),e.hasAttribute("scoped"),a&&(s.console.logs.push(i),console.log(r,i)),s.errorLevel=e.getAttribute("errors")?parseInt(e.getAttribute("errors")):l.get("script.errors"),p||s.hasBindings||e.hasAttribute("autorun")?w([c],r):(s.inWaitlist=!0,o.push(r))}}}})),"subscript"in s.Element.prototype)throw new Error('The "Element" class already has a "subscript" property!');if(Object.defineProperty(s.Element.prototype,"subscript",{get:function(){let e=v(this);if(!("bindings"in e)){var t=this;Object.defineProperty(e,"bindings",{get:function(){return e.scopeInstanceProxy||(e.scopeInstanceProxy=new Proxy(e.scope.stack.main,{set:(r,s,n)=>(me.set(e.scope.stack.main,s,n),e.hasBindings=!0,o.includes(t)&&(Br(o,t),w((e.srcCodes1||[]).concat(e.srcCodes2||[]),t)),!0),get:(t,r)=>me.get(e.scope.stack.main,r),deleteProperty:(t,r)=>me.deleteProperty(e.scope.stack.main,r)})),e.scopeInstanceProxy}}),Object.defineProperty(e,"bind",{value:function(r,s={}){s.update?me.set(e.scope.stack.main,r):me.set(e.scope.stack,"main",r),e.hasBindings=!0,o.includes(t)&&(Br(o,t),w((e.srcCodes1||[]).concat(e.srcCodes2||[]),t))}}),Object.defineProperty(e,l.get("api.unbind"),{value:function(){me.set(e.scope.stack,"main",{})}})}return e}}),"subscript"in n)throw new Error('The "document" object already has a "subscript" property!');var O,x={};Object.defineProperty(n,"subscript",{get:function(){return"bindings"in x||(Object.defineProperty(x,"bindings",{get:function(){return O||(O=new Proxy(g.stack.main,{set:(e,t,r)=>{var s;for(me.set(g.stack.main,t,r);s=o.shift();){var n=v(s);w((n.srcCodes1||[]).concat(n.srcCodes2||[]),s)}return p=!0,!0},get:(e,t)=>me.get(g.stack.main,t),deleteProperty:(e,t)=>me.deleteProperty(g.stack.main,t)})),O}}),Object.defineProperty(x,"bind",{value:function(e,t={}){var r;for(t.update?me.set(g.stack.main,e):me.set(g.stack,"main",e);r=o.shift();){var s=v(r);w((s.srcCodes1||[]).concat(s.srcCodes2||[]),r)}p=!0}}),Object.defineProperty(x,"unbind",{value:function(){me.set(g.stack,"main",{})}})),x}}),r.SubscriptElement=e=>class extends e{constructor(){super(),this._parametersContextGroups={},this._parametersDefaultValsRefs={},(this.constructor.subscriptParameterBlocks||[]).forEach((e=>{if(e.replaceAll(" ","").endsWith("()")&&(e=e.replaceAll("(","").replaceAll("}","")),"constructor"===e)throw new Error("Constructors cannot be reactive methods.");if(!f(this[e]))throw new Error(`The implied reactive method "${e}" is not a function.`);var t=Vr(Qr(this[e].toString().trim(),"("),")").split(",").map((e=>e.trim())).filter((e=>e));if(!t.length)throw new Error(`[${e}()]: Reactive methods must have parameters.`);this._parametersContextGroups[e]={},this._parametersDefaultValsRefs[e]=t.map((t=>{if(!t.includes("="))throw new Error(`[${e}(${t})]: All parameters must have a default value.`);var r=t.split("=").map((e=>e.trim()));if(!r[1].includes("."))throw new Error(`[${e}(${t})]: Parameter's default value must be a path reference.`);var i=r[1].replaceAll("?.",".").split("."),a=i.shift(),o="this"===a?this:"document"===a?n:"window"===a?s:globalThis[a];if(!u(o))throw new Error(`[${e}(${t})]: Parameter's default value does not reference an object in scope.`);return this._parametersContextGroups[e][a]||(this._parametersContextGroups[e][a]={context:o,refs:[]}),this._parametersContextGroups[e][a].refs.push(i),r[1]}))}));var e=[],t=l.get("script.explain"),r=y(this);r.srcCodes2=(this.constructor.subscriptBlocks||[]).map((e=>{if("constructor"===e)throw new Error("Constructors cannot be reactive blocks.");if(!f(this[e]))throw new Error(`The implied reactive block "${e}" is not a function.`);var t=this[e].toString().trim();if(!t.replaceAll(" ","").startsWith(`${e}(){`))throw new Error(`[${e}()]: Reactive blocks cannot have parameters.`);return Ur(Qr(t,"{"),"}")})).filter((e=>e)),r.srcCodes2=r.srcCodes2.map((r=>gs(r,{explain:t?e:null}))),t&&(r.console.logs.push(e),console.log(this,e)),r.handler2=e=>{r.inWaitlist||w(r.srcCodes2,this,e)}}connectedCallback(){_(this._parametersContextGroups,((e,t)=>{const r=this._parametersDefaultValsRefs[e];_(t,((s,n)=>{me.observe(n.context,n.refs,(n=>{var i={};n.forEach((e=>{i[`${s}.${e.path.join(".")}`]=e.value}));var a=r.map((e=>{if(!i[e]){var r=e.split("."),s=r.shift();i[e]=function(e,t,r={},s={}){t=b(t).slice();for(var n=e;!h(n)&&!c(n)&&t.length;){var i=t.shift();if(!(r.get?r.get(n,i):u(n)?i in n:n[i]))return void(s.exists=!1);n=r.get?r.get(n,i):n[i]}return s.exists=!0,n}(t[s].context,r,me)}return i[e]||void 0}));try{this[e](...a)}catch(e){console.error(e)}}),{diff:!0,suptree:!0,tags:[this,"subscriptParameterBlocks"]})}));try{this[e]()}catch(e){}}));const e=y(this);p||e.hasBindings?w(e.srcCodes2,this):(e.inWaitlist=!0,o.push(this)),e.scope.observe(me,e.handler2,{tags:[e.handler2]})}disconnectedCallback(){_(this._parametersContextGroups,((e,t)=>{_(t,((e,t)=>{me.unobserve(t.context,null,null,{tags:[this,"subscriptParameterBlocks"]})}))}));const e=y(this);e.scope.unobserve(me,{tags:[e.handler2]})}}}const ms={};function gs(e,t={}){return ms[e]||(ms[e]=Ie.parse(e,[kt],K({assert:!1},t)))||(ms[e]=new kt([Ie.parse(e,null,t)])),ms[e]}function ys(e,t,r,s=!1){if(v(t)&&t.endsWith("]")){var n=Ur(Qr(t,"[",!0),"]")||0;return m(n)&&(n=parseInt(n)),m(t=Ur(t,"[")||0)&&(t=parseInt(t)),ys(e,t,((e,t)=>{if(!e[t]){if(!s)return r();e[t]=m(n)?[]:{}}return r(e[t],n)}),s)}return r(e,t)}function vs(e,t,r,s=!0){ys(e,t,((e,t)=>{m(t)?(t=t||o(e)?e.length:Object.keys(e).filter(m).length,b(r,!1).forEach(((r,s)=>{e[t+s]=r}))):e[t]=s&&t in e?b(e[t],!1).concat(r):r}),!0)}function bs(e,t={},r="&"){return((e=e||"").startsWith("?")?e.substr(1):e).split(r).filter((e=>e)).map((e=>e.split("=").map((e=>e.trim())))).forEach((e=>vs(t,e[0],decodeURIComponent(e[1])))),t}function ws(e,t,r,s=null){!g(t)&&!o(t)||s&&!s(t,e)?r(e,t||0===t?t:""):(o(t),Object.keys(t).forEach((n=>{ws(`${e}[${n}]`,t[n],r,s)})))}function Os(e,t="&",r=null){var s=[];return Object.keys(e).forEach((t=>{ws(t,e[t],((e,t)=>{s.push(`${e}=${encodeURIComponent(t)}`)}),r)})),s.join(t)}const xs={join(){for(var e=[],t=0,r=0,s=arguments.length;r<s;r++)e=e.concat(arguments[r].split("/"));var n=[];for(r=0,s=e.length;r<s;r++){var i=e[r];i&&"."!==i&&(".."===i?n.length?n.pop():t++:n.push(i))}return""===e[0]&&n.unshift(""),"../".repeat(t)+n.join("/")||(n.length?"/":".")},dirname(e){return this.join(e,"..")}};var Es=(e,t)=>g(e)&&g(t)?Es(Object.keys(e),Object.keys(t))&&Es(Object.values(e),Object.values(t)):o(e)&&o(t)?e.length===t.length&&e.reduce(((e,r,s)=>e&&r===t[s]),!0):e===t;const js=e=>{const t=class extends e{constructor(...e){super(...e);var t=bs(this.search);const r=e=>{var t=Os(e);(t=t?"?"+t:"")!==this.search&&(this.search=t)};this.__query={value:t,proxy:new Proxy(t,{set:(e,t,s)=>(e[t]=s,r(e),!0),deleteProperty:(e,t)=>(delete e[t],r(e),!0)})}}set search(e){super.search=e;var t=bs(e);Es(t,this.query)||(this.query=t)}get search(){return super.search}get query(){return this.__query.proxy}};return t.Observable=class extends t{constructor(){super(...arguments),me.accessorize(this,["protocol","username","password","host","hostname","port","origin","pathname","search","query","hash","href"])}},t},ks=(e,t=null)=>{if(!u(e))return;const r=e[Symbol.toStringTag];return(t||["Uint8Array","Uint16Array","Uint32Array","ArrayBuffer","Blob","File","FormData","Stream"]).reduce(((e,t)=>e||(r===t?t:null)),null)},Ss=(e,t,r)=>{const s=class extends e{constructor(e,r={}){var s={},n={};("headers"in r&&!(r instanceof t)||"_proxy"in r||"meta"in r)&&(!("headers"in(r={...r}))||r instanceof t||(r.headers=new t(r.headers)),"_proxy"in r&&(s=r._proxy,delete r._proxy),"meta"in r&&(n=r.meta,delete r.meta),arguments[1]=r),super(...arguments),this._proxy=s,this._meta=n}clone(){const e=new this.constructor(super.clone());return e._proxy=this._proxy,e._headers=this._headers,e._typedDataCache=this._typedDataCache,e._meta=this._meta,e}get url(){return"url"in this._proxy?this._proxy.url:super.url}get headers(){return this._headers||(this._headers=new t(super.headers)),this._headers}get original(){return this._typedDataCache.original}get originalType(){return this._typedDataCache.originalType}get meta(){return this._meta||{}}async arrayBuffer(){return this._typedDataCache.arrayBuffer?this._typedDataCache.arrayBuffer:super.arrayBuffer()}async blob(){return this._typedDataCache.blob?this._typedDataCache.blob:super.blob()}async formData(){if(this._typedDataCache.formData)return this._typedDataCache.formData;const e=await super.formData();return e.tee=r.prototype.tee.bind(e),e.json=r.prototype.json.bind(e),e}async json(){return this._typedDataCache.json?this._typedDataCache.json:super.json()}async text(){return this._typedDataCache.text?this._typedDataCache.text:super.text()}jsonBuild(e=!1){return this._typedDataCache.jsonBuild&&!e||(this._typedDataCache.jsonBuild=new Promise((async e=>{var t=this,r=t.headers.get("content-type")||"",s="application/json"===r||this._typedDataCache.json?"json":"application/x-www-form-urlencoded"===r||r.startsWith("multipart/")||this._typedDataCache.formData||!r&&!["get"].includes((t.method||"").toLowerCase())?"formData":"text/plain"===r?"plain":"other";e("formData"===s?(await t.formData()).json():"json"===s?await t.json():"plain"===s?await t.text():t.body)}))),this._typedDataCache.jsonBuild}};return s.Headers=t,s};function Cs(e,t){const r={body:e,original:e};if(v(e)||d(e))return r.originalType="text",r.text=e,r.headers={contentLength:(e+"").length},r;if(r.originalType=ks(e),["Blob","File"].includes(r.originalType))r.blob=e,r.headers={contentType:e.type,contentLength:e.size};else if(["Uint8Array","Uint16Array","Uint32Array","ArrayBuffer"].includes(r.originalType))r.arrayBuffer=e,r.headers={contentLength:e.byteLength};else if("FormData"===r.originalType)r.formData=e,Ps(r,e,t);else if(g(e)&&y(e)||o(e)&&o(i=e)&&Object.getPrototypeOf(i)===Array.prototype){var s,n=new t.FormData;n.json(e,((e,t,r)=>(s=s||r,!0))),s?(r.formData=n,Ps(r,n,t)):(r.json=e,r.body=JSON.stringify(e),r.headers={contentType:"application/json",contentLength:Buffer.byteLength(r.body,"utf8")}),r.jsonBuild=e}var i;return r}const Ps=(e,t,r)=>{if(!r.FormDataEncoder||!r.ReadableStream)return;const s=new r.FormDataEncoder(t);e.body=r.ReadableStream.from(s.encode()),e.headers=s.headers},_s=e=>class extends e{constructor(t={}){t instanceof e?super(t):(super(),this.json(t))}json(e={},t=!0){if(arguments.length){const r=$s(this),s=Object.keys(r).reduce(((e,t)=>e.concat("symbol"!=typeof t&&"set"in r[t]?t:[])),[]);return void Object.keys(e).forEach((r=>{var n=s.reduce(((e,t)=>e||(t===r||t.toLocaleLowerCase()===r?t:null)),null);n?(t||void 0===this[n])&&(this[n]=e[r]):!t&&this.has(r)||this.set(r,e[r])}))}const r={};for(var[s,n]of this)r[s]=n;return r}set cacheControl(e){return this.set("Cache-Control",e)}get cacheControl(){return this.get("Cache-Control")}set contentLength(e){return this.set("Content-Length",e)}get contentLength(){return this.get("Content-Length")}set contentType(e){return this.set("Content-Type",e)}get contentType(){return this.get("Content-Type")}};function $s(e){if(e){const t=Object.getPrototypeOf(e);return t===Object.prototype?{}:{...$s(t),...Object.getOwnPropertyDescriptors(e)}}return Object.create(null)}const Ts=e=>class extends(_s(e)){set accept(e){return this.set("Accept",e)}get accept(){const e=(this.get("Accept")||"").split(",").map((e=>[(e=e.trim().split(";").map((e=>e.trim()))).shift(),parseFloat((e.pop()||"1").replace("q=",""))])).sort(((e,t)=>e[1]>t[1]?-1:1));return{match:t=>(t=(t+"").split("/"),e.reduce(((e,r)=>e||(r=r[0].split("/"))&&[0,1].every((e=>t[e]===r[e]||"*"===t[e]||"*"===r[e]))),!1))}}set cookies(e){return this.set("Cookie",e),!0}get cookies(){return this._cookies||(this._cookies=bs(this.get("cookie"),{},";")),this._cookies}set cors(e){return this.set("Access-Control-Allow-Origin",!0===e?"*":!1===e?"":e)}get cors(){return this.get("Access-Control-Allow-Origin")}set range(e){return this.set("Range",Array.isArray(e)?`bytes=${e.join("-")}`:e)}get range(){const e=this.get("Range");if(!e)return;const t=Qr(e,"bytes=").split("-");return t[0]=t[0]?parseInt(t[0],10):0,t[1]=t[1]?parseInt(t[1],10):0,t.clamp=e=>{t[1]>e-1&&(t[1]=e-1)},t}},As=e=>class extends(Ss(e.Request,Ts(e.Headers),e.FormData)){constructor(t,r={}){var s={};t instanceof e.Request&&((r={...r})._proxy={...t._proxy||{},...r._proxy||{}},t._typedDataCache&&(s=t._typedDataCache),r.method&&t.method!==r.method.toUpperCase()&&["GET","HEAD"].includes(r.method.toUpperCase())&&(t=t.url,["headers","mode","credentials","cache","redirect","referrer","integrity"].forEach((e=>{e in r||(r[e]=t[e])})))),"body"in r&&"body"in(r={...r})&&(s=Cs(r.body,e),r.body=s.body),p(r)?super(t):super(t,r),this._typedDataCache=s,this._typedDataCache.headers&&this.headers.json(this._typedDataCache.headers)}get destination(){return"destination"in this._proxy?this._proxy.destination:super.destination}get referrer(){return"referrer"in this._proxy?this._proxy.referrer:super.referrer}},Ds=e=>class extends(_s(e)){set contentRange(e){if(Array.isArray(e)){if(2===e.length&&!e[0].includes("-")||e.length<2)throw new Error("A Content-Range array must be in the format: [ 'start-end', 'total' ]");return this.set("Content-Range",`bytes ${e.join("/")}`)}return this.has("Accept-Ranges")||this.set("Accept-Ranges","bytes"),this.set("Content-Range",e)}get contentRange(){const e=this.get("Content-Range");if(e)return Qr(e,"bytes ").split("/")}set cookies(e){if(!g(cookieJar))throw new Error(`The "cookies" response directive does not support the type: ${i(e)}`);return this.set("Set-Cookie",e),!0}get cookies(){return this.get("Set-Cookie")}set cors(e){return this.set("Access-Control-Allow-Origin",!0===e?"*":!1===e?"":e)}get cors(){return this.get("Access-Control-Allow-Origin")}set attachment(e){if(!v(e=!0===e?"attachment":!1===e?"inline":e))throw new Error(`The "download" response directive does not support the type: ${i(e)}`);return["attachment","inline"].includes(e)||(e=`attachment; filename="${e}"`),this.set("Content-Disposition",e)}get attachment(){var e=(this.get("Content-Disposition")||"").trim();return"attachment"===e||"inline"!==e&&Qr(Ur(e,'"'),'filename="')}get redirect(){return this.get("Location")}set redirect(e){return this.set("Location",e)}},Ms=e=>class extends(Ss(e.Response,Ds(e.Headers),e.FormData)){constructor(t=null,r={}){var s={},n={},i={};arguments.length&&(t=(i=Cs(t,e)).body),("_proxy"in r||"meta"in r)&&("_proxy"in(r={...r})&&(s=r._proxy,delete r._proxy),"meta"in r&&(n=r.meta,delete r.meta)),p(r)?super(t):super(t,r),this._proxy=s,this._meta=n,this._typedDataCache=i,this._typedDataCache.headers&&this.headers.json(this._typedDataCache.headers)}get ok(){return"ok"in this._proxy?this._proxy.ok:super.ok}get redirected(){return"redirected"in this._proxy?this._proxy.redirected:super.redirected}},Rs=(e=>{const t=js(e.URL),r=As(e),s=Ms(e),n=class{constructor(n,i=null){this._request=n,this._session=i,this.URL=t,this.Request=r,this.Request.sourceEvent=this,this.Response=s,this.Response.sourceEvent=this,this.globals=e}get url(){return this._url||(this._url=new t(this._request.url)),this._url}get request(){return this._request}get session(){return this._session}retarget(e,t={}){var r;return e instanceof n.Request?r=p(t)?e:new n.Request(e,t):((t={_proxy:{},...t})._proxy.url=`${this.url.origin}${e}`,t._proxy.referrer=this.request.url,r=new n.Request(this._request,t)),new n(r,this._session)}};return n.URL=t,n.Request=r,n.Response=s,n.globals=e,n})({URL,Request,Response,Headers,FormData:(Ws=FormData,class extends Ws{tee(e=null){const t=new this.constructor,r=new this.constructor;for(var[s,n]of this.entries()){const i=i(n);e&&e(n,s,i)||!e&&!i?t.append(s,n):r.append(s,n)}return[t,r]}json(e={},t=null){if(!arguments.length){var r;for(var[s,n]of this.entries())r||(r=m(Vr(s,"["))?[]:{}),vs(r,s,n);return r}Object.keys(e).forEach((r=>{ws(r,e[r],((e,r)=>{t&&!t(e,r,u(r))||this.append(e,r)}),(e=>!ks(e)))}))}}),File,Blob,ReadableStream});var Ws;class Fs{constructor(e,t={}){this.ready=navigator.serviceWorker.ready,this.registration=new Promise(((r,s)=>{const n=()=>{navigator.serviceWorker.register(e,{scope:t.scope||"/"}).then((async e=>{const t=e=>{const t="installed"===e.state?"waiting":"activating"===e.state||"activated"===e.state?"active":e.state;me.set(this,t,e)},s=e.active||e.waiting||e.installing;t(s),s.addEventListener("statechange",(e=>t(e.target))),e.addEventListener("updatefound",(()=>{t(e.installing),e.installing.addEventListener("statechange",(e=>t(e.target)))})),r(e)})).catch((e=>s(e)))};t.onWondowLoad?window.addEventListener("load",n):n(),t.startMessages&&navigator.serviceWorker.startMessages()})),this.post={send:(e,t=1)=>{if(this.active)f(e)&&(e=e()),this.active.postMessage(e);else if(t){const r=s=>{f(e)&&(e=e()),s.value.postMessage(e),2!==t&&me.unobserve(this,"active",r)};me.observe(this,"active",r)}return this.post},receive:(e,t=1)=>(navigator.serviceWorker.addEventListener("message",e),this.post)},this.push={getSubscription:async()=>(await this.registration).pushManager.getSubscription(),subscribe:async(e,t={})=>await this.push.getSubscription()||(await this.registration).pushManager.subscribe({applicationServerKey:urlBase64ToUint8Array(e),...t}),unsubscribe:async()=>{var e=await this.push.getSubscription();return e?e.unsubscribe():null}}}}class Is extends class{constructor(e,t,r){this.path=o(e)?e:(e+"").split("/").filter((e=>e)),this.layout=t,this.context=r}async route(e,t,r,s){const n=this,i=async function(e){const t={...n.context};if(!e.trail||e.trail.length<e.destination.length){if(e=await n.readTick(e),t.pathname=`/${e.trail.join("/")}`,t.stepname=e.trail[e.trail.length-1],n.finalizeHandlerContext(t,e),e.exports){const r=b(e.method),s=f(e.exports)&&r.includes("default")?e.exports:r.reduce(((t,r)=>t||e.exports[r.toLowerCase()]),null);if(s){const r=async(...t)=>{const r={...e,arg:t[0]};if(t.length>1){var s,a=t[1],l={...t[2]||{}};if(t[1]instanceof r.event.Request)a=(s=t[1]).url;else if(!v(a))throw new Error("Router redirect url must be a string!");var c=a.startsWith("/")?a:n.pathJoin(`/${e.trail.join("/")}`,a);if(c.startsWith("../"))throw new Error("Router redirect cannot traverse beyond the routing directory! ("+a+" >> "+c+")");l.method&&(r.method=l.method,o(l.method)&&(l.method=l.method[0])),r.event=s?e.event.retarget(s,{...l,_proxy:{url:c}}):e.event.retarget(c,l),r.source=e.destination.join("/"),r.destination=c.split("?").shift().split("/").map((e=>e.trim())).filter((e=>e)),r.trail=t[1].startsWith("/")?[]:e.trail.reduce(((e,t,s)=>e.length===s&&t===r.destination[s]?e.concat(t):e),[]),r.trailOnFile=e.trailOnFile.slice(0,r.trail.length)}return i(r)},a=e.destination.slice(e.trail.length);return r.pathname=a.join("/"),r.stepname=a[0],await s.call(t,e.event,e.arg,r)}return i(e)}if((e.currentSegmentOnFile||{}).dirExists)return i(e)}if(s)return await s.call(t,e.event,e.arg)};return i({destination:this.path,event:t,method:e,arg:r})}}{async readTick(e){var t=this.layout,r=Object.keys(this.layout);return e.trail?(e.currentSegment=e.destination[e.trail.length],e.currentSegmentOnFile=[e.currentSegment,"-"].reduce(((s,n)=>{if(s.index)return s;var i=`/${e.trailOnFile.concat(n).join("/")}`;return t[i]?{seg:n,index:i}:r.filter((e=>e.startsWith(`${i}/`))).length?{seg:n,dirExists:!0}:s}),{seg:null}),e.trail.push(e.currentSegment),e.trailOnFile.push(e.currentSegmentOnFile.seg),e.exports=t[e.currentSegmentOnFile.index]):(e.trail=[],e.trailOnFile=[],e.currentSegmentOnFile={index:"/"},e.exports=t["/"]),e}finalizeHandlerContext(e,t){return e.dirname=t.currentSegmentOnFile.index}pathJoin(...e){return xs.join(...e)}}class Ls extends Request{constructor(e,t){var r;e instanceof Request&&(r=e.clone()),super(...arguments),this.src=r}get destination(){return this.src?this.src.destination:""}clone(){return new this.constructor(this.src||super.clone())}get cookies(){return this._cookies||(this._cookies=bs(this.headers.cookie,{},";")),this._cookies}parse(e=!1){return this._submits&&!e||(this._submits=new Promise((async e=>{var t=this.clone(),r=t.headers["content-type"]||"",s={inputs:{},files:{},type:"application/x-www-form-urlencoded"===r||r.startsWith("multipart/")||!r&&!["get"].includes(t.method.toLowerCase())?"form-data":"application/json"===r?"json":"text/plain"===r?"plain":"other"};if("form-data"===s.type)try{const e=await t.formData();for(var[n,i]of e.entries())i instanceof File?vs(s.files,n,i):vs(s.inputs,n,i)}catch(e){}else s.inputs=await("json"===s.type?t.json():"plain"===s.type?t.text():t.arrayBuffer());e(s)}))),this._submits}}class Ns{constructor(e){const t=this.constructor;var r=(e,t)=>g(e)&&g(t)?r(Object.keys(e),Object.keys(t))&&r(Object.values(e),Object.values(t)):o(e)&&o(t)?e.length===t.length&&e.reduce(((e,r,s)=>e&&r===t[s]),!0):e===t;me.intercept(this,"set",((e,t,r)=>"hash"===e.name&&e.value&&!e.value.startsWith("#")?r("#"+e.value):"search"===e.name&&e.value&&!e.value.startsWith("?")?r("?"+e.value):r())),me.observe(this,(e=>{var s,n={};for(var i of e){if("href"===i.name&&1===i.related.length&&(delete(n=t.parseUrl(i.value)).query,delete n.href,s=!0),"query"===i.name&&(i.path.length>1||!i.related.includes("search"))){var a=t.toSearch(this.query);a!==this.search&&(n.search=a)}if("search"===i.name){var o=t.toQuery(n.search||this.search);r(o,this.query)||(n.query=o)}}if(!s){var l=this.origin,c=[this.username,this.password].filter((e=>e));2===c.length&&(l=`${this.protocol}//${c.join(":")}@${this.hostname}${this.port?`:${this.port}`:""}`);var h=[l,n.pathname||this.pathname,n.search||this.search,this.hash].join("");h!==this.href&&(n.href=h)}if(!p(n))return me.set(this,n)}),{subtree:!0,diff:!0}),me.observe(this,(e=>{e.forEach((e=>{if(e&&e.detail){if(!u(e.detail))throw new Error('"e.detail" can only be of type object.');if(e.detail.request&&!g(e.detail.request))throw new Error('"e.detail.request" can only be of type object.')}}))}),{diff:!0}),me.set(this,v(e)?t.parseUrl(e):Ns.copy(e))}toString(){return this.href}static from(e){return new this(g(e)?e:this.parseUrl(e))}static copy(e){var t=qs.reduce(((t,r)=>function(e,t,r=null){return K(e,g(t)?t:function(e,t=null){var r={};return 2===arguments.length&&(o(e)&&o(t)?e.forEach(((e,s)=>r[e]=t[s])):r[e]=t),r}(t,r))}(t,r,e[r])),{});return"query"in e||delete t.query,t}static parseUrl(e){var t=document.createElement("a");return t.href=e,this.copy(t)}static toQuery(e){return bs(e)}static toSearch(e){var t=Os(e);return t?"?"+t:""}}const qs=["protocol","username","password","host","hostname","port","origin","pathname","search","query","hash","href"];(function(e=null,t=!1){const s=qr.call(this);s.OOHTML||(s.OOHTML={},as.call(this,e,t),ls.call(this,e,t),ps.call(this,e,t),fs.call(this,e,t),ds.call(this,e,t),s.Observer=me,s.Subscript=r)}).call(window);const Bs={progress:{},online:navigator.onLine};class Qs{setActive(e,t=""){!1!==this.active&&(this.active=e,me.set(Bs,{method:t,error:"",progress:{active:e,determinate:!1,valuenow:0,valuetotal:NaN}}))}updateProgress(e,t,r){!1!==this.active&&me.set(Bs.progress,{phase:e,determinate:!isNaN(r),valuenow:t,valuetotal:r})}throw(e){!1!==this.active&&(this.error=!0,me.set(Bs,"error",e))}}function Vs(e){return arguments.length&&(void 0===e||void 0===e)}function Us(e){return"function"==typeof e}function Hs(e){return Array.isArray(e)||"object"==typeof e&&e||Us(e)}function zs(e){return function(e){return null===e||""===e}(e)||Vs(e)||!1===e||0===e||Hs(e)&&!Object.keys(e).length}function Ks(e,t){return"string"!=typeof e?e:e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+(void 0!==typeof t&&t?e.substr(1).toLowerCase():e.substr(1))}))}function Gs(e){return typeof e}function Js(e,...t){globalThis.WebQitInternalsRegistry||(globalThis.WebQitInternalsRegistry=new Map);var r,s,n=globalThis.WebQitInternalsRegistry.get(e);if(!n){if(n=new Map,!1===t[0])return n;globalThis.WebQitInternalsRegistry.set(e,n)}for(;r=t.shift();)if((s=n)&&!(n=n.get(r))){if(n=new Map,!1===t[0])return n;s.set(r,n)}return n}function Xs(e){return Array.isArray(e)}function Ys(e){return"function"==typeof e}function Zs(e){return Ys(e)||e&&"[object function]"==={}.toString.call(e)}function en(e){return e instanceof Number||"number"==typeof e}function tn(e){return en(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}function rn(e){return!Array.isArray(e)&&"object"==typeof e&&e}function sn(e){return e instanceof String||"string"==typeof e&&null!==e}function nn(e){return Array.isArray(e)||"object"==typeof e&&e||Ys(e)}function an(e){return arguments.length&&(void 0===e||void 0===e)}function on(e,t=!0){return Xs(e)?e:!t&&rn(e)?[e]:!1!==e&&0!==e&&function(e){return function(e){return null===e||""===e}(e)||an(e)||!1===e||0===e||nn(e)&&!Object.keys(e).length}(e)?[]:function(e){return!sn(e)&&!an(e.length)}(e)?Array.prototype.slice.call(e):rn(e)?Object.values(e):[e]}function ln(e,t,r=null){return r||!1!==r&&e.dotSafe&&t.dotSafe?e.join(".")===t.join("."):e.length===t.length&&e.reduce(((e,r,s)=>e&&r===t[s]),!0)}function cn(e,t,r=null){return Xs(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1!==t.indexOf(e))):[]}function hn(e){return(pn(e)?e:on(e).length?[e]:[]).reduce(((e,t)=>e.concat([on(t)])),[]).map((e=>un.resolve(e)))}new Map;class un extends Array{static resolve(e){return e.every((e=>!(e+"").includes(".")))?(new un).concat(e):e}get dotSafe(){return!0}}function pn(e){return on(e).reduce(((e,t)=>e||Xs(t)),!1)}function fn(e){return e.filter((e=>e||0===e)).length!==e.length}class dn{constructor(e){this.target=e,this.fireables=[],this.currentlyFiring=[]}add(e){return this.fireables.push(e),e}remove(e){this.fireables=this.fireables.filter((t=>t!==e))}removeMatches(e){this.match(e).forEach((e=>{this.fireables=this.fireables.filter((t=>t!==e))}))}match(e){return this.fireables.filter((t=>{var r=hn(t.filter),s=on((t.params||{}).tags),n=hn(e.filter),i=on((e.params||{}).tags);return(!e.originalHandler||t.handler===e.originalHandler)&&(!n.length||ln(n,r))&&(!i.length||i.length===s.length&&cn(s,i).length===i.length)}))}static _getFirebase(e,t,r=!0,s=this.__namespace){if(!nn(t))throw new Error('Subject must be of type object; "'+Gs(t)+'" given!');var n=this;return s&&globalThis.WebQitObserverNamespaceRegistry.has(e+"-"+s)&&(n=globalThis.WebQitObserverNamespaceRegistry.get(e+"-"+s),e+="-"+s),!Js(t,"firebases").has(e)&&r&&Js(t,"firebases").set(e,new n(t)),Js(t,"firebases").get(e)}static _namespace(e,t,r=null){if(e+="-"+t,2===arguments.length)return globalThis.WebQitObserverNamespaceRegistry.get(e);if(!(r.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${t} must be a subclass of ${this.name}.`);globalThis.WebQitObserverNamespaceRegistry.set(e,r),r.__namespace=t}}globalThis.WebQitObserverNamespaceRegistry||(globalThis.WebQitObserverNamespaceRegistry=new Map);class mn{constructor(e,t){this.target=e,this.handler=t.handler,this.filter=t.filter,this.params=t.params}disconnect(){this.disconnected=!0}}class gn extends mn{fire(e,t,r){return this.disconnected||this.filter&&!cn(on(this.filter),[e.type]).length?t(...Array.prototype.slice.call(arguments,2)):this.handler(e,r,t)}}function yn(e,t){var r=void 0;return nn(e)&&Object.keys(e).forEach(((s,n)=>{!1!==r&&(r=t(tn(s)?parseFloat(s):s,e[s],n))})),r}class vn{constructor(e,t){if(this.target=e,!t.type)throw new Error("Action type must be given in definition!");yn(t,((e,t)=>{Object.defineProperty(this,e,{value:t,enumerable:!0})})),Object.seal(this)}}class bn extends dn{add(e){return super.add(new gn(this.target,e))}fire(e,t=null){if(e instanceof vn||(e=new vn(this.target,e)),this.currentlyFiring.filter((t=>t.type===e.type&&t.name===e.name)).length)return t?t():void 0;this.currentlyFiring.push(e);const r=(s,...n)=>{var i=this.fireables[s];return i?i.fire(e,((...e)=>r(s+1,...e)),...n):t?t(...n):n[0]};var s=r(0);return this.currentlyFiring.pop(),s}static getFirebase(e,t=!0,r=null){return super._getFirebase("interceptor",...arguments)}static namespace(e,t=null){return super._namespace("interceptor",...arguments)}}function wn(e){return Js(e,!1).get(e)||e}function On(e,t,r={},s={}){if(!t||!nn(t))throw new Error("Target must be of type object!");t=wn(t);var n,i=function(s){return arguments.length?s:Reflect[e](t,...Object.values(r))};return(n=bn.getFirebase(t,!1,s.namespace))?n.fire({type:e,...r},i):i()}function xn(e,t,r,s={}){return On("apply",e,{thisArgument:t,argumentsList:r},s)}function En(e,t,r=null,s={}){return On("construct",e,arguments.length>2?{argumentsList:t,newTarget:r}:{argumentsList:t},s)}function jn(e,t=1){var r=0;e.forEach((e=>{r++}));var s=e.slice(e.length-r,t);return arguments.length>1?s:s[0]}function kn(e,t,r=null){return r||!1!==r&&e.dotSafe&&t.dotSafe?(e.join(".")+".").startsWith(t.join(".")+"."):t.reduce(((t,r,s)=>t&&r===e[s]),!0)}function Sn(e,t,r=null,s=!1){var n=function(e,t,r=null,s=!1){return t.length>e.length?-1:("number"==typeof r?s?e.slice(0,r+1+(r<0?e.length:0)):e.slice(r):e).reduce(((e,r,n)=>{var[i,a,o]=e;if(!s&&i>-1)return[i,a,o];var l=o+1,c=r===t[l]?0===l?[n,0]:[a,l]:[-1,-1];return c[1]===t.length-1&&(c[1]=-1,c[0]>-1)?[c[0]].concat(c):[i].concat(c)}),[-1,-1,-1])[0]+(s||"number"!=typeof r?0:r>-1?r:e.length-r)}(e,t,r,s);return-1===n?[]:e.slice(n+t.length)}class Cn{constructor(e,t=!1){this._={},this._.target=e,this._.cancellable=t,this._.propagationStopped=!1,this._.defaultPrevented=!1,this._.promisesInstance=null,this._.promises=[]}get target(){return this._.target}get cancellable(){return this._.cancellable}stopPropagation(){this._.propagationStopped=!0}get propagationStopped(){return this._.propagationStopped}preventDefault(){this._.defaultPrevented=!0}get defaultPrevented(){return this._.defaultPrevented}waitUntil(e){e instanceof Promise&&(this._.promises.push(e),this._.promisesInstance=null)}get promises(){return!this._.promisesInstance&&this._.promises.length&&(this._.promisesInstance=Promise.all(this._.promises)),this._.promisesInstance}respondWith(e){var t,r=rn(e)&&!an(e.propagationStopped)&&!an(e.defaultPrevented);!1===e||r&&e.propagationStopped?this.stopPropagation():!1===e||r&&e.defaultPrevented?this.preventDefault():(e instanceof Promise&&(t=e)||r&&(t=e.promises))&&this.waitUntil(t)}}class Pn extends mn{constructor(e,t){if(super(e,t),this.filters2D=hn(this.filter),this.filtersIsOriginally2D=pn(this.filter),this.filtersIsDynamic=this.filters2D.filter((e=>fn(on(e)))).length>0,this.filtersIsDynamic&&this.filters2D.length>1)throw new Error('Only one "Dynamic Filter" must be observed at a time! "'+this.filters2D.map((e=>"["+e.join(", ")+"]")).join(", ")+'" have been bound together.')}fire(e){if(this.disconnected||this.params.type&&(t=e=>this.params.type===e.type,!e.reduce(((e,r,s)=>e||t(r)),!1)))return;var t;const r=e=>!["set","def"].includes(e.type)||!this.params.diff||(Zs(this.params.diff)?this.params.diff(e.value,e.oldValue):e.value!==e.oldValue);var s=new Cn(this.target);if(this.filters2D.length){var n=e.filter((e=>this.filters2D.filter(((t,s)=>{var n=t.slice();return this.filtersIsDynamic&&e.path.forEach(((e,t)=>{n[t]=n[t]||0===n[t]?n[t]:e})),(!this.filtersIsDynamic||!fn(n))&&r(e)&&(!this.params.subtree&&ln(n,e.path)||this.params.suptree&&kn(n,e.path)&&(!tn(this.params.suptree)||Sn(n,e.path).length<=this.params.suptree)||this.params.subtree&&e.path.length>=n.length&&kn(e.path,n)&&(!tn(this.params.subtree)||Sn(e.path,n).length<=this.params.subtree))})).length));if(n.length)if(this.filtersIsOriginally2D||this.params.subtree){var i=n;rn(this.filter)&&(i={...this.filter},n.forEach(((e,t)=>{i[e.name]=e}))),s.respondWith(this.handler(i,s))}else n.forEach(((e,t)=>{s.respondWith(this.handler(e,s))}))}else(this.params.subtree||e.filter((e=>ln(e.path,[e.name]))).length===e.length)&&e.filter((e=>r(e))).length&&s.respondWith(this.handler(e,s));return s}}class _n{constructor(e,t){if(this.target=e,t.originalSubject||(this.originalSubject=e),!("type"in t))throw new Error("Mutation type must be given in definition!");if(!("name"in t))throw new Error("Property name must be given in definition!");yn(t,((e,t)=>{"path"===e&&(t=un.resolve(t)),Object.defineProperty(this,e,{value:t,enumerable:!0})})),this.path||Object.defineProperty(this,"path",{value:un.resolve([t.name]),enumerable:!0}),Object.seal(this)}}class $n extends dn{constructor(e){super(e),this.buffers=[]}add(e){return super.add(new Pn(this.target,e))}fire(e,t){var r=new Cn(this.target,t);return e=on(e,!1).map((e=>e instanceof _n?e:new _n(this.target,e))),this.buffers.length?(function(e,t=1){return arguments.length>1?jn(e.slice().reverse(),t).reverse():jn(e.slice().reverse())}(this.buffers)(e),r):(this.currentlyFiring.filter((t=>e.filter((e=>t.type===e.type&&t.name===e.name)).length)).length,this.fireables.forEach((s=>{if(r.propagationStopped&&t)return r;r.respondWith(s.fire(e))})),r)}static getFirebase(e,t=!0,r=null){return super._getFirebase("observer",...arguments)}static namespace(e,t=null){return super._namespace("observer",...arguments)}}function Tn(e,t,r=null,s={}){if(!(e=r||e)||!nn(e))throw new Error("Target must be of type object!");e=wn(e);var n=on(t),i=n.map((t=>{var i,a=function(s){return arguments.length?s:Js(e,"accessorizedProps").has(t)&&Js(e,"accessorizedProps").get(t).touch(!0)?Js(e,"accessorizedProps").get(t).get():r?Reflect.get(e,t,r):Reflect.get(e,t)};return(i=bn.getFirebase(e,!0,s.namespace))?i.fire({type:"get",name:t,related:n,receiver:r},a):a()}));return Xs(t)?i:i[0]}function An(e,t,r=!1,s=!1,n=!1){var i=0,a=e.shift();if((tn(a)||!0===a||!1===a)&&(i=a,a=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach(((e,o)=>{var l,c,h;(nn(e)||Zs(e))&&(r?(l=e,h=[],function(e,t){t=(t=t||Object.prototype)&&!Xs(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(l,c).forEach((e=>{!function(e,...t){t.forEach((t=>{e.indexOf(t)<0&&e.push(t)}))}(h,...Object.getOwnPropertyNames(e))})),h):Object.getOwnPropertyNames(e)).forEach((l=>{if(t(l,a,e,o)){var c=a[l],h=e[l];if((Xs(c)&&Xs(h)||rn(c)&&rn(h))&&(!0===i||i>0))a[l]=Xs(c)&&Xs(h)?[]:{},An([tn(i)?i-1:i,a[l],c,h],t,r,s,n);else if(Xs(a)&&Xs(e))s?a[l]=h:a.push(h);else try{n?Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e,l)):a[l]=e[l]}catch(e){}}}))})),a}function Dn(...e){return An(e,((e,t,r)=>!0),!1,!1,!1)}function Mn(e,t,r=null,s={}){if(!(e=wn(e))||!nn(e))throw new Error('Observable subjects must be of type object; "'+Gs(e)+'" given!');if(Zs(t)&&(s=arguments.length>2?r:{},r=t,t=null),!Zs(r))throw new Error('Handler must be a function; "'+Gs(r)+'" given!');var n,i=$n.getFirebase(e,!0,s.namespace),a={filter:t,handler:r,params:s};if((a.filter||"*"===a.params.subtree||a.params.subtree&&In(e))&&Fn(e,a.filter,a.params.subtree,s.namespace),a.params.unique&&(n=i.match({filter:t,params:s})).length){if("replace"!==a.params.unique)return n[0];i.remove(n[0])}return i.add(a)}function Rn(e,t,r,s=null,n={}){var i;if(e!==r&&(Mn(r,((r,s)=>{if(i=$n.getFirebase(e,!1,n.namespace)){var a=r.map((r=>{var s=r;do{if(s.target===e)return}while(s=s.src);var n={};return yn(r,((e,t)=>{"target"!==e&&"name"!==e&&"path"!==e&&"src"!==e&&(n[e]=t)})),n.name=t,n.path=[t].concat(r.path),n.originalSubject=r.originalSubject,n.src=r,new _n(e,n)})).filter((e=>e));if(a.length)return i.fire(a,s.cancellable)}}),{subtree:!0,...n,unique:!0,tags:[Wn,t,e]}),rn(s)&&(i=$n.getFirebase(e,!1,n.namespace)))){var a=Dn({name:t,type:"set",value:r,related:[t]},s);let e=i.fire(a,n.cancellable);if(n.eventTypeReturn)return e}}const Wn={};function Fn(e,t=null,r=!1,s=null){if(!e||!nn(e))throw new Error("Target must be of type object!");var n=$n.getFirebase(e,!0,s);if(n&&!n.build){n.build=r;var i=hn(t),a=!i.length||i.filter((e=>!e[0]&&0!==e[0])).length?Object.keys(e):i.map((e=>e[0])),o=i.length?i.map((e=>e.slice(1))).filter((e=>e.length)):null;n.subBuild=o&&o.length?o:null,a.forEach((t=>{var i=Tn(e,t,null,{namespace:s});try{nn(i)&&(Rn(e,t,i,null,params),(n.subBuild&&In(i)||(_isFunction(r)?r(i):r&&In(i)))&&Fn(i,n.subBuild,r,s))}catch(e){}}))}}const In=e=>(e instanceof Object||e instanceof Array||e instanceof Function)&&("undefined"==typeof window||e!==window);function Ln(e,t,r=null,s={}){if(!(e=wn(e))||!nn(e))throw new Error('Observable subjects must be of type object; "'+Gs(e)+'" given!');if(Zs(t)&&(s=arguments.length>2?r:{},r=t,t=null),r&&!Zs(r))throw new Error('Handler must be a function; "'+Gs(r)+'" given!');var n;if(n=$n.getFirebase(e,!1,s.namespace))return n.removeMatches({filter:t,originalHandler:r,params:s})}function Nn(e,t,r,s=null,n={}){var i;if(Ln(r,null,null,{...n,tags:[Wn,t,e]}),rn(s)&&(i=$n.getFirebase(e,!1,n.namespace))){var a=Dn({name:t,type:"del",oldValue:r,related:[t]},s);i.fire(a,n.cancellable)}}function qn(e,t,r={}){return On("has",e,{name:t},r)}function Bn(e,t,r,s={}){t=r.receiver||t;var n=r.keysOrPayload,i=r.value;if(!t||!nn(t))throw new Error("Target must be of type object!");rn(n)&&(s=i||{},i=null),t=wn(t);var a=bn.getFirebase(t,!1,s.namespace),o=$n.getFirebase(t,!1,s.namespace);const l=(n,i,l,c)=>{var h,u="set";e&&(u="defineProperty",i=(h=i||{}).value);var p,f=!1;qn(t,n,s)&&(f=!0,p=Tn(t,n,r.receiver,s));var d={name:n,type:u,value:i,receiver:r.receiver,related:l,detail:c,isUpdate:f,oldValue:p},m=function(e){return arguments.length&&(h?h=e:i=e),h?!(Js(t,"accessorizedProps",!1).has(n)&&!Js(t,"accessorizedProps").get(n).restore()||(Object.defineProperty(t,n,h),0)):Js(t,"accessorizedProps",!1).has(n)?Js(t,"accessorizedProps").get(n).set(i):(t[n]=i,!0)};if(a){var g=h?{type:"defineProperty",name:n,descriptor:h,receiver:r.receiver,related:l,detail:c,isUpdate:f,oldValue:p}:{type:"set",name:n,value:i,receiver:r.receiver,related:l,detail:c,isUpdate:f,oldValue:p};d.success=a.fire(g,m)}else d.success=m();return d.success&&d.value!==d.oldValue&&(nn(d.oldValue)&&Nn(t,n,d.oldValue,null,s),nn(d.value)&&(Rn(t,n,d.value,null,s),o&&(o.subBuild||o.build&&In(d.value))&&Fn(d.value,o.subBuild,o.build,s.namespace))),d};var c,h=[];Xs(n)||(sn(n)||en(n))&&(c=on(n))?h=c.map((e=>l(e,i,c,s.detail))):rn(n)&&(c=Object.keys(n))&&(h=c.map((e=>l(e,n[e],c,s.detail))));var u,p=h.filter((e=>!1!==e.success));return o?(u=o.fire(p,s.cancellable)).successCount=p.length:s.eventTypeReturn&&(u=new Cn(t)),s.eventTypeReturn?u:p.length>0}function Qn(e,t,r=null,s={}){return Bn(!0,e,{keysOrPayload:t,value:r},s)}function Vn(e,t,r={}){if(!e||!nn(e))throw new Error("Target must be of type object!");e=wn(e);var s,n,i=on(t),a=i.map((t=>{var s;qn(e,t,r)&&(s=Tn(e,t,null,r));var n,a={name:t,type:"deleteProperty",related:i,detail:r.detail,oldValue:s},o=function(r){return arguments.length?r:!(Js(e,"accessorizedProps",!1).has(t)&&!Js(e,"accessorizedProps").get(t).restore()||(delete e[t],0))};return(n=bn.getFirebase(e,!1,r.namespace))?a.success=n.fire({type:"deleteProperty",name:t,oldValue:s,related:i},o):a.success=o(),a.success&&nn(a.oldValue)&&Nn(e,t,a.oldValue,null,r),a})).filter((e=>!1!==e.success));return(s=$n.getFirebase(e,!1,r.namespace))?(n=s.fire(a,r.cancellable)).successCount=a.length:r.eventTypeReturn&&(n=new Cn(e)),r.eventTypeReturn?n:a.length>0}function Un(e,t,r={}){return On("getOwnPropertyDescriptor",e,{name:t},r)}function Hn(e,t={}){return On("getPrototypeOf",e,{},t)}function zn(e,t={}){return On("isExtensible",e,{},t)}function Kn(e,t={}){return On("ownKeys",e,{},t)}function Gn(e,t={}){return On("preventExtensions",e,{},t)}function Jn(e,t,r=null,s=null,n={}){return Bn(!1,e,arguments.length>3?{keysOrPayload:t,value:r,receiver:s}:{keysOrPayload:t,value:r},n)}function Xn(e,t,r={}){return On("setPrototypeOf",e,{prototype:t},r)}function Yn(e,t=[],r=!0){var s=0;return tn(arguments[0])&&nn(arguments[1])&&(s=arguments[0],e=arguments[1],t=arguments[2]||[]),An([s,{},e],((e,r,s)=>Zs(t)?t(e):!Xs(t)||!t.length||t.indexOf(e)>-1),!1,!1,r)}const Zn={apply:xn,construct:En,defineProperty:Qn,deleteProperty:Vn,get:Tn,getOwnPropertyDescriptor:Un,getPrototypeOf:Hn,has:qn,isExtensible:zn,ownKeys:Kn,preventExtensions:Gn,set:Jn,setPrototypeOf:Xn,accessorize:function(e,t=[],r={}){r=rn(t)?t:r;var s=(1===arguments.length?Object.keys(e):on(t)).map((t=>{if(Js(e,"accessorizedProps").has(t)&&Js(e,"accessorizedProps").get(t).touch(!0))return!1;const s=()=>{for(var r,s=e;!r&&(s=Object.getPrototypeOf(s));)r=Object.getOwnPropertyDescriptor(s,t);return r};var n,i,a=Object.getOwnPropertyDescriptor(e,t);a||(n={writable:!0,enumerable:!(t in e),configurable:!1!==r.configurable});var o={...a||n};"value"in o&&delete o.value,"writable"in o&&delete o.writable,o.get=()=>{if(l.ongoingGets.length)return l.get();l.ongoingGets.push(1);var s=Tn(e,t,null,r);return l.ongoingGets.pop(),s},o.set=s=>{if(l.ongoingSets.length)return l.set(s);l.ongoingSets.push(1);var n=Jn(e,t,s,null,r);return l.ongoingSets.pop(),n};var l={ongoingGets:[],ongoingSets:[],get:function(){var t=a;return t||(t=i?n:s()||n),t.get?t.get.call(e):t.value},set:function(t){var r=a;return r||(i?r=n:(r=s())?"value"in r&&(r=n,i=!0):(r=n,i=!0)),r.set||r.get?!!r.set&&r.set.call(e,t):(r.value=t,!0)},restore:function(){try{return this.intact()&&(a||i?Object.defineProperty(e,t,a||n):delete e[t],Js(e,"accessorizedProps").delete(t)),!0}catch(e){}return!1},intact:function(){return(Object.getOwnPropertyDescriptor(e,t)||{}).get===o.get},touch:function(e=!1){return this.intact()||!!e&&!this.restore()}};try{return Object.defineProperty(e,t,o),Js(e,"accessorizedProps").set(t,l),!0}catch(e){}return!1}));return Xs(t)?s:s[0]},unaccessorize:function(e,t=[],r={}){r=rn(t)?t:r;var s=(1===arguments.length?Object.keys(e):on(t)).map((t=>!Js(e,"accessorizedProps",!1).has(t)||Js(e,"accessorizedProps").get(t).restore()));return Xs(t)?s:s[0]},proxy:function(e,t={}){if(!nn(e))throw new Error('Object must be of type target; "'+Gs(e)+'" given!');var r=new Proxy(e,{apply:(e,r,s)=>xn(e,r,s,t),construct:(e,r,s=null)=>En(e,r,s,t),defineProperty:(e,r,s)=>Qn(e,r,s,t),deleteProperty:(e,r)=>Vn(e,r,t),get:(e,s,n=null)=>{var i=Tn(e,s,n,t);return!1!==t.proxyAutoBinding&&Zs(i)&&!function(e){return Ys(e)&&/^class\s?/.test(Function.prototype.toString.call(e))}(i)?i.bind(r):i},getOwnPropertyDescriptor:(e,r)=>Un(e,r,t),getPrototypeOf:e=>Hn(e,t),has:(e,r)=>qn(e,r,t),isExtensible:e=>zn(e,t),ownKeys:e=>Kn(e,t),preventExtensions:e=>Gn(e,t),set:(e,r,s,n=null)=>Jn(e,r,s,n,t),setPrototypeOf:(e,r)=>Xn(e,r,t)});return Js(r).set(r,e),r},unproxy:wn,observe:Mn,unobserve:Ln,intercept:function(e,t,r={}){if(!nn(e=wn(e)))throw new Error('Object must be of type target; "'+Gs(handler)+'" given!');var s={},n=!0;rn(t)||(Zs(t)?t={"":t}:Zs(r)&&(t={[t]:r},r=arguments.length>3?arguments[3]:{}),n=!1);var i=bn.getFirebase(e,!0,r.namespace);return Object.keys(t).forEach((e=>{if(!Zs(t[e]))throw new Error("Callback"+(null===e?"":" for "+e)+' must be a function; "'+Gs(t[e])+'" given!');var a,o={filter:e,handler:t[e],params:r};if(o.params.unique&&(a=i.match(o)).length){if("replace"!==o.params.unique)return a[0];i.remove(a[0])}n?s[e]=i.add(o):s=i.add(o)})),s},unintercept:function(e,t=null,r={}){if(!(e=wn(e))||!nn(e))throw new Error('Object must be of type target; "'+Gs(e)+'" given!');var s=bn.getFirebase(e,!1,r.namespace);_isObject(t)||(Zs(t)?t={[null]:t}:Zs(r)&&(t={[t]:r},r=arguments.length>3?arguments[3]:{}),isOriginallyObj=!1),(s=bn.getFirebase(e,!1,r.namespace))&&Object.keys(t).forEach((e=>{if(!Zs(t[e]))throw new Error("Callback"+(null===e?"":" for "+e)+' must be a function; "'+Gs(t[e])+'" given!');var n={filter:e,originalHandler:t[e],params:r};return s.removeMatches(n)}))},closure:function(e,...t){var r=t.map((e=>{if(!nn(e=wn(e)))throw new Error("Target must be of type object!");return{target:e,subjectCopy:Xs(e)?e.slice(0):Yn(e)}})),s=e(...t);const n=()=>{r.map((e=>{var t,r,s=Object.keys(e.subjectCopy),n=Object.keys(e.target),i=[],a=(t=s.concat(n),t.filter(((e,t,r)=>r.indexOf(e)===t))).map((t=>{if(e.subjectCopy[t]!==e.target[t]){i.push(t);var r={name:t,related:i,buffered:!0};return n.includes(t)?(r.type="set",r.value=e.target[t],s.includes(t)&&(r.isUpdate=!0)):r.type="del",s.includes(t)&&(r.oldValue=e.subjectCopy[t]),nn(e.subjectCopy[t])&&Nn(e.target,t,e.subjectCopy[t]),nn(e.target[t])&&Rn(e.target,t,e.target[t]),r}})).filter((e=>e));if(a.length&&(r=$n.getFirebase(e.target,!1)))return r.fire(a)}))};return s instanceof Promise?s.then(n):n(),s},build:Fn,link:Rn,unlink:Nn,Observers:$n,Interceptors:bn};function ei(e){return Array.isArray(e)}function ti(e){return"function"==typeof e}function ri(e,t=1){var r=0;e.forEach((e=>{r++}));var s=e.slice(e.length-r,t);return arguments.length>1?s:s[0]}function si(e,t=1){return arguments.length>1?ri(e.slice().reverse(),t).reverse():ri(e.slice().reverse())}function ni(e,t=1){for(var r=[],s=null;r.length<t&&(s=e[Math.floor(Math.random()*e.length)])&&-1===r.indexOf(s);)r.push(s);return arguments.length>1?r:r[0]}function ii(e){return arguments.length&&(void 0===e||void 0===e)}function ai(e){return ti(e)||e&&"[object function]"==={}.toString.call(e)}function oi(e,t,r=!1,s=!1,n=!1){if(-1===e.indexOf(t))return r?[]:void 0;var i=!0===r?e.length-1:!1===r?1:r,a=n?e.lastIndexOf(t)+1:e.indexOf(t)+1,o=ii(t)?[]:e.slice(a,a+i);return s&&o.length<i&&o.length<e.length&&(ai(s)&&!s(i-o.length)||(o=o.concat(e.slice(0,i-o.length)))),r?o:o[0]}function li(e,t,r=!1,s=!1,n=!1){if(-1===e.indexOf(t))return r?[]:void 0;var i=!0===r?e.length-1:!1===r?1:r,a=(e=e.slice().reverse(),n?e.lastIndexOf(t)+1:e.indexOf(t)+1),o=ii(t)?[]:e.slice(a,a+i);return s&&o.length<i&&o.length<e.length&&(ai(s)&&!s(i-o.length)||(o=o.concat(e.slice(0,i-o.length)))),r?o:o[0]}function ci(e,t,r,s=!1,n=!1,i=!1){var a=i?e.lastIndexOf(t):e.indexOf(t),o=i?e.lastIndexOf(r):e.indexOf(r);return s?li(e,t,o>a?a+e.length-o:a-o,(e=>ai(n)?n(e,"preceeding"):n),i):oi(e,t,o<a?e.length-a-1+o+1:o-a,(e=>ai(n)?n(e,"following"):n),i)}function hi(e,t=!1){var r=[];if(e.length)if(e.length%2){var s=Math.round(e.length/2)-1;r=e.slice(s,s+1)}else s=e.length/2-1,r=e.slice(s,s+2);return t?r:r[0]}function ui(e,t,r=null){return ei(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1===t.indexOf(e))):[]}class pi extends Array{constructor(...e){if(1===e.length&&"number"==typeof e[0]){const t=[];for(let r=0;r<e[0];r++)t.push({});e=t}if(e.some((e=>{return t=e,!(Array.isArray(t)||"object"==typeof t&&t||ti(t));var t})))throw new Error("Items must each be an object or array.");if(super(),this.params.itemStates&&!ei(this.params.itemStates))throw new Error('"params.itemStates" must be an array.');Zn.defineProperty(this,"state",{value:{}}),Zn.defineProperty(this,"now",{value:{}}),Zn.defineProperty(this,"prev",{value:{}});const t=(e,t)=>{if(!this.params.itemStates||this.params.itemStates.includes(e)){if(!this.state[e]){var r=new fi;Object.defineProperty(r,"_source",{value:this,enumerable:!1}),Zn.set(this.state,e,r)}this.state[e].includes(t)||(this._beforeSetState&&this._beforeSetState(e,t),Zn.proxy(this.state[e]).push(t),Zn.set(this.now,e,t),this._afterSetState&&this._afterSetState(e,t))}},r=(e,t)=>{if((this.state[e]||[]).includes(t)){this._beforeUnsetState&&this._beforeUnsetState(e,t);var r=this.state[e].indexOf(t);Zn.proxy(this.state[e]).splice(r,1),Zn.set(this.prev,e,t),this._afterUnsetState&&this._afterUnsetState(e,t)}};Zn.intercept(this,["set","deleteProperty"],((e,s,n)=>{if("length"===e.name)return n();if("set"===e.type){if(!function(e){return function(e){return e instanceof Number||"number"==typeof e}(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}(e.name))throw new Error("Named items cannot be set on a collection.");if(o=e.value,Array.isArray(o)||"object"!=typeof o||!o)throw new Error("Only items of type object are allowed in a collection.");var i=[],a=[];Object.keys(e.value).forEach((t=>{this.params.boolishStateTest&&!e.value[t]||i.push(t)})),e.isUpdate&&(a=ui(Object.keys(e.oldValue),i)),"clear_last"!==this.params.onBadState&&a.forEach((t=>{r(t,e.name)})),i.forEach((r=>{t(r,e.name)})),"clear_last"===this.params.onBadState&&a.forEach((t=>{r(t,e.name)})),Zn.intercept(e.value,["set","deleteProperty"],((s,n,i)=>{var a=this.params.boolishStateTest?s.value:"set"===s.type,o=this.params.boolishStateTest?!s.value:"deleteProperty"===s.type;return a?t(s.name,e.name):o&&r(s.name,e.name),i()}),{unique:"replace",tags:[this,"state-change-interception"]}),e.isUpdate&&(this.includes(e.oldValue)||Zn.unintercept(e.oldValue,["set","deleteProperty"],null,{tags:[this,"state-change-interception"]}))}else"deleteProperty"===e.type&&(Zn.unintercept(e.oldValue,["set","deleteProperty"],null,{tags:[this,"state-change-interception"]}),Object.keys(e.oldValue||{}).forEach((t=>{r(t,e.name)})));var o;return n()})),this.proxy().push(...e)}get params(){return{}}proxy(){return Zn.proxy(this)}remove(...e){e.reduce(((t,r,s)=>{var n=this.indexOf(r);if(-1===n)return t;if(t.length){if(parseInt(si(t))+1===n)return t.concat(n)}else if(s<e.length-1)return[n];return Zn.proxy(this).splice(t[0],t.length),[]}),[])}first(){return ri(this)}last(){return si(this)}rand(){return ni(this)}mid(...e){return hi(this,...e)}preceding(...e){return li(this,...e)}following(...e){return oi(this,...e)}between(...e){return ci(this,...e)}}class fi extends Array{first(){return this._source[ri(this)]}last(){return this._source[si(this)]}rand(){return this._source[ni(this)]}min(){return this._source[(e=this,(e=e.slice()).reduce(((e,t)=>Math.min(e,t)),e.shift()))];var e}max(){return this._source[(e=this,(e=e.slice()).reduce(((e,t)=>Math.max(e,t)),e.shift()))];var e}mid(...e){var t=hi(this,...e);return ei(t)?t.map((e=>this._source[e])):this._source[t]}preceding(...e){var t=li(this,...e);return ei(t)?t.map((e=>this._source[e])):this._source[t]}following(...e){var t=oi(this,...e);return ei(t)?t.map((e=>this._source[e])):this._source[t]}between(...e){var t=ci(this,...e);return ei(t)?t.map((e=>this._source[e])):this._source[t]}intersect(...e){return function(e,t,r=null){return ei(t)?e.filter((e=>r?t.filter((t=>r(e,t))).length:-1!==t.indexOf(e))):[]}(this,...e).map((e=>this._source[e]))}difference(...e){return ui(this,...e).map((e=>this._source[e]))}}class di extends pi{static createTree(e,t=null){return new this(...e.map((e=>(t&&ei(e[t])&&(e[t]=this.createTree(e[t],t)),e))))}_beforeSetState(e,t){if((this.params.multiplicity||{})[e]&&this.state[e].length>=this.params.multiplicity[e]){var r=this.items[this.state[e][0]];this.params.boolishStateTest?Zn.set(r,e,!1):Zn.del(r,e)}}}class mi extends di{get params(){return{itemStates:["active"],boolishStateTest:!0,multiplicity:{active:1e3}}}static fromOutline(e,t=!1,r=null,s=0){var n=Object.keys(e).map((n=>{var i=e[n];(i.meta||{}).readme;var a=e=>i[e]||((i.meta||{}).readme||{})[e],o=a("title")||((a("outline")||[]).length&&1===a("outline")[0].level?a("outline")[0].title:Ks(n));2===s&&(o="DOCS");var l={title:o,name:n,href:(r?r.href:"")+"/"+n,active:!1,desc:a("desc"),tags:a("tags"),_index:a("_index"),_subtreeType:a("_subtreeType")};return t&&(Object.defineProperty(l,"outline",{value:a("outline")||[],enumerable:!1}),r&&Object.defineProperty(l,"parent",{value:r,enumerable:!1})),zs(i.subtree)||(l.subtree=this.fromOutline(i.subtree,t,l,s+1)),l})).filter((e=>e));return n.sort(((e,t)=>"first"===e._index||"last"===t._index?-1:"first"===t._index||"last"===e._index?1:parseFloat(e._index||1e3)<parseFloat(t._index||1e3)||e.title<t.title?-1:1)),t&&n.reduce(((e,t,r)=>(e&&Object.defineProperty(t,"prev",{value:e,enumerable:!1}),n[r+1]&&Object.defineProperty(t,"next",{value:n[r+1],enumerable:!1}),t)),null),this.createTree(n)}advance(e,t=!1){var r=this.state.active.first(),s="next"===e?this.following(r,!1,t):this.preceding(r,!1,t);s&&Zn.set(s,"active",!0)}}function gi(e,t=1){var r=0;e.forEach((e=>{r++}));var s=e.slice(e.length-r,t);return arguments.length>1?s:s[0]}function yi(e,t=1){return arguments.length>1?gi(e.slice().reverse(),t).reverse():gi(e.slice().reverse())}var vi,bi;const wi={};async function Oi(e,t,r){const s=this.pathname.split("/").pop();if(!["tooling","cloud","community"].includes(s))return r();var n=[s].concat(r.pathname?r.pathname.split("/")[0]:[]).join("/");return wi[n]||(wi[n]=await(await r()).json()),["tooling","cloud","community"].includes(s)&&!r.pathname&&wi[n].projectsBody.forEach((t=>{t.categoryMismatch=e.url.query.category&&!t.categories.includes(e.url.query.category)})),JSON.parse(JSON.stringify(wi[n]))}async function xi(e,t,r){const s=await r(function(e,t){const r=e===vi?bi:mi.fromOutline(e.outline.subtree,!0),s=t?t.split("/"):[],n=s.reduce(((e,t,r)=>{var s,n;return(s=yi(e))&&(n=(s.subtree||[]).filter((e=>e.name===t))[0])?(0===r&&(s.overflowCollapsed=!1),n.overflowCollapsed=!1,e.concat(n)):e.concat(null)}),r.filter((t=>t.name===e.wbdiv))).filter((e=>e));var i=r.filter((t=>t.name===e.wbdiv))[0].subtree,a=n.reduce(((e,t,r)=>e.concat(0===r?`WebQit ${t.title}`:1===r||r===n.length-1?t.title:null)),[]).filter((e=>e)),o=a[1],l=a.reverse().join(" | ");return s.length&&(i=i.filter((e=>e.name===s[0]))[0].subtree),i&&i.forEach((e=>{e.isRoot=!0})),bi=r,vi=e,{nav:i,fullNav:r,breadcrumb:n,...e,projectTitle:o,title:l}}(t,r.pathname));return function(e,t,r){var s,n,i=e.document.templates.page;if(t.projectName&&(s=t.outline.subtree[t.wbdiv].subtree[t.projectName].bundles)&&(n=i.templates[t.wbdiv])&&!n.templates[t.projectName]){var a=e.document.createElement("template");a.setAttribute("name",t.projectName),a.innerHTML=s.html,n.content.append(a)}}(s,t,r.pathname),s}function Ei(e){return Us(e)||e&&"[object function]"==={}.toString.call(e)}function ji(e){return Array.isArray(e)}function ki(e){return e instanceof String||"string"==typeof e&&null!==e}function Si(e){return!Array.isArray(e)&&"object"==typeof e&&e}function Ci(e,t=!0){return ji(e)?e:!t&&Si(e)?[e]:!1!==e&&0!==e&&zs(e)?[]:function(e){return!ki(e)&&!Vs(e.length)}(e)?Array.prototype.slice.call(e):Si(e)?Object.values(e):[e]}function Pi(e){return e instanceof Number||"number"==typeof e}function _i(e){return Pi(e)||!0!==e&&!1!==e&&null!==e&&""!==e&&!isNaN(1*e)}function $i(e,...t){return t.forEach((t=>{e.indexOf(t)<0&&e.push(t)})),e}function Ti(e,t,r=!1,s=!1,n=!1){var i=0,a=e.shift();if((_i(a)||!0===a||!1===a)&&(i=a,a=e.shift()),!e.length)throw new Error("_merge() requires two or more array/objects.");return e.forEach(((e,o)=>{var l,c,h;(Hs(e)||Ei(e))&&(r?(l=e,h=[],function(e,t){t=(t=t||Object.prototype)&&!ji(t)?[t]:t;var r=[];for(e=e;e&&(!t||t.indexOf(e)<0)&&"default"!==e.name;)r.push(e),e=e?Object.getPrototypeOf(e):null;return r}(l,c).forEach((e=>{$i(h,...Object.getOwnPropertyNames(e))})),h):Object.getOwnPropertyNames(e)).forEach((l=>{if(t(l,a,e,o)){var c=a[l],h=e[l];if((ji(c)&&ji(h)||Si(c)&&Si(h))&&(!0===i||i>0))a[l]=ji(c)&&ji(h)?[]:{},Ti([_i(i)?i-1:i,a[l],c,h],t,r,s,n);else if(ji(a)&&ji(e))s?a[l]=h:a.push(h);else try{n?Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(e,l)):a[l]=e[l]}catch(e){}}}))})),a}function Ai(e,t,r=!1){for(var s=e.indexOf(t);s>-1&&(r||!1===r);)e.splice(s,1),r>0&&r--,s=e.indexOf(t);return e}class Di{constructor(e,t,r={}){this.el=e,this.$={el:e,readyCallbacks:[],finishCallbacks:[],cancelCallbacks:[],params:{...r},callFinish(){this.finishCallbacks.forEach((e=>{e(this.el)}))},callCancel(){this.cancelCallbacks.forEach((e=>{e(this.el)}))}},this.$.params.delay=Pi(this.$.params.delay)?this.$.params.delay:0,this.$.params.duration=Pi(this.$.params.duration)?this.$.params.duration:400,this.$.params.endDelay=Pi(this.$.params.endDelay)?this.$.params.endDelay:0}get anim(){return this.$.anim}onfinish(e){if(!Ei(e))throw new Error("Onfinish() accepts only a function.");return this.$.finishCallbacks.push(e),this}oncancel(e){if(!Ei(e))throw new Error("Oncancel() accepts only a function.");return this.$.cancelCallbacks.push(e),this}progress(){return this.$.anim?this.$.anim.currentTime/this.$.anim.effect.duration:0}seek(e){if(!Pi(e))throw new Error("Seek() accepts only a numeric value.");return this.ready(((t,r)=>{var s=r.duration+(r.delay||0)+(r.endDelay||0);t.currentTime=Math.max(0,Math.min(e*s,s))})),this}reverse(){return this.ready((e=>e.reverse())),this}play(){return new Promise(((e,t)=>{this.ready((r=>{r.play(),this.onfinish((()=>e(this))),this.oncancel((()=>t(this)))}),t)}))}pause(){return this.ready((e=>e.pause())),this}finish(){return this.ready((e=>e.finish())),this}cancel(){return this.ready((e=>e.cancel())),this}}const Mi=class{constructor(e=[],t={}){this.$={animations:[],finishCallbacks:[],cancelCallbacks:[],params:t},e.forEach((e=>{this.add(e)}))}add(e){if(!(e instanceof Di))throw new Error("Argument#1 must be an animation API instance!");switch(this.$.animations.push(e),this.$.addCallback&&this.$.addCallback(e),this.$.playState){case"paused":e.pause();break;case"cancelled":e.cancel();break;case"finished":e.finish()}return this.$.reversed&&e.reverse(),this}remove(e){if(!(e instanceof Di))throw new Error("Argument#1 must be an animation API instance!");return Ai(this.$.animations,e),this.$.removeCallback&&this.$.removeCallback(e),this}onfinish(e){if(!Ei(e))throw new Error("Onfinish() accepts only a function.");return this.$.finishCallbacks.push(e),this}oncancel(e){if(!Ei(e))throw new Error("Oncancel() accepts only a function.");return this.$.cancelCallbacks.push(e),this}progress(){return this.$.animations.reduce(((e,t)=>e.progress()+t.progress()),0)/this.$.animations.length}play(){return this.$.playState="playing",new Promise(((e,t)=>{var r,s,n=()=>{r||(r=!0,this.$.finishCallbacks.forEach((e=>e())),e())},i=e=>{s||(s=!0,this.$.cancelCallbacks.forEach((e=>e())),t(e))},a=this.$.animations.length;this.$.animations.forEach((e=>{e.play().then((()=>{!--a>0&&n()})).catch(i)})),this.$.addCallback=e=>{"playing"===this.$.playState&&(a++,e.play().then((()=>{!--a>0&&n()})).catch(i))},this.$.removeCallback=e=>{a--}}))}seek(e,t=[]){this.each((t=>t.seek(e)),t)}reverse(e=[]){this.$.reversed=!this.$.reversed,this.each((e=>e.reverse()),e)}pause(e=[]){this.$.playState="paused",this.each((e=>e.pause()),e)}finish(e=[]){this.$.playState="finished",this.each((e=>e.finish()),e)}cancel(e=[]){this.$.playState="cancelled",this.each((e=>e.cancel()),e)}clear(e=[]){this.$.animations=this.$.animations.filter((t=>{if(!e||!Ci(e,!1).includes(t.el))return!1}))}each(e,t=[]){this.$.animations.forEach((r=>{t&&Ci(t,!1).includes(r.el)||e(r)}))}};function Ri(e,t){var r=void 0;return Hs(e)&&Object.keys(e).forEach(((s,n)=>{!1!==r&&(r=t(_i(s)?parseFloat(s):s,e[s],n))})),r}function Wi(e,t){return void 0===e?"":e.split(/(?=[A-Z])/).join(t||" ")}function Fi(e){var t=(!0,Ks(e.replace(/-/g," ")).replace(/ /g,""));if(this.prefix.api+t in this.window.document.body.style)return this.prefix.css+Wi(e,"-")}function Ii(e,t,r){var s={},n=Ci(e),i=(e,i)=>{var a=Wi(i,"-").toLowerCase();if("auto"===r)s[a]=t(Fi.call(this,a)||a,n[e]);else{if(r){var o=Fi.call(this,a);o&&(s[o]=t(o,n[e]))}s[a]=t(a,n[e])}};return Ri(n,((e,t)=>{i(e,t)})),ji(e)||r||"size"===e||"offsets"===e?s:s[e]}const Li=class{constructor(e){Ri(e,((e,t)=>{["rotate","scale","skew","translate"].includes(e)&&(this[e]=ji(t)?new Li[e](...t):new Li[e](t))}))}toString(){return["rotate","scale","skew","translate"].reduce(((e,t)=>e+(this[t]&&this[t].length?" "+this[t]:"")),"").trim()}static parse(e,t){var r=function(e){return Math.round(100*e)/100},s=function(e){var t=180*e/Math.PI;return r(t)},n=function(t){var r=[];if(e.window.WebKitCSSMatrix)return[(r=new e.window.WebKitCSSMatrix(t)).a,r.b,r.c,r.d,r.e,r.f];for(var s,n=/[\d\.\-]+/g;s=n.exec(t);)r.push(+s);return r}(t),i=n[0],a=n[1],o=n[2],l=n[3];if(i*l==a*o)throw new Error("Dramatic.parseTransform: matrix is singular");var c=Math.sqrt(i*i+a*a),h=(i/=c)*o+(a/=c)*l;o-=i*h,l-=a*h;var u=Math.sqrt(o*o+l*l);return h/=u,i*(l/=u)<a*(o/=u)&&(i=-i,a=-a,h=-h,c=-c),new Li({translate:[n[4],n[5]],scale:[r(c),r(u)],rotate:s(Math.atan2(a,i)),skew:s(Math.atan(h))})}};Li.rotate=class extends Array{toString(){return"rotate("+this.map((e=>_i(e)?e+"deg":e)).join(", ")+")"}},Li.scale=class extends Array{toString(){return"scale("+this.join(", ")+")"}},Li.skew=class extends Array{toString(){return"skew("+this.map((e=>_i(e)?e+"deg":e)).join(", ")+")"}},Li.translate=class extends Array{toString(){return"translate("+this.map((e=>_i(e)?e+"px":e)).join(", ")+")"}};const Ni=Li;function qi(e,t,r=null){var s=this.window.getComputedStyle(e,r);return Ii.call(this,t,((e,t)=>{var r=s.getPropertyValue(Fi.call(this,e)||e);return"width"!==e&&"height"!==e||""!==r||(r="0px"),"transform"===e&&(r=Ni.parse(this,r)),r}),!1)}const Bi=["width","height","top","left","right","bottom","padding","padding-top","padding-left","padding-right","padding-bottom","margin","margin-top","margin-left","margin-right","margin-bottom","border-width","border-top-width","border-left-width","border-right-width","border-bottom-width","outline-width","outline-top-width","outline-left-width","outline-right-width","outline-bottom-width"];function Qi(e,t,r=null){t=ki(t)?function(e,t=null){var r={};return 2===arguments.length&&(ji(e)&&ji(t)?e.forEach(((e,s)=>r[e]=t[s])):r[e]=t),r}(t,r):t;var s={inset:["top","right","bottom","left"],margin:["top","right","bottom","left"],padding:["top","right","bottom","left"]};return Ii.call(this,Object.keys(t),((r,n)=>{var i=t[n];Ri(s,((e,t)=>{r===e&&(Si(i)&&(i=t.map((e=>i[e])).filter((e=>!Vs(e)))),ji(i)&&(i=i.join(" ")))})),"transform"!==r||!Si(i)||i instanceof Ni||(i=new Ni(i).toString()),e.style[r]=Bi.includes(r)&&_i(i)?i+"px":i}),"auto"),e}function Vi(e,t,r="auto"){var s=e.getAttribute("style");return"all"===t&&(t=s.split(";").map((e=>e.split(":")[0]))),Ii.call(this,t,(e=>(new RegExp(";[ ]*?"+e+":([^;]+);?","g").exec(";"+s)||["",""])[1].trim()),r)}function Ui(e,t,r=null){return this.Reflow.onread(((s,n)=>{try{s(Ei(t)?t(e):qi.call(this,e,t,r))}catch(e){n(e)}}),!0)}function Hi(e,t,r=null){return this.Reflow.onwrite(((s,n)=>{try{s(Ei(t)?t(e):Qi.call(this,e,t,r))}catch(e){n(e)}}),!0)}async function zi(e,t,r=null,s=(null.asyncMode=!1)){var n=Si(t)?Object.keys(t):t;s=Si(t)?r:s;var i=Vi.call(this,e,n);await(asyncMode?Hi:Qi).call(this,e,t,r);var a=(asyncMode?Ui:qi).call(this,e,s||n);return await(asyncMode?Hi:Qi).call(this,e,i),a}function Ki(e,t=[]){return Ti([{},e],((e,r,s)=>{if(!Ei(s[e]))return Ei(t)?t(e):!ji(t)||!t.length||t.indexOf(e)>-1}),!1,!1,!1)}function Gi(e,t=!1){var r=document.styleSheets,s=function(t){try{for(var r=0;r<t.cssRules.length;r++){var s=t.cssRules[r];if(!0===e(s))return!0}}catch(e){}};if(t){for(var n=r.length-1;n>=0;n--)if(!0===s(r[n]))return!0}else for(n=0;n<r.length;n++)if(!0===s(r[n]))return!0}function Ji(e){var t={};return e.split(";").filter((e=>e)).forEach((e=>{e=e.split(":"),t[e[0].trim()]=e[1].trim()})),t}function Xi(e,t,r=!0){var s=ji(e)?e.join("|"):e;if(!t&&Zi[s])return Zi[s];var n=[];return Gi.call(this,(t=>{if((t.type===this.window.CSSRule.KEYFRAMES_RULE||t.type===this.window.CSSRule[this.prefix.api.toUpperCase()+"_KEYFRAMES_RULE"])&&(ji(e)?e:[e]).indexOf(t.name)>-1)return n=n.concat(n,function(e){for(var t=[],s=0;s<e.cssRules.length;s++){var n=e.cssRules[s],i=Ji(n.cssText.replace(n.keyText,"").replace("{","").replace("}","").trim()),a=(n.keyText||" ").split(",").map((e=>"from"===e?0:"to"===e?1:parseInt(e)/100));if(r)for(Yi(i,["animation-","transition-"]);a.length;){var o=Ki(i);o.offset=a.shift(),t.push(o)}else i.offset=a.length>1?a:a[0],t.push(i)}return t.sort(((e,t)=>e.offset===t.offset?0:e.offset>t.offset?1:-1))}(t)),!0}),!0),Zi[s]=n,n}const Yi=function(e,t,r=""){ji(r)?r.forEach((t=>Yi(e,t))):(e[r+"timing-function"]&&(e.easing=e[r+"timing-function"],delete e[r+"timing-function"]),e[r+"fill-mode"]&&(e.fill=e[r+"fill-mode"],delete e[r+"fill-mode"]),e[r+"iteration-count"]&&(e.iterations=e[r+"iteration-count"],delete e[r+"iteration-count"],"infinite"===e.iterations&&(e.iterations=1/0)))},Zi={};function ea(e){return e=e.indexOf("-")?e:Wi(e,"-"),this.window.getComputedStyle(this.window.document.body).getPropertyValue("--"+e)}const ta={};class ra extends Di{constructor(e,t,r={}){super(e,t,r),this.$.params.fill=this.$.params.fill||"both","duration"in this.$.params||(this.$.params.duration=400),this.$.params.easing&&-1===["ease-in","ease-out","ease-in-out"].indexOf(this.$.params.easing)&&-1===this.$.params.easing.indexOf("(")&&(this.$.params.easing=ea.call(WQ.DOM,this.$.params.easing)||this.$.params.easing);var s={inset:["top","right","bottom","left"],margin:["top","right","bottom","left"],padding:["top","right","bottom","left"]};const n=e=>{e=e.slice();var t={},n={};Ri(e,((e,r)=>{Ri(s,((e,t)=>{r[e]&&(Si(r[e])&&(r[e]=t.map((t=>r[e][t])).filter((e=>!Vs(e)))),ji(r[e])&&(r[e]=r[e].join(" ")))})),!r.transform||!Si(r.transform)||r.transform instanceof Ni||(r.transform=new Ni(r.transform).toString()),function(e,...t){return t.forEach((t=>Ai(e,t))),e}(Object.keys(r),"offset","easing").forEach((e=>{Bi.includes(e)&&_i(r[e])&&(r[e]+="px"),t[e]=void 0===t[e]?r[e]:t[e],n[e]=r[e]}))}));try{var i=this.el.animate(e,r)}catch(e){return void(this.$.error=e)}this.$.params.reverse&&i.reverse(),i.effect||(i.effect={}),i.effect.duration||(i.effect.duration=this.$.params.duration),i.onfinish=()=>{this.$.params.cancelForCss&&(i.cancel(),"forwards"!==this.$.params.fill&&"both"!==this.$.params.fill||Qi.call(WQ.DOM,this.el,n)),this.$.callFinish()},i.oncancel=()=>this.$.callCancel(),this.$.anim=i,this.$.firstFrame=t,this.$.lastFrame=n,this.$.readyCallbacks.length&&this.$.readyCallbacks.forEach((e=>e(i,this.$.params,t,n)))};Ei(t)?t(e,n):ra.createCallback(e,t,n,(e=>{this.$.error=e}),this.$.params.animNameNoCache)}ready(e,t){this.$.error?t&&t(this.$.error):this.$.anim?e(this.$.anim,this.$.params,this.$.firstFrame,this.$.lastFrame):this.$.readyCallbacks.push(e)}static createCallback(e,t,r,s,n){var i=Si(t)&&!Object.values(t).filter((e=>ji(e))).length,a=ji(t)&&t.length>1&&zs(t[0]);if(i||a)WQ.DOM.Reflow.onread((()=>{a?(t.shift(),ra.createCallback(e,[qi.call(WQ.DOM,e,Object.keys(t[0])),...t],r,s,n)):ra.createCallback(e,[qi.call(WQ.DOM,e,Object.keys(t)),t],r,s,n)}));else{if(ki(t)&&(ta[t]&&ta[t].length&&!n||(ta[t]=Xi.call(WQ.DOM,t),!ta[t].length&&s&&s('Animation name "'+t+'" not found in any stylesheet!')),t=ta[t]),ji(t)){var o=[];if(Ri(t,((e,t)=>{"auto"===t.height&&$i(o,e),"auto"===t.width&&$i(o,e)})),o.length)return void zi.call(WQ.DOM,e,{width:"auto",height:"auto"},(e=>e.getBoundingClientRect())).then((e=>{o.forEach((r=>{"auto"===t[r].width&&(t[r].width=e.width+"px"),"auto"===t[r].height&&(t[r].height=e.height+"px")})),r(t)}))}r(t)}}}class sa extends Di{constructor(e,t,r={}){super(e,t,r);var s=Symbol.for("play-js-ani2");const n=this;this.$.anim={el:e,timing:{currentTime:0,delay:n.$.params.delay,duration:n.$.params.duration,endDelay:n.$.params.endDelay,calculate(){var e="playing"===this.state||"paused"===this.state,t=e?this.delay:n.$.params.delay,r=e?this.duration:n.$.params.duration,s=e?this.endDelay:n.$.params.endDelay,i=t,a=i+r,o=a+s;this.delay=Math.max(0,Math.min(t,this.currentTime>=i?0:i-this.currentTime)),this.duration=Math.max(0,Math.min(r,this.currentTime>=a?0:a-this.currentTime)),this.endDelay=Math.max(0,Math.min(s,this.currentTime>=o?0:o-this.currentTime))},start(e){n.$.anim.el[s]&&n.$.anim.el[s].finish(),n.$.anim.el[s]=n.$.anim,this.state="playing",this.calculate(),this.delay||e(0),this.interval=setInterval((()=>{this.currentTime++,this.currentTime===this.delay&&e(0),this.currentTime===this.delay+this.duration&&e(1),this.currentTime===this.delay+this.duration+this.endDelay&&(this.state="finished",this.stop(),e(2),this.currentTime=0)}),1)},stop(){clearInterval(this.interval)}},set currentTime(e){this.timing.currentTime=e,"playing"===this.timing.state&&(this.timing.stop(),this.play())},get currentTime(){return this.timing.currentTime},_callBegin(){return t(this.el,"begin",this.reversed,this.currentTime)},_callPause(){return t(this.el,"pause",this.reversed,this.currentTime)},_callEnd(){return t(this.el,"end",this.reversed,this.currentTime)},play(){this.timing.start((e=>{0===e?this._callBegin():1===e?this._callEnd():2===e&&n.$.callFinish()}))},reverse(){this.reversed=!this.reversed,"playing"===this.timing.state&&(this.timing.stop(),this.play())},pause(){!1!==this._callPause()&&(this.timing.state="paused",this.timing.stop())},finish(){this.timing.state="finished",this.timing.stop(),this._callEnd(),n.$.callFinish()},cancel(){this.timing.state="cancelled",this.timing.stop(),n.$.callCancel()}},this.$.anim.effect||(this.$.anim.effect={}),this.$.anim.effect.duration||(this.$.anim.effect.duration=this.$.params.delay+this.$.params.duration+this.$.params.endDelay)}ready(e,t){e(this.$.anim,this.$.params)}}const na=class{constructor(e=[],t={}){this.$={},this.$.entries=[],this.$.params=t,this.nowPlaying=new Mi,e.forEach((e=>{this.add(e,t.timing)})),this.queue=[]}add(e,t={},r={},s=null,n=null){if(!this.$.entries.filter((t=>t.el===e)).length){var i={el:e,effect:t,params:r,onfinish:s,oncancel:n};this.$.entries.push(i),this.nowPlayingAdd(i)}}remove(e){this.$.entries=this.$.entries.filter((t=>t.el!==e))}nowPlayingAdd(e){if(this.nowPlayingEffect){var t=(e,t,r,s)=>{var n=new(Ei(r)?sa:ra)(t.el,r,s);e.add(n),s.always&&n.onfinish((()=>{e.remove(n),this.remove(t.el)})),t.onfinish&&n.onfinish(t.onfinish),t.oncancel&&n.oncancel(t.oncancel)},r=(e,s)=>{var n=s[0],i=zs(n.effect)?this.nowPlayingEffect:n.effect,a=function(...e){return Ti(e,((e,t,r)=>!0),!1,!1,!1)}({},this.nowPlayingParams,n.params);if(a.delay=a.delay||0,Pi(a.lag)||Pi(a.endLag)){var o=yi(e.$.animations);if(o)return void o.ready(((o,l)=>{Pi(a.lag)?a.delay+=l.delay+a.lag:a.delay+=l.delay+parseFloat(l.endDelay)+l.duration+a.endLag,a.delay-=Pi(o.currentTime)?o.currentTime:0,t(e,n,i,a),s.shift(),s.length&&r(e,s)}))}t(e,n,i,a),s.shift(),s.length&&r(e,s)};this.queue.push(e),1===this.queue.length&&r(this.nowPlaying,this.queue)}}play(e={},t={}){return this.nowPlayingEffect&&(this.nowPlaying=new Mi,this.queue=[]),this.nowPlayingEffect=e,this.nowPlayingParams=t,(t.reverseList?this.$.entries.slice().reverse():this.$.entries).forEach((e=>{t.except&&Ci(t.except,!1).includes(e.el)||t.only&&!Ci(t.only,!1).includes(e.el)||this.nowPlayingAdd(e)})),this.nowPlaying.play()}};function ia(e,t,r={}){return new(Ei(t)?sa:ra)(e,t,r).play().then((()=>e))}const aa=new Map,oa=(e,t,r)=>{if(!aa.has(t)){const e=new Map;aa.set(t,{o:new window.IntersectionObserver((t=>{t.forEach((t=>{e.get(t.target)(t)}))}),{rootMargin:t}),c:e})}var s=aa.get(t);s.c.set(e,r),s.o.observe(e)},la=e=>(e.getAttribute("play-seq")||"").split(";").map((e=>e.trim())).filter((e=>e)).reduce(((e,t)=>{var[r,s]=t.split(":").map((e=>e.trim()));return e[r]=["duration","lag","always","autoOffStateReverse"].includes(r)?parseInt(s):s,e}),{lag:100,rootMargin:"0px",duration:200,animIn:"",animInAlt:"",always:!0,fill:"forwards",easing:"ease-out",cancelForCss:!1,autoOffStateReverse:!1});!function(e){const{ul:t,li:r,div:s}=function(e){return{ul:class extends e.HTMLUListElement{connectedCallback(){this._params=la(this),this._params.animIn&&(this._sequenceA=new na,this._sequenceA.play(this._params.animIn,this._params)),this._params.animInAlt&&(this._sequenceB=new na,this._sequenceB.play(this._params.animInAlt,this._params))}sequenceAdd(e){oa(e,this._params.rootMargin,(e=>{e.isIntersecting&&(e.boundingClientRect.top<0?this._params.animInAlt&&this._sequenceB.add(e.target):this._params.animIn&&this._sequenceA.add(e.target))}))}},li:class extends e.HTMLLIElement{connectedCallback(){this.parentNode.sequenceAdd&&this.parentNode.sequenceAdd(this)}},div:class extends e.HTMLDivElement{connectedCallback(){var e,t,r,s,n=la(this),i={...n};i.reverse=!i.reverse,i.fill="forwards"===i.fill?"backwards":"forwards",oa(this,n.rootMargin,(a=>{a.isIntersecting?a.boundingClientRect.top<0?n.animInAlt&&!t&&(t=!0,ia(a.target,n.animInAlt,{...n}).then((()=>{t=!1}))):n.animIn&&!e&&(e=!0,ia(a.target,n.animIn,{...n}).then((()=>{e=!1}))):n.autoOffStateReverse&&(a.boundingClientRect.top<0?!i.animInAlt||t||s||(s=!0,ia(a.target,i.animInAlt,{...i}).then((()=>{s=!1}))):!i.animIn||e||r||(r=!0,ia(a.target,i.animIn,{...i}).then((()=>{r=!1}))))}))}}}}(e);e.customElements.define("play-seq-ul",t,{extends:"ul"}),e.customElements.define("play-seq-li",r,{extends:"li"}),e.customElements.define("play-seq-div",s,{extends:"div"})}(window),t.d({},{});const{Observer:ca}=window.WebQit,ha=e=>class extends(e||HTMLElement){static get subscriptBlocks(){return["render"]}render(){}},ua=e=>class extends(ha(e)){scrollTimeline(e={},t=null){const r=e.scrollOffsets||[],s=e=>r[e]instanceof CSSStyleValue?r[e]:"string"==typeof r[e]?CSSStyleValue.parse(r[e]):{target:this,edge:0===e?"end":"start",threshold:0,...r[e]||{}},n=new ScrollTimeline({scrollSource:e.source||e.scrollSource||document.documentElement,timeRange:e.timeRange||1,orientation:e.orientation||"vertical",scrollOffsets:[s(0),s(1)]});return t&&(this.state[t]=n),n}},pa=e=>class extends(ha(e)){bindIndicators(e){this.observer&&this.observer.disconnect(),this.headings=[],Array.from(this.querySelectorAll("h1,h2,h3,h4,h5,h6")).reduce(((e,t)=>{var r=parseInt(t.nodeName.substr(1));let s={el:t,level:r};if(e)if(e.level===s.level)s.parent=e.parent;else if(e.level<s.level)s.parent=e;else if(e.level>s.level){let t=e;for(;(t=t.parent)&&!s.parent;)t.level===s.level&&(s.parent=t.parent)}return this.headings.push(s),s}),null);let t=(e,r)=>{ca.set(e,"active",r),e.parent&&t(e.parent,r?2:r)};this.observer=new IntersectionObserver((e=>{let r=e.reduce(((e,t)=>t.isIntersecting&&t.boundingClientRect.top>0?{el:t.target,event:"entry"}:t.boundingClientRect.top>0&&!e?{el:t.target,event:"exit"}:e),null);if(r){let e;this.headings.reduce(((s,n)=>(n.el===r.el?"entry"===r.event?e=n:(e=s,t(n,0)):t(n,0),n)),null),e&&t(e,1)}}),{threshold:0,rootMargin:"0px 0px -50% 0px"}),this.headings.forEach((e=>this.observer.observe(e.el)));let r=e=>{e.forEach((e=>{let t=e.uri||(e.href?e.href.split("#").pop():"");this.headings.forEach((r=>{r.el.id===t&&ca.set(e,"scrollSpy",r)})),e.subtree&&r(e.subtree)}))};r(e)}},fa=e=>class extends(ha(e)){connectedCallback(){super.connectedCallback(),this.hasOverflowVisibility=this.getAttribute("overflow-visibility"),this.overflowVisibility=!!parseInt(this.hasOverflowVisibility)}render(){this.state.items&&($(this).list(this.state.items),this.hasOverflowVisibility&&$(this).classAsync("hidden",this.state.overflowCollapsed===this.overflowVisibility))}},da=e=>class extends(ha(e)){connectedCallback(){super.connectedCallback(),this.defaultActive=this.hasAttribute("defaultactive"),this.hasOverflowVisibility=this.getAttribute("overflow-visibility"),this.overflowVisibility=!!parseInt(this.hasOverflowVisibility)}toggle(){this.state.expanded=!this.state.expanded}toggleWith(...e){$(e.filter((e=>e))).on("click",(()=>{this.toggle()}),{unique:!0,tags:[this]})}_matchQueryHash(){if(this.state.scrollSpy)return{active:this.state.scrollSpy.active,hasActive:2===this.state.scrollSpy.active};let e=this.state.uri||(this.state.href?this.state.href.split("#").pop():"");return{active:"#"+e===document.state.url.hash||!e&&!document.state.url.hash&&this.defaultActive}}_matchQueryParams(){return{active:this.state.href.split("?").pop().split("&").reduce(((e,t)=>{if(!e)return t=t.split("="),!(document.state.url.query[t[0]]!==t[1]&&(t[1]||t[0]in document.state.url.query||!this.defaultActive))}),!1)}}_matchQueryPath(){var e=this.state.href,t=document.state.url.pathname+"/",r=e+"/",s=t.startsWith(r),n=t.substr(r.length);if(s)var i=s&&n&&n.indexOf("/")>0;return{active:s,hasActive:i,expanded:this.state.subtree&&(this.state.isRoot||i)}}isActivePage(e=this.state.href,t=this.state.uri,r=document.state.url,s=document.state.url?.href,n=this.state.scrollSpy?.active){if(!e&&!t||!s)return;let i;console.log("::::::::::::href",e,"::::::::::::uri",t),t||e.includes("#")?(console.log("::::::::::::href.includes('#')",e.includes("#")),i=this._matchQueryHash()):e.includes("?")?(console.log("::::::::::::href.includes('?')",e.includes("?")),i=this._matchQueryParams()):r.pathname&&(console.log("::::::::::::documentUrl.pathname",r.pathname),i=this._matchQueryPath()),console.log("::::::::::::match",i),this.state.active=i.active,this.state.hasActive=i.hasActive,this.state.expanded=i.expanded}render(){let e=this.namespace.href||this.querySelector("a"),t=this.namespace.text||e;this.state.title&&($(e).attr("href",this.state.href||"#"+this.state.uri),$(t).html(this.state.title),$(this).classAsync("active",this.state.active),$(this).classAsync("has-active",this.state.hasActive),$(this).classAsync("expanded",this.state.expanded),this.hasOverflowVisibility&&$(this).classAsync("hidden",this.state.overflowCollapsed===this.overflowVisibility))}static get subscriptParameterBlocks(){return["isActivePage"]}static get subscriptBlocks(){return["render"]}},ma=e=>class extends(ha(e)){connectedCallback(){this.rtl=this.hasAttribute("drawer-rtl"),this.breakpoint=this.getAttribute("drawer-breakpoint")}draw(e){$(this.namespace.drawer).class("hidden",!1),$(this.namespace.drawer).class("w-96",!0),$(this.namespace.drawer).play([{transform:`translate(${this.rtl?"":"-"}400px)`},{transform:"translate(0px)"}],{duration:200,easing:"ease-in",reverse:!e}).then((t=>{this.state.active=e,e||($(t).class("hidden",!0),$(t).class("w-96",!1))})),this.namespace.backdrop&&($(this.namespace.backdrop).class("hidden",!1),$(this.namespace.backdrop).play([{opacity:0},{opacity:1}],{duration:300,easing:"ease-in",reverse:!e}).then((t=>{e||$(t).class("hidden",!0)})))}collapseWith(...e){$(e.filter((e=>e))).on("click",(()=>{this.state.active&&setTimeout((()=>{this.draw(!1)}),100)}),{unique:!0,tags:[this]})}toggle(){this.draw(!this.state.active)}toggleWith(...e){$(e.filter((e=>e))).on("click",(()=>{this.toggle()}),{unique:!0,tags:[this]})}},ga=class extends(ua(WebQit.SubscriptElement(HTMLBodyElement))){};customElements.define("playui-scrolltimeline-body",ga,{extends:"body"});const ya=class extends(ua(WebQit.SubscriptElement(HTMLDivElement))){};customElements.define("playui-scrolltimeline-div",ya,{extends:"div"});const va=class extends(ua(WebQit.SubscriptElement(HTMLUListElement))){};customElements.define("playui-scrolltimeline-ul",va,{extends:"ul"});const ba=class extends(ua(WebQit.SubscriptElement(HTMLLIElement))){};customElements.define("playui-scrolltimeline-li",ba,{extends:"li"});const wa=class extends(pa(WebQit.SubscriptElement(HTMLDivElement))){};customElements.define("playui-scrollspy-div",wa,{extends:"div"});const Oa=class extends(fa(WebQit.SubscriptElement(HTMLUListElement))){};customElements.define("playui-list-ul",Oa,{extends:"ul"});const xa=class extends(fa(WebQit.SubscriptElement(HTMLOListElement))){};customElements.define("playui-list-ol",xa,{extends:"ol"});const Ea=class extends(da(WebQit.SubscriptElement(HTMLLIElement))){};customElements.define("playui-linkitem-li",Ea,{extends:"li"});const ja=class extends(ma(WebQit.SubscriptElement(HTMLDivElement))){};customElements.define("playui-drawer-div",ja,{extends:"div"});const ka=async(e,t,r)=>r();async function Sa(e,t,r){return r(t)}const Ca={};Ca["/-"]=s,Ca["/"]=n,function(e,t){const r=function(e=!1){const t=e?"localStorage":"sessionStorage";if(!window[t])throw new Error(`The specified Web Storage API ${t} is invalid or not supported`);const r={};return me.intercept(r,((e,r,s)=>{if("get"===e.type&&v(e.name)){const r=window[t].getItem(e.name);return h(r)?r:JSON.parse(r)}if("set"===e.type)return window[t].setItem(e.name,h(e.value)?e.value:JSON.stringify(e.value)),!0;if("deleteProperty"===e.type)return window[t].removeItem(e.name),!0;if("has"===e.type){for(var n=0;n<window[t].length;n++)if(window[t].key(n)===e.name)return!0;return!1}if("ownKeys"===e.type){var i=[];for(n=0;n<window[t].length;n++)i.push(window[t].key(n));return i}return"getOwnPropertyDescriptor"===e.type?{enumerable:!0,configurable:!0}:s()})),me.proxy(r)}(),s=new Fs("/worker.js",{startMessages:!0});var n;me.observe(s,(e=>{console.log("SERVICE_WORKER_STATE",e[0].name,e[0].value)})),e={...e},t={...t},window.addEventListener("online",(()=>me.set(Bs,"online",navigator.onLine))),window.addEventListener("offline",(()=>me.set(Bs,"online",navigator.onLine))),class{static async createClient(e,t={}){const r={go(e,t={},r=null){return me.set(this.location,"href",e,{detail:{request:t,src:r}})}};me.set(r,"location",new Ns(window.document.location)),window.addEventListener("popstate",(e=>{window.setTimeout((()=>{me.set(r.location,Ns.copy(window.document.location),{detail:{type:"history",src:window.document.location}})}),0)})),window.addEventListener("click",(e=>{var t,s;if((t=e.target.closest("a"))&&(s=t.href)&&!t.target&&!t.download&&(!t.origin||t.origin===r.location.origin)){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;me.set(r.location,Ns.copy(t),{detail:{type:"link",src:t}}),s.includes("#")||e.preventDefault()}})),window.addEventListener("submit",(e=>{var t=window.document.createElement("a"),s=e.target.closest("form"),n=[e.submitter],i=["action","enctype","method","noValidate","target"].reduce(((e,t)=>(e[t]=n.reduce(((e,r)=>{return e||(r.hasAttribute(`form${t.toLowerCase()}`)?r[`form${s=t,"string"!=typeof s?s:s.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}))}`]:null);var s}),null)||s[t],e)),{});if(i.method=e.submitter.dataset.method||s.dataset.method||i.method,(t.href=i.action)&&!i.target&&(!t.origin||t.origin===r.location.origin)){var a=new FormData(s);if(e.submitter.name&&a.set(e.submitter.name,e.submitter.value),"get"===i.method){var o=bs(t.search);Array.from(a.entries()).forEach((e=>{vs(o,e[0],e[1],!1)})),t.search=Os(o),a=null}if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;me.set(r.location,Ns.copy(t),{detail:{type:"form",src:s,submitParams:i,data:a}}),t.hash||e.preventDefault()}})),r.history=window.history,me.observe(r.location,[["href"]],(e=>{if(((e=e[0]).detail||{}).src!==window.document.location&&"http:"!==e.value)if(e.value===window.document.location.href||e.value+"/"===window.document.location.href)r.history.replaceState(r.history.state,"",r.location.href);else try{r.history.pushState(r.history.state,"",r.location.href)}catch(e){}}),{diff:!0});const s=(e,t,r={})=>{var s=r.detail||{},n={method:(s.submitParams||s.src||{}).method||"get",body:s.data,headers:{...s.headers||{},"X-Powered-By":"@webqit/webflo"},referrer:t};return new Ls(e,n)},n=e=>{if(e&&e.redirected){var t=window.document.createElement("a");!(t.href=e.url)||t.origin&&t.origin!==r.location.origin||me.set(r.location,{href:e.url},{detail:{follow:!1}})}};return me.observe(r.location,[["href"]],(async t=>{var i=(t=t[0]).detail||{};if(!1!==i.follow){var a=(i.submitParams||i.src||{}).method;return Vr(t.value,"#")!==Vr(t.oldValue,"#")||a&&"GET"!==a.toUpperCase()?n(await e.call(r,s(t.value,t.oldValue,t),t)):void 0}}),{diff:!1}),n(await e.call(r,s(window.document.location.href,document.referrer))),r}}.createClient((async function(t,s=null){const i=this,a={layout:e,onHydration:!s&&await window.WebQit.OOHTML.meta.get("isomorphic"),response:null},o=new Rs(t,r),l=o.url.pathname,c=new Is(l,e,a);n&&(n.setActive(!1),n=null);try{const e=o.request.method.toLowerCase();a.response=await c.route(["delete"===e?"del":e,"default"],o,document.state,(async function(e){var t=n=new Qs;t.setActive(!0,e.request._method||e.request.method);const r=e.request.headers;r.get("Accept")||r.set("Accept","application/json"),r.get("Cache-Control")||r.set("Cache-Control","no-store");const s=fetch(e.request,{},t.updateProgress.bind(t));return s.catch((e=>t.throw(e.message))),s.then((async e=>(e=new o.Response(e.body,{status:e.status,statusText:e.statusText,headers:e.headers,_proxy:{url:e.url,ok:e.ok,redirected:e.redirected}}),a.responseClone=e,t.active?(t.setActive(!1),e):new Promise((()=>{})))))})),a.response instanceof o.Response&&(a.response=await a.response.jsonBuild()),await c.route("render",o,a.response,(async function(e,t){return await new Promise((e=>window.WebQit.DOM.ready(e))),window.document.state.env||window.document.setState({env:"client",onHydration:a.onHydration,network:Bs,url:i.location,session:r},{update:!0}),window.document.setState({page:t},{update:"merge"}),window.document.body.setAttribute("template","page/"+l.split("/").filter((e=>e)).map((e=>e+"+-")).join("/")),new Promise((e=>{window.document.addEventListener("templatesreadystatechange",(()=>e(window))),"complete"===window.document.templatesReadyState&&e(window)}))})),s&&g(s.detail)&&s.detail.src instanceof Element&&Vr(s.value,"?")!==Vr(s.oldValue,"?")&&setTimeout((()=>{var e;o.url.hash&&(e=document.querySelector(o.url.hash))?e.scrollIntoView(!0):(document.documentElement.classList.add("scroll-reset"),window.scroll({top:0,left:0}),setTimeout((()=>{document.documentElement.classList.remove("scroll-reset")}),200))}),0)}catch(e){throw window.document.body.setAttribute("template",""),e}return a.responseClone}))}.call(null,Ca,{bundling:{},worker:{scope:"/",cache_name:"cache_v2",cache_only_url_list:[""],cache_first_url_list:[""],network_first_url_list:["/*"],network_only_url_list:[""],skip_waiting:!1,lifecycle_logs:!1,support_push:!1},"client params":!1,client:{},"Service Worker":!0});