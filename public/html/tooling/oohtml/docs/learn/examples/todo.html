<html>

    <head>

        <title>A TODO List in OOHTML</title>
        <meta name="oohtml" content="attr.id=data-id;" />

        <script src="https://unpkg.com/@webqit/playui-js/dist/main.js"></script>
        <script src="https://unpkg.com/@webqit/oohtml/dist/main.js"></script>
        <script>
            // Make PlayUI available globally
            window.$ = window.WebQit.$;
            window.Observer = window.WebQit.Observer;

            // Create the app
            const app = {
                title: 'My TODO',
                todo: [
                    {desc: 'Task-1', active: true},
                    {desc: 'Task-2', active: true},
                    {desc: 'Task-3', active: true},
                ],
            };
            document.setState(app);
        </script>

        <template name="items">
            
            <li namespace style="white-space: nowrap;">
                <span data-id="desc"></span>
                <button data-id="toggle">Toggle Active</button>
                <script type="subscript">
                    $(this.namespace.desc).html(this.state.desc);
                    $(this.namespace.desc).css('opacity', this.state.active ? '1' : '0');
                    $(this.namespace.toggle).on('click', () => {
                        this.state.active = !this.state.active;
                    });
                </script>
            </li>

        </template>

    </head>

    <body>

        <div namespace>

            <h2 data-id="title"></h2>
            <ol data-id="items" template="items"></ol>
            <button data-id="adder">Add</button>
            
            <br /><br />

            <div>
            You can also add items from the console directly.<br />
            Open your console and type: <code>Observer.proxy(document.state.todo).push({desc:"New Item", active: true})</code>
            </div>

            <script type="subscript">
                this.namespace.title.innerHTML = title;
                $(this.namespace.items).list(document.state.todo);
                this.namespace.adder.addEventListener('click', () => {
                    Observer.proxy(document.state.todo).push({desc: prompt('Task description', 'Task-' + (document.state.todo.length + 1)), active: true});
                });
            </script>

        </div>
    </body>

</html>
